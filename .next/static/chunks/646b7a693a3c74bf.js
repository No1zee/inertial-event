(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75031,e=>{"use strict";var t=e.i(3024);let s=/^Format:[\s\t]*/,a=/^Style:[\s\t]*/,l=/^Dialogue:[\s\t]*/,i=/[\s\t]*,[\s\t]*/,r=/\{[^}]+\}/g,n=/\\N/g,c=/^\[(.*)[\s\t]?Styles\]$/,h=/^\[(.*)[\s\t]?Events\]$/;class o{h;O=0;c=null;l=[];m=[];N=null;f;P={};async init(t){this.h=t,t.errors&&(this.f=(await e.A(98650)).ParseErrorBuilder)}parse(e,t){if(this.O)switch(this.O){case 1:if(""===e)this.O=0;else if(a.test(e))if(this.N){let t=e.replace(a,"").split(i);this.S(t)}else this.g(this.f?.T("Style",t));else s.test(e)?this.N=e.replace(s,"").split(i):h.test(e)&&(this.N=null,this.O=2);break;case 2:if(""===e)this.Q();else if(l.test(e))if(this.Q(),this.N){let s=e.replace(l,"").split(i),a=this.U(s,t);a&&(this.c=a)}else this.g(this.f?.T("Dialogue",t));else this.c?this.c.text+="\n"+e.replace(r,"").replace(n,"\n"):s.test(e)?this.N=e.replace(s,"").split(i):c.test(e)?(this.N=null,this.O=1):h.test(e)&&(this.N=null)}else""===e||(c.test(e)?(this.N=null,this.O=1):h.test(e)&&(this.N=null,this.O=2))}done(){return{metadata:{},cues:this.l,regions:[],errors:this.m}}Q(){this.c&&(this.l.push(this.c),this.h.onCue?.(this.c),this.c=null)}S(e){let t="Default",s={},a,l="center",i="bottom",r,n=1.2,c,h,o=3,g=[];for(let p=0;p<this.N.length;p++){let f=this.N[p],b=e[p];switch(f){case"Name":t=b;break;case"Fontname":s["font-family"]=b;break;case"Fontsize":s["font-size"]=`calc(${b} / var(--overlay-height))`;break;case"PrimaryColour":let d=u(b);d&&(s["--cue-color"]=d);break;case"BorderStyle":o=parseInt(b,10);break;case"BackColour":h=u(b);break;case"OutlineColour":let k=u(b);k&&(c=k);break;case"Bold":parseInt(b)&&(s["font-weight"]="bold");break;case"Italic":parseInt(b)&&(s["font-style"]="italic");break;case"Underline":parseInt(b)&&(s["text-decoration"]="underline");break;case"StrikeOut":parseInt(b)&&(s["text-decoration"]="line-through");break;case"Spacing":s["letter-spacing"]=b+"px";break;case"AlphaLevel":s.opacity=parseFloat(b);break;case"ScaleX":g.push(`scaleX(${parseFloat(b)/100})`);break;case"ScaleY":g.push(`scaleY(${parseFloat(b)/100})`);break;case"Angle":g.push(`rotate(${b}deg)`);break;case"Shadow":n=1.2*parseInt(b,10);break;case"MarginL":s["--cue-width"]="auto",s["--cue-left"]=parseFloat(b)+"px";break;case"MarginR":s["--cue-width"]="auto",s["--cue-right"]=parseFloat(b)+"px";break;case"MarginV":r=parseFloat(b);break;case"Outline":a=parseInt(b,10);break;case"Alignment":let m=parseInt(b,10);switch(m>=4&&(i=m>=7?"top":"center"),m%3){case 1:l="start";break;case 2:l="center";break;case 3:l="end"}}}if(s.R=i,s["--cue-white-space"]="normal",s["--cue-line-height"]="normal",s["--cue-text-align"]=l,"center"===i?(s["--cue-top"]="50%",g.push("translateY(-50%)")):s[`--cue-${i}`]=(r||0)+"px",1===o&&(s["--cue-padding-y"]="0"),(1===o||h)&&(s["--cue-bg-color"]=1===o?"none":h),3===o&&c&&(s["--cue-outline"]=`${a}px solid ${c}`),1===o&&"number"==typeof a){let e=h??"#000";s["--cue-text-shadow"]=[c&&p(1.2*a,1.2*n,c),c?p(a/2*a,a/2*n,e):p(a,n,e)].filter(Boolean).join(", ")}g.length&&(s["--cue-transform"]=g.join(" ")),this.P[t]=s}U(e,s){let a=this.V(e),l=this.q(a.Start,a.End,s);if(!l)return;let i=new t.b(l[0],l[1],""),c={...this.P[a.Style]||{}},h=a.Name?`<v ${a.Name}>`:"",o=c.R,u=a.MarginL&&parseFloat(a.MarginL),p=a.MarginR&&parseFloat(a.MarginR),g=a.MarginV&&parseFloat(a.MarginV);return u&&(c["--cue-width"]="auto",c["--cue-left"]=u+"px"),p&&(c["--cue-width"]="auto",c["--cue-right"]=p+"px"),g&&"center"!==o&&(c[`--cue-${o}`]=g+"px"),i.text=h+e.slice(this.N.length-1).join(", ").replace(r,"").replace(n,"\n"),delete c.R,Object.keys(c).length&&(i.style=c),i}V(e){let t={};for(let s=0;s<this.N.length;s++)t[this.N[s]]=e[s];return t}q(e,s,a){let l=(0,t.p)(e),i=(0,t.p)(s);if(null!==l&&null!==i&&i>l)return[l,i];null===l&&this.g(this.f?.s(e,a)),null===i&&this.g(this.f?.t(s,a)),null!=l&&null!==i&&i>l&&this.g(this.f?.u(l,i,a))}g(e){if(e){if(this.m.push(e),this.h.strict)throw this.h.cancel(),e;this.h.onError?.(e)}}}function u(e){let t=parseInt(e.replace("&H",""),16);return t>=0?"rgba("+[255&t,t>>8&255,t>>16&255,(t>>24&255^255)/255].join(",")+")":null}function p(e,t,s){let a=Math.ceil(2*Math.PI*e),l="";for(let i=0;i<a;i++){let r=2*Math.PI*i/a;l+=e*Math.cos(r)+"px "+t*Math.sin(r)+"px 0 "+s+(i==a-1?"":",")}return l}function g(){return new o}e.s(["SSAParser",()=>o,"default",()=>g])}]);