module.exports=[48548,a=>{"use strict";var b=a.i(63514);let c=/^Format:[\s\t]*/,d=/^Style:[\s\t]*/,e=/^Dialogue:[\s\t]*/,f=/[\s\t]*,[\s\t]*/,g=/\{[^}]+\}/g,h=/\\N/g,i=/^\[(.*)[\s\t]?Styles\]$/,j=/^\[(.*)[\s\t]?Events\]$/;class k{h;O=0;c=null;l=[];m=[];N=null;f;P={};async init(b){this.h=b,b.errors&&(this.f=(await a.A(63679)).ParseErrorBuilder)}parse(a,b){if(this.O)switch(this.O){case 1:if(""===a)this.O=0;else if(d.test(a))if(this.N){let b=a.replace(d,"").split(f);this.S(b)}else this.g(this.f?.T("Style",b));else c.test(a)?this.N=a.replace(c,"").split(f):j.test(a)&&(this.N=null,this.O=2);break;case 2:if(""===a)this.Q();else if(e.test(a))if(this.Q(),this.N){let c=a.replace(e,"").split(f),d=this.U(c,b);d&&(this.c=d)}else this.g(this.f?.T("Dialogue",b));else this.c?this.c.text+="\n"+a.replace(g,"").replace(h,"\n"):c.test(a)?this.N=a.replace(c,"").split(f):i.test(a)?(this.N=null,this.O=1):j.test(a)&&(this.N=null)}else""===a||(i.test(a)?(this.N=null,this.O=1):j.test(a)&&(this.N=null,this.O=2))}done(){return{metadata:{},cues:this.l,regions:[],errors:this.m}}Q(){this.c&&(this.l.push(this.c),this.h.onCue?.(this.c),this.c=null)}S(a){let b="Default",c={},d,e="center",f="bottom",g,h=1.2,i,j,k=3,n=[];for(let m=0;m<this.N.length;m++){let o=this.N[m],p=a[m];switch(o){case"Name":b=p;break;case"Fontname":c["font-family"]=p;break;case"Fontsize":c["font-size"]=`calc(${p} / var(--overlay-height))`;break;case"PrimaryColour":let q=l(p);q&&(c["--cue-color"]=q);break;case"BorderStyle":k=parseInt(p,10);break;case"BackColour":j=l(p);break;case"OutlineColour":let r=l(p);r&&(i=r);break;case"Bold":parseInt(p)&&(c["font-weight"]="bold");break;case"Italic":parseInt(p)&&(c["font-style"]="italic");break;case"Underline":parseInt(p)&&(c["text-decoration"]="underline");break;case"StrikeOut":parseInt(p)&&(c["text-decoration"]="line-through");break;case"Spacing":c["letter-spacing"]=p+"px";break;case"AlphaLevel":c.opacity=parseFloat(p);break;case"ScaleX":n.push(`scaleX(${parseFloat(p)/100})`);break;case"ScaleY":n.push(`scaleY(${parseFloat(p)/100})`);break;case"Angle":n.push(`rotate(${p}deg)`);break;case"Shadow":h=1.2*parseInt(p,10);break;case"MarginL":c["--cue-width"]="auto",c["--cue-left"]=parseFloat(p)+"px";break;case"MarginR":c["--cue-width"]="auto",c["--cue-right"]=parseFloat(p)+"px";break;case"MarginV":g=parseFloat(p);break;case"Outline":d=parseInt(p,10);break;case"Alignment":let s=parseInt(p,10);switch(s>=4&&(f=s>=7?"top":"center"),s%3){case 1:e="start";break;case 2:e="center";break;case 3:e="end"}}}if(c.R=f,c["--cue-white-space"]="normal",c["--cue-line-height"]="normal",c["--cue-text-align"]=e,"center"===f?(c["--cue-top"]="50%",n.push("translateY(-50%)")):c[`--cue-${f}`]=(g||0)+"px",1===k&&(c["--cue-padding-y"]="0"),(1===k||j)&&(c["--cue-bg-color"]=1===k?"none":j),3===k&&i&&(c["--cue-outline"]=`${d}px solid ${i}`),1===k&&"number"==typeof d){let a=j??"#000";c["--cue-text-shadow"]=[i&&m(1.2*d,1.2*h,i),i?m(d/2*d,d/2*h,a):m(d,h,a)].filter(Boolean).join(", ")}n.length&&(c["--cue-transform"]=n.join(" ")),this.P[b]=c}U(a,c){let d=this.V(a),e=this.q(d.Start,d.End,c);if(!e)return;let f=new b.b(e[0],e[1],""),i={...this.P[d.Style]||{}},j=d.Name?`<v ${d.Name}>`:"",k=i.R,l=d.MarginL&&parseFloat(d.MarginL),m=d.MarginR&&parseFloat(d.MarginR),n=d.MarginV&&parseFloat(d.MarginV);return l&&(i["--cue-width"]="auto",i["--cue-left"]=l+"px"),m&&(i["--cue-width"]="auto",i["--cue-right"]=m+"px"),n&&"center"!==k&&(i[`--cue-${k}`]=n+"px"),f.text=j+a.slice(this.N.length-1).join(", ").replace(g,"").replace(h,"\n"),delete i.R,Object.keys(i).length&&(f.style=i),f}V(a){let b={};for(let c=0;c<this.N.length;c++)b[this.N[c]]=a[c];return b}q(a,c,d){let e=(0,b.p)(a),f=(0,b.p)(c);if(null!==e&&null!==f&&f>e)return[e,f];null===e&&this.g(this.f?.s(a,d)),null===f&&this.g(this.f?.t(c,d)),null!=e&&null!==f&&f>e&&this.g(this.f?.u(e,f,d))}g(a){if(a){if(this.m.push(a),this.h.strict)throw this.h.cancel(),a;this.h.onError?.(a)}}}function l(a){let b=parseInt(a.replace("&H",""),16);return b>=0?"rgba("+[255&b,b>>8&255,b>>16&255,(b>>24&255^255)/255].join(",")+")":null}function m(a,b,c){let d=Math.ceil(2*Math.PI*a),e="";for(let f=0;f<d;f++){let g=2*Math.PI*f/d;e+=a*Math.cos(g)+"px "+b*Math.sin(g)+"px 0 "+c+(f==d-1?"":",")}return e}function n(){return new k}a.s(["SSAParser",()=>k,"default",()=>n])},37589,a=>{a.v(b=>Promise.all(["server/chunks/ssr/node_modules_media-captions_dist_prod_c1db2266._.js","server/chunks/ssr/node_modules_media-captions_dist_prod_index_fe131185.js"].map(b=>a.l(b))).then(()=>b(79468)))},66714,a=>{a.v(b=>Promise.all(["server/chunks/ssr/node_modules_media-captions_dist_prod_ad5f7112._.js","server/chunks/ssr/node_modules_media-captions_dist_prod_index_fe131185.js"].map(b=>a.l(b))).then(()=>b(48548)))},63679,a=>{a.v(b=>Promise.all(["server/chunks/ssr/node_modules_media-captions_dist_prod_9dbe1a39._.js","server/chunks/ssr/node_modules_media-captions_dist_prod_index_fe131185.js"].map(b=>a.l(b))).then(()=>b(14173)))}];

//# sourceMappingURL=node_modules_media-captions_dist_prod_ad5f7112._.js.map