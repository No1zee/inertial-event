{"version":3,"sources":["../../../../node_modules/%40vidstack/react/prod/chunks/vidstack-CQQ1xKSy.js","../../../../node_modules/%40vidstack/react/prod/chunks/vidstack-BeT6vBOi.js"],"sourcesContent":["\"use client\"\n\nimport { IS_CHROME, canGoogleCastSrc, IS_IOS, IS_SERVER, loadScript } from './vidstack-D5Pzx_k5.js';\nimport { listenEvent, peek } from './vidstack-CZgUA94N.js';\n\nfunction getCastFrameworkURL() {\n  return \"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1\";\n}\nfunction hasLoadedCastFramework() {\n  return !!window.cast?.framework;\n}\nfunction isCastAvailable() {\n  return !!window.chrome?.cast?.isAvailable;\n}\nfunction isCastConnected() {\n  return getCastContext().getCastState() === cast.framework.CastState.CONNECTED;\n}\nfunction getCastContext() {\n  return window.cast.framework.CastContext.getInstance();\n}\nfunction getCastSession() {\n  return getCastContext().getCurrentSession();\n}\nfunction getCastSessionMedia() {\n  return getCastSession()?.getSessionObj().media[0];\n}\nfunction hasActiveCastSession(src) {\n  const contentId = getCastSessionMedia()?.media.contentId;\n  return contentId === src?.src;\n}\nfunction getDefaultCastOptions() {\n  return {\n    language: \"en-US\",\n    autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,\n    receiverApplicationId: chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,\n    resumeSavedSession: true,\n    androidReceiverCompatible: true\n  };\n}\nfunction getCastErrorMessage(code) {\n  const defaultMessage = `Google Cast Error Code: ${code}`;\n  return defaultMessage;\n}\nfunction listenCastContextEvent(type, handler) {\n  return listenEvent(getCastContext(), type, handler);\n}\n\nclass GoogleCastLoader {\n  name = \"google-cast\";\n  target;\n  #player;\n  /**\n   * @see {@link https://developers.google.com/cast/docs/reference/web_sender/cast.framework.CastContext}\n   */\n  get cast() {\n    return getCastContext();\n  }\n  mediaType() {\n    return \"video\";\n  }\n  canPlay(src) {\n    return IS_CHROME && !IS_IOS && canGoogleCastSrc(src);\n  }\n  async prompt(ctx) {\n    let loadEvent, openEvent, errorEvent;\n    try {\n      loadEvent = await this.#loadCastFramework(ctx);\n      if (!this.#player) {\n        this.#player = new cast.framework.RemotePlayer();\n        new cast.framework.RemotePlayerController(this.#player);\n      }\n      openEvent = ctx.player.createEvent(\"google-cast-prompt-open\", {\n        trigger: loadEvent\n      });\n      ctx.player.dispatchEvent(openEvent);\n      this.#notifyRemoteStateChange(ctx, \"connecting\", openEvent);\n      await this.#showPrompt(peek(ctx.$props.googleCast));\n      ctx.$state.remotePlaybackInfo.set({\n        deviceName: getCastSession()?.getCastDevice().friendlyName\n      });\n      if (isCastConnected()) this.#notifyRemoteStateChange(ctx, \"connected\", openEvent);\n    } catch (code) {\n      const error = code instanceof Error ? code : this.#createError(\n        (code + \"\").toUpperCase(),\n        \"Prompt failed.\"\n      );\n      errorEvent = ctx.player.createEvent(\"google-cast-prompt-error\", {\n        detail: error,\n        trigger: openEvent ?? loadEvent,\n        cancelable: true\n      });\n      ctx.player.dispatch(errorEvent);\n      this.#notifyRemoteStateChange(\n        ctx,\n        isCastConnected() ? \"connected\" : \"disconnected\",\n        errorEvent\n      );\n      throw error;\n    } finally {\n      ctx.player.dispatch(\"google-cast-prompt-close\", {\n        trigger: errorEvent ?? openEvent ?? loadEvent\n      });\n    }\n  }\n  async load(ctx) {\n    if (IS_SERVER) {\n      throw Error(\"[vidstack] can not load google cast provider server-side\");\n    }\n    if (!this.#player) {\n      throw Error(\"[vidstack] google cast player was not initialized\");\n    }\n    return new (await import('./vidstack-BeT6vBOi.js')).GoogleCastProvider(this.#player, ctx);\n  }\n  async #loadCastFramework(ctx) {\n    if (hasLoadedCastFramework()) return;\n    const loadStartEvent = ctx.player.createEvent(\"google-cast-load-start\");\n    ctx.player.dispatch(loadStartEvent);\n    await loadScript(getCastFrameworkURL());\n    await customElements.whenDefined(\"google-cast-launcher\");\n    const loadedEvent = ctx.player.createEvent(\"google-cast-loaded\", { trigger: loadStartEvent });\n    ctx.player.dispatch(loadedEvent);\n    if (!isCastAvailable()) {\n      throw this.#createError(\"CAST_NOT_AVAILABLE\", \"Google Cast not available on this platform.\");\n    }\n    return loadedEvent;\n  }\n  async #showPrompt(options) {\n    this.#setOptions(options);\n    const errorCode = await this.cast.requestSession();\n    if (errorCode) {\n      throw this.#createError(\n        errorCode.toUpperCase(),\n        getCastErrorMessage(errorCode)\n      );\n    }\n  }\n  #setOptions(options) {\n    this.cast?.setOptions({\n      ...getDefaultCastOptions(),\n      ...options\n    });\n  }\n  #notifyRemoteStateChange(ctx, state, trigger) {\n    const detail = { type: \"google-cast\", state };\n    ctx.notify(\"remote-playback-change\", detail, trigger);\n  }\n  #createError(code, message) {\n    const error = Error(message);\n    error.code = code;\n    return error;\n  }\n}\n\nvar loader = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  GoogleCastLoader: GoogleCastLoader\n});\n\nexport { getCastContext, getCastErrorMessage, getCastSession, getCastSessionMedia, hasActiveCastSession, listenCastContextEvent, loader };\n","\"use client\"\n\nimport { listenEvent, effect, untrack, createScope, keysOf, onDispose, DOMEvent, peek } from './vidstack-CZgUA94N.js';\nimport { ListSymbol, TimeRange, RAFLoop } from './vidstack-D5Pzx_k5.js';\nimport { getCastSessionMedia, getCastContext, getCastSession, hasActiveCastSession, listenCastContextEvent, getCastErrorMessage } from './vidstack-CQQ1xKSy.js';\nimport 'react';\nimport '@floating-ui/dom';\n\nclass GoogleCastMediaInfoBuilder {\n  #info;\n  constructor(src) {\n    this.#info = new chrome.cast.media.MediaInfo(src.src, src.type);\n  }\n  build() {\n    return this.#info;\n  }\n  setStreamType(streamType) {\n    if (streamType.includes(\"live\")) {\n      this.#info.streamType = chrome.cast.media.StreamType.LIVE;\n    } else {\n      this.#info.streamType = chrome.cast.media.StreamType.BUFFERED;\n    }\n    return this;\n  }\n  setTracks(tracks) {\n    this.#info.tracks = tracks.map(this.#buildCastTrack);\n    return this;\n  }\n  setMetadata(title, poster) {\n    this.#info.metadata = new chrome.cast.media.GenericMediaMetadata();\n    this.#info.metadata.title = title;\n    this.#info.metadata.images = [{ url: poster }];\n    return this;\n  }\n  #buildCastTrack(track, trackId) {\n    const castTrack = new chrome.cast.media.Track(trackId, chrome.cast.media.TrackType.TEXT);\n    castTrack.name = track.label;\n    castTrack.trackContentId = track.src;\n    castTrack.trackContentType = \"text/vtt\";\n    castTrack.language = track.language;\n    castTrack.subtype = track.kind.toUpperCase();\n    return castTrack;\n  }\n}\n\nclass GoogleCastTracksManager {\n  #cast;\n  #ctx;\n  #onNewLocalTracks;\n  constructor(cast, ctx, onNewLocalTracks) {\n    this.#cast = cast;\n    this.#ctx = ctx;\n    this.#onNewLocalTracks = onNewLocalTracks;\n  }\n  setup() {\n    const syncRemoteActiveIds = this.syncRemoteActiveIds.bind(this);\n    listenEvent(this.#ctx.audioTracks, \"change\", syncRemoteActiveIds);\n    listenEvent(this.#ctx.textTracks, \"mode-change\", syncRemoteActiveIds);\n    effect(this.#syncLocalTracks.bind(this));\n  }\n  getLocalTextTracks() {\n    return this.#ctx.$state.textTracks().filter((track) => track.src && track.type === \"vtt\");\n  }\n  #getLocalAudioTracks() {\n    return this.#ctx.$state.audioTracks();\n  }\n  #getRemoteTracks(type) {\n    const tracks = this.#cast.mediaInfo?.tracks ?? [];\n    return type ? tracks.filter((track) => track.type === type) : tracks;\n  }\n  #getRemoteActiveIds() {\n    const activeIds = [], activeLocalAudioTrack = this.#getLocalAudioTracks().find((track) => track.selected), activeLocalTextTracks = this.getLocalTextTracks().filter((track) => track.mode === \"showing\");\n    if (activeLocalAudioTrack) {\n      const remoteAudioTracks = this.#getRemoteTracks(chrome.cast.media.TrackType.AUDIO), remoteAudioTrack = this.#findRemoteTrack(remoteAudioTracks, activeLocalAudioTrack);\n      if (remoteAudioTrack) activeIds.push(remoteAudioTrack.trackId);\n    }\n    if (activeLocalTextTracks?.length) {\n      const remoteTextTracks = this.#getRemoteTracks(chrome.cast.media.TrackType.TEXT);\n      if (remoteTextTracks.length) {\n        for (const localTrack of activeLocalTextTracks) {\n          const remoteTextTrack = this.#findRemoteTrack(remoteTextTracks, localTrack);\n          if (remoteTextTrack) activeIds.push(remoteTextTrack.trackId);\n        }\n      }\n    }\n    return activeIds;\n  }\n  #syncLocalTracks() {\n    const localTextTracks = this.getLocalTextTracks();\n    if (!this.#cast.isMediaLoaded) return;\n    const remoteTextTracks = this.#getRemoteTracks(chrome.cast.media.TrackType.TEXT);\n    for (const localTrack of localTextTracks) {\n      const hasRemoteTrack = this.#findRemoteTrack(remoteTextTracks, localTrack);\n      if (!hasRemoteTrack) {\n        untrack(() => this.#onNewLocalTracks?.());\n        break;\n      }\n    }\n  }\n  syncRemoteTracks(event) {\n    if (!this.#cast.isMediaLoaded) return;\n    const localAudioTracks = this.#getLocalAudioTracks(), localTextTracks = this.getLocalTextTracks(), remoteAudioTracks = this.#getRemoteTracks(chrome.cast.media.TrackType.AUDIO), remoteTextTracks = this.#getRemoteTracks(chrome.cast.media.TrackType.TEXT);\n    for (const remoteAudioTrack of remoteAudioTracks) {\n      const hasLocalTrack = this.#findLocalTrack(localAudioTracks, remoteAudioTrack);\n      if (hasLocalTrack) continue;\n      const localAudioTrack = {\n        id: remoteAudioTrack.trackId.toString(),\n        label: remoteAudioTrack.name,\n        language: remoteAudioTrack.language,\n        kind: remoteAudioTrack.subtype ?? \"main\",\n        selected: false\n      };\n      this.#ctx.audioTracks[ListSymbol.add](localAudioTrack, event);\n    }\n    for (const remoteTextTrack of remoteTextTracks) {\n      const hasLocalTrack = this.#findLocalTrack(localTextTracks, remoteTextTrack);\n      if (hasLocalTrack) continue;\n      const localTextTrack = {\n        id: remoteTextTrack.trackId.toString(),\n        src: remoteTextTrack.trackContentId,\n        label: remoteTextTrack.name,\n        language: remoteTextTrack.language,\n        kind: remoteTextTrack.subtype.toLowerCase()\n      };\n      this.#ctx.textTracks.add(localTextTrack, event);\n    }\n  }\n  syncRemoteActiveIds(event) {\n    if (!this.#cast.isMediaLoaded) return;\n    const activeIds = this.#getRemoteActiveIds(), editRequest = new chrome.cast.media.EditTracksInfoRequest(activeIds);\n    this.#editTracksInfo(editRequest).catch((error) => {\n    });\n  }\n  #editTracksInfo(request) {\n    const media = getCastSessionMedia();\n    return new Promise((resolve, reject) => media?.editTracksInfo(request, resolve, reject));\n  }\n  #findLocalTrack(localTracks, remoteTrack) {\n    return localTracks.find((localTrack) => this.#isMatch(localTrack, remoteTrack));\n  }\n  #findRemoteTrack(remoteTracks, localTrack) {\n    return remoteTracks.find((remoteTrack) => this.#isMatch(localTrack, remoteTrack));\n  }\n  // Note: we can't rely on id matching because they will differ between local/remote. A local\n  // track id might not even exist.\n  #isMatch(localTrack, remoteTrack) {\n    return remoteTrack.name === localTrack.label && remoteTrack.language === localTrack.language && remoteTrack.subtype.toLowerCase() === localTrack.kind.toLowerCase();\n  }\n}\n\nclass GoogleCastProvider {\n  $$PROVIDER_TYPE = \"GOOGLE_CAST\";\n  scope = createScope();\n  #player;\n  #ctx;\n  #tracks;\n  #currentSrc = null;\n  #state = \"disconnected\";\n  #currentTime = 0;\n  #played = 0;\n  #seekableRange = new TimeRange(0, 0);\n  #timeRAF = new RAFLoop(this.#onAnimationFrame.bind(this));\n  #playerEventHandlers;\n  #reloadInfo = null;\n  #isIdle = false;\n  constructor(player, ctx) {\n    this.#player = player;\n    this.#ctx = ctx;\n    this.#tracks = new GoogleCastTracksManager(player, ctx, this.#onNewLocalTracks.bind(this));\n  }\n  get type() {\n    return \"google-cast\";\n  }\n  get currentSrc() {\n    return this.#currentSrc;\n  }\n  /**\n   * The Google Cast remote player.\n   *\n   * @see {@link https://developers.google.com/cast/docs/reference/web_sender/cast.framework.RemotePlayer}\n   */\n  get player() {\n    return this.#player;\n  }\n  /**\n   * @see {@link https://developers.google.com/cast/docs/reference/web_sender/cast.framework.CastContext}\n   */\n  get cast() {\n    return getCastContext();\n  }\n  /**\n   * @see {@link https://developers.google.com/cast/docs/reference/web_sender/cast.framework.CastSession}\n   */\n  get session() {\n    return getCastSession();\n  }\n  /**\n   * @see {@link https://developers.google.com/cast/docs/reference/web_sender/chrome.cast.media.Media}\n   */\n  get media() {\n    return getCastSessionMedia();\n  }\n  /**\n   * Whether the current Google Cast session belongs to this provider.\n   */\n  get hasActiveSession() {\n    return hasActiveCastSession(this.#currentSrc);\n  }\n  setup() {\n    this.#attachCastContextEventListeners();\n    this.#attachCastPlayerEventListeners();\n    this.#tracks.setup();\n    this.#ctx.notify(\"provider-setup\", this);\n  }\n  #attachCastContextEventListeners() {\n    listenCastContextEvent(\n      cast.framework.CastContextEventType.CAST_STATE_CHANGED,\n      this.#onCastStateChange.bind(this)\n    );\n  }\n  #attachCastPlayerEventListeners() {\n    const Event2 = cast.framework.RemotePlayerEventType, handlers = {\n      [Event2.IS_CONNECTED_CHANGED]: this.#onCastStateChange,\n      [Event2.IS_MEDIA_LOADED_CHANGED]: this.#onMediaLoadedChange,\n      [Event2.CAN_CONTROL_VOLUME_CHANGED]: this.#onCanControlVolumeChange,\n      [Event2.CAN_SEEK_CHANGED]: this.#onCanSeekChange,\n      [Event2.DURATION_CHANGED]: this.#onDurationChange,\n      [Event2.IS_MUTED_CHANGED]: this.#onVolumeChange,\n      [Event2.VOLUME_LEVEL_CHANGED]: this.#onVolumeChange,\n      [Event2.IS_PAUSED_CHANGED]: this.#onPausedChange,\n      [Event2.LIVE_SEEKABLE_RANGE_CHANGED]: this.#onProgress,\n      [Event2.PLAYER_STATE_CHANGED]: this.#onPlayerStateChange\n    };\n    this.#playerEventHandlers = handlers;\n    const handler = this.#onRemotePlayerEvent.bind(this);\n    for (const type of keysOf(handlers)) {\n      this.#player.controller.addEventListener(type, handler);\n    }\n    onDispose(() => {\n      for (const type of keysOf(handlers)) {\n        this.#player.controller.removeEventListener(type, handler);\n      }\n    });\n  }\n  async play() {\n    if (!this.#player.isPaused && !this.#isIdle) return;\n    if (this.#isIdle) {\n      await this.#reload(false, 0);\n      return;\n    }\n    this.#player.controller?.playOrPause();\n  }\n  async pause() {\n    if (this.#player.isPaused) return;\n    this.#player.controller?.playOrPause();\n  }\n  getMediaStatus(request) {\n    return new Promise((resolve, reject) => {\n      this.media?.getStatus(request, resolve, reject);\n    });\n  }\n  setMuted(muted) {\n    const hasChanged = muted && !this.#player.isMuted || !muted && this.#player.isMuted;\n    if (hasChanged) this.#player.controller?.muteOrUnmute();\n  }\n  setCurrentTime(time) {\n    this.#player.currentTime = time;\n    this.#ctx.notify(\"seeking\", time);\n    this.#player.controller?.seek();\n  }\n  setVolume(volume) {\n    this.#player.volumeLevel = volume;\n    this.#player.controller?.setVolumeLevel();\n  }\n  async loadSource(src) {\n    if (this.#reloadInfo?.src !== src) this.#reloadInfo = null;\n    if (hasActiveCastSession(src)) {\n      this.#resumeSession();\n      this.#currentSrc = src;\n      return;\n    }\n    this.#ctx.notify(\"load-start\");\n    const loadRequest = this.#buildLoadRequest(src), errorCode = await this.session.loadMedia(loadRequest);\n    if (errorCode) {\n      this.#currentSrc = null;\n      this.#ctx.notify(\"error\", Error(getCastErrorMessage(errorCode)));\n      return;\n    }\n    this.#currentSrc = src;\n  }\n  destroy() {\n    this.#reset();\n    this.#endSession();\n  }\n  #reset() {\n    if (!this.#reloadInfo) {\n      this.#played = 0;\n      this.#seekableRange = new TimeRange(0, 0);\n    }\n    this.#timeRAF.stop();\n    this.#currentTime = 0;\n    this.#reloadInfo = null;\n  }\n  #resumeSession() {\n    const resumeSessionEvent = new DOMEvent(\"resume-session\", { detail: this.session });\n    this.#onMediaLoadedChange(resumeSessionEvent);\n    const { muted, volume, savedState } = this.#ctx.$state, localState = savedState();\n    this.setCurrentTime(Math.max(this.#player.currentTime, localState?.currentTime ?? 0));\n    this.setMuted(muted());\n    this.setVolume(volume());\n    if (localState?.paused === false) this.play();\n  }\n  #endSession() {\n    this.cast.endCurrentSession(true);\n    const { remotePlaybackLoader } = this.#ctx.$state;\n    remotePlaybackLoader.set(null);\n  }\n  #disconnectFromReceiver() {\n    const { savedState } = this.#ctx.$state;\n    savedState.set({\n      paused: this.#player.isPaused,\n      currentTime: this.#player.currentTime\n    });\n    this.#endSession();\n  }\n  #onAnimationFrame() {\n    this.#onCurrentTimeChange();\n  }\n  #onRemotePlayerEvent(event) {\n    this.#playerEventHandlers[event.type].call(this, event);\n  }\n  #onCastStateChange(data) {\n    const castState = this.cast.getCastState(), state = castState === cast.framework.CastState.CONNECTED ? \"connected\" : castState === cast.framework.CastState.CONNECTING ? \"connecting\" : \"disconnected\";\n    if (this.#state === state) return;\n    const detail = { type: \"google-cast\", state }, trigger = this.#createEvent(data);\n    this.#state = state;\n    this.#ctx.notify(\"remote-playback-change\", detail, trigger);\n    if (state === \"disconnected\") {\n      this.#disconnectFromReceiver();\n    }\n  }\n  #onMediaLoadedChange(event) {\n    const hasLoaded = !!this.#player.isMediaLoaded;\n    if (!hasLoaded) return;\n    const src = peek(this.#ctx.$state.source);\n    Promise.resolve().then(() => {\n      if (src !== peek(this.#ctx.$state.source) || !this.#player.isMediaLoaded) return;\n      this.#reset();\n      const duration = this.#player.duration;\n      this.#seekableRange = new TimeRange(0, duration);\n      const detail = {\n        provider: this,\n        duration,\n        buffered: new TimeRange(0, 0),\n        seekable: this.#getSeekableRange()\n      }, trigger = this.#createEvent(event);\n      this.#ctx.notify(\"loaded-metadata\", void 0, trigger);\n      this.#ctx.notify(\"loaded-data\", void 0, trigger);\n      this.#ctx.notify(\"can-play\", detail, trigger);\n      this.#onCanControlVolumeChange();\n      this.#onCanSeekChange(event);\n      const { volume, muted } = this.#ctx.$state;\n      this.setVolume(volume());\n      this.setMuted(muted());\n      this.#timeRAF.start();\n      this.#tracks.syncRemoteTracks(trigger);\n      this.#tracks.syncRemoteActiveIds(trigger);\n    });\n  }\n  #onCanControlVolumeChange() {\n    this.#ctx.$state.canSetVolume.set(this.#player.canControlVolume);\n  }\n  #onCanSeekChange(event) {\n    const trigger = this.#createEvent(event);\n    this.#ctx.notify(\"stream-type-change\", this.#getStreamType(), trigger);\n  }\n  #getStreamType() {\n    const streamType = this.#player.mediaInfo?.streamType;\n    return streamType === chrome.cast.media.StreamType.LIVE ? this.#player.canSeek ? \"live:dvr\" : \"live\" : \"on-demand\";\n  }\n  #onCurrentTimeChange() {\n    if (this.#reloadInfo) return;\n    const currentTime = this.#player.currentTime;\n    if (currentTime === this.#currentTime) return;\n    this.#ctx.notify(\"time-change\", currentTime);\n    if (currentTime > this.#played) {\n      this.#played = currentTime;\n      this.#onProgress();\n    }\n    if (this.#ctx.$state.seeking()) {\n      this.#ctx.notify(\"seeked\", currentTime);\n    }\n    this.#currentTime = currentTime;\n  }\n  #onDurationChange(event) {\n    if (!this.#player.isMediaLoaded || this.#reloadInfo) return;\n    const duration = this.#player.duration, trigger = this.#createEvent(event);\n    this.#seekableRange = new TimeRange(0, duration);\n    this.#ctx.notify(\"duration-change\", duration, trigger);\n  }\n  #onVolumeChange(event) {\n    if (!this.#player.isMediaLoaded) return;\n    const detail = {\n      muted: this.#player.isMuted,\n      volume: this.#player.volumeLevel\n    }, trigger = this.#createEvent(event);\n    this.#ctx.notify(\"volume-change\", detail, trigger);\n  }\n  #onPausedChange(event) {\n    const trigger = this.#createEvent(event);\n    if (this.#player.isPaused) {\n      this.#ctx.notify(\"pause\", void 0, trigger);\n    } else {\n      this.#ctx.notify(\"play\", void 0, trigger);\n    }\n  }\n  #onProgress(event) {\n    const detail = {\n      seekable: this.#getSeekableRange(),\n      buffered: new TimeRange(0, this.#played)\n    }, trigger = event ? this.#createEvent(event) : void 0;\n    this.#ctx.notify(\"progress\", detail, trigger);\n  }\n  #onPlayerStateChange(event) {\n    const state = this.#player.playerState, PlayerState = chrome.cast.media.PlayerState;\n    this.#isIdle = state === PlayerState.IDLE;\n    if (state === PlayerState.PAUSED) return;\n    const trigger = this.#createEvent(event);\n    switch (state) {\n      case PlayerState.PLAYING:\n        this.#ctx.notify(\"playing\", void 0, trigger);\n        break;\n      case PlayerState.BUFFERING:\n        this.#ctx.notify(\"waiting\", void 0, trigger);\n        break;\n      case PlayerState.IDLE:\n        this.#timeRAF.stop();\n        this.#ctx.notify(\"pause\");\n        this.#ctx.notify(\"end\");\n        break;\n    }\n  }\n  #getSeekableRange() {\n    return this.#player.liveSeekableRange ? new TimeRange(this.#player.liveSeekableRange.start, this.#player.liveSeekableRange.end) : this.#seekableRange;\n  }\n  #createEvent(detail) {\n    return detail instanceof Event ? detail : new DOMEvent(detail.type, { detail });\n  }\n  #buildMediaInfo(src) {\n    const { streamType, title, poster } = this.#ctx.$state;\n    return new GoogleCastMediaInfoBuilder(src).setMetadata(title(), poster()).setStreamType(streamType()).setTracks(this.#tracks.getLocalTextTracks()).build();\n  }\n  #buildLoadRequest(src) {\n    const mediaInfo = this.#buildMediaInfo(src), request = new chrome.cast.media.LoadRequest(mediaInfo), savedState = this.#ctx.$state.savedState();\n    request.autoplay = (this.#reloadInfo?.paused ?? savedState?.paused) === false;\n    request.currentTime = this.#reloadInfo?.time ?? savedState?.currentTime ?? 0;\n    return request;\n  }\n  async #reload(paused, time) {\n    const src = peek(this.#ctx.$state.source);\n    this.#reloadInfo = { src, paused, time };\n    await this.loadSource(src);\n  }\n  #onNewLocalTracks() {\n    this.#reload(this.#player.isPaused, this.#player.currentTime).catch((error) => {\n    });\n  }\n}\n\nexport { GoogleCastProvider };\n"],"names":[],"mappings":"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","ignoreList":[0,1]}