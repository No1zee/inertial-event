{"version":3,"sources":["../../../../node_modules/%40vidstack/react/prod/chunks/vidstack-BN7_0WI-.js"],"sourcesContent":["\"use client\"\n\nimport { peek, listenEvent, effect, DOMEvent, camelToKebabCase, isString, isUndefined, isFunction } from './vidstack-CZgUA94N.js';\nimport { QualitySymbol, RAFLoop, TextTrack, TextTrackSymbol, ListSymbol, IS_CHROME, coerceToError, loadScript, VideoProvider, isHLSSupported, preconnect } from './vidstack-D5Pzx_k5.js';\nimport 'react';\nimport '@floating-ui/dom';\n\nconst toDOMEventType = (type) => camelToKebabCase(type);\nclass HLSController {\n  #video;\n  #ctx;\n  #instance = null;\n  #stopLiveSync = null;\n  config = {};\n  #callbacks = /* @__PURE__ */ new Set();\n  get instance() {\n    return this.#instance;\n  }\n  constructor(video, ctx) {\n    this.#video = video;\n    this.#ctx = ctx;\n  }\n  setup(ctor) {\n    const { streamType } = this.#ctx.$state;\n    const isLive = peek(streamType).includes(\"live\"), isLiveLowLatency = peek(streamType).includes(\"ll-\");\n    this.#instance = new ctor({\n      lowLatencyMode: isLiveLowLatency,\n      backBufferLength: isLiveLowLatency ? 4 : isLive ? 8 : void 0,\n      renderTextTracksNatively: false,\n      ...this.config\n    });\n    const dispatcher = this.#dispatchHLSEvent.bind(this);\n    for (const event of Object.values(ctor.Events)) this.#instance.on(event, dispatcher);\n    this.#instance.on(ctor.Events.ERROR, this.#onError.bind(this));\n    for (const callback of this.#callbacks) callback(this.#instance);\n    this.#ctx.player.dispatch(\"hls-instance\", {\n      detail: this.#instance\n    });\n    this.#instance.attachMedia(this.#video);\n    this.#instance.on(ctor.Events.AUDIO_TRACK_SWITCHED, this.#onAudioSwitch.bind(this));\n    this.#instance.on(ctor.Events.LEVEL_SWITCHED, this.#onLevelSwitched.bind(this));\n    this.#instance.on(ctor.Events.LEVEL_LOADED, this.#onLevelLoaded.bind(this));\n    this.#instance.on(ctor.Events.LEVEL_UPDATED, this.#onLevelUpdated.bind(this));\n    this.#instance.on(ctor.Events.NON_NATIVE_TEXT_TRACKS_FOUND, this.#onTracksFound.bind(this));\n    this.#instance.on(ctor.Events.CUES_PARSED, this.#onCuesParsed.bind(this));\n    this.#ctx.qualities[QualitySymbol.enableAuto] = this.#enableAutoQuality.bind(this);\n    listenEvent(this.#ctx.qualities, \"change\", this.#onUserQualityChange.bind(this));\n    listenEvent(this.#ctx.audioTracks, \"change\", this.#onUserAudioChange.bind(this));\n    this.#stopLiveSync = effect(this.#liveSync.bind(this));\n  }\n  #createDOMEvent(type, data) {\n    return new DOMEvent(toDOMEventType(type), { detail: data });\n  }\n  #liveSync() {\n    if (!this.#ctx.$state.live()) return;\n    const raf = new RAFLoop(this.#liveSyncPosition.bind(this));\n    raf.start();\n    return raf.stop.bind(raf);\n  }\n  #liveSyncPosition() {\n    this.#ctx.$state.liveSyncPosition.set(this.#instance?.liveSyncPosition ?? Infinity);\n  }\n  #dispatchHLSEvent(type, data) {\n    this.#ctx.player?.dispatch(this.#createDOMEvent(type, data));\n  }\n  #onTracksFound(eventType, data) {\n    const event = this.#createDOMEvent(eventType, data);\n    let currentTrack = -1;\n    for (let i = 0; i < data.tracks.length; i++) {\n      const nonNativeTrack = data.tracks[i], init = nonNativeTrack.subtitleTrack ?? nonNativeTrack.closedCaptions, track = new TextTrack({\n        id: `hls-${nonNativeTrack.kind}-${i}`,\n        src: init?.url,\n        label: nonNativeTrack.label,\n        language: init?.lang,\n        kind: nonNativeTrack.kind,\n        default: nonNativeTrack.default\n      });\n      track[TextTrackSymbol.readyState] = 2;\n      track[TextTrackSymbol.onModeChange] = () => {\n        if (track.mode === \"showing\") {\n          this.#instance.subtitleTrack = i;\n          currentTrack = i;\n        } else if (currentTrack === i) {\n          this.#instance.subtitleTrack = -1;\n          currentTrack = -1;\n        }\n      };\n      this.#ctx.textTracks.add(track, event);\n    }\n  }\n  #onCuesParsed(eventType, data) {\n    const index = this.#instance?.subtitleTrack, track = this.#ctx.textTracks.getById(`hls-${data.type}-${index}`);\n    if (!track) return;\n    const event = this.#createDOMEvent(eventType, data);\n    for (const cue of data.cues) {\n      cue.positionAlign = \"auto\";\n      track.addCue(cue, event);\n    }\n  }\n  #onAudioSwitch(eventType, data) {\n    const track = this.#ctx.audioTracks[data.id];\n    if (track) {\n      const trigger = this.#createDOMEvent(eventType, data);\n      this.#ctx.audioTracks[ListSymbol.select](track, true, trigger);\n    }\n  }\n  #onLevelSwitched(eventType, data) {\n    const quality = this.#ctx.qualities[data.level];\n    if (quality) {\n      const trigger = this.#createDOMEvent(eventType, data);\n      this.#ctx.qualities[ListSymbol.select](quality, true, trigger);\n    }\n  }\n  #onLevelUpdated(eventType, data) {\n    if (data.details.totalduration > 0) {\n      this.#ctx.$state.inferredLiveDVRWindow.set(data.details.totalduration);\n    }\n  }\n  #onLevelLoaded(eventType, data) {\n    if (this.#ctx.$state.canPlay()) return;\n    const { type, live, totalduration: duration, targetduration } = data.details, trigger = this.#createDOMEvent(eventType, data);\n    this.#ctx.notify(\n      \"stream-type-change\",\n      live ? type === \"EVENT\" && Number.isFinite(duration) && targetduration >= 10 ? \"live:dvr\" : \"live\" : \"on-demand\",\n      trigger\n    );\n    this.#ctx.notify(\"duration-change\", duration, trigger);\n    const media = this.#instance.media;\n    if (this.#instance.currentLevel === -1) {\n      this.#ctx.qualities[QualitySymbol.setAuto](true, trigger);\n    }\n    for (const remoteTrack of this.#instance.audioTracks) {\n      const localTrack = {\n        id: remoteTrack.id.toString(),\n        label: remoteTrack.name,\n        language: remoteTrack.lang || \"\",\n        kind: \"main\"\n      };\n      this.#ctx.audioTracks[ListSymbol.add](localTrack, trigger);\n    }\n    for (const level of this.#instance.levels) {\n      const videoQuality = {\n        id: level.id?.toString() ?? level.height + \"p\",\n        width: level.width,\n        height: level.height,\n        codec: level.codecSet,\n        bitrate: level.bitrate\n      };\n      this.#ctx.qualities[ListSymbol.add](videoQuality, trigger);\n    }\n    media.dispatchEvent(new DOMEvent(\"canplay\", { trigger }));\n  }\n  #onError(eventType, data) {\n    if (data.fatal) {\n      switch (data.type) {\n        case \"mediaError\":\n          this.#instance?.recoverMediaError();\n          break;\n        default:\n          this.#onFatalError(data.error);\n          break;\n      }\n    }\n  }\n  #onFatalError(error) {\n    this.#ctx.notify(\"error\", {\n      message: error.message,\n      code: 1,\n      error\n    });\n  }\n  #enableAutoQuality() {\n    if (this.#instance) this.#instance.currentLevel = -1;\n  }\n  #onUserQualityChange() {\n    const { qualities } = this.#ctx;\n    if (!this.#instance || qualities.auto) return;\n    this.#instance[qualities.switch + \"Level\"] = qualities.selectedIndex;\n    if (IS_CHROME) {\n      this.#video.currentTime = this.#video.currentTime;\n    }\n  }\n  #onUserAudioChange() {\n    const { audioTracks } = this.#ctx;\n    if (this.#instance && this.#instance.audioTrack !== audioTracks.selectedIndex) {\n      this.#instance.audioTrack = audioTracks.selectedIndex;\n    }\n  }\n  onInstance(callback) {\n    this.#callbacks.add(callback);\n    return () => this.#callbacks.delete(callback);\n  }\n  loadSource(src) {\n    if (!isString(src.src)) return;\n    this.#instance?.loadSource(src.src);\n  }\n  destroy() {\n    this.#instance?.destroy();\n    this.#instance = null;\n    this.#stopLiveSync?.();\n    this.#stopLiveSync = null;\n  }\n}\n\nclass HLSLibLoader {\n  #lib;\n  #ctx;\n  #callback;\n  constructor(lib, ctx, callback) {\n    this.#lib = lib;\n    this.#ctx = ctx;\n    this.#callback = callback;\n    this.#startLoading();\n  }\n  async #startLoading() {\n    const callbacks = {\n      onLoadStart: this.#onLoadStart.bind(this),\n      onLoaded: this.#onLoaded.bind(this),\n      onLoadError: this.#onLoadError.bind(this)\n    };\n    let ctor = await loadHLSScript(this.#lib, callbacks);\n    if (isUndefined(ctor) && !isString(this.#lib)) ctor = await importHLS(this.#lib, callbacks);\n    if (!ctor) return null;\n    if (!ctor.isSupported()) {\n      const message = \"[vidstack] `hls.js` is not supported in this environment\";\n      this.#ctx.player.dispatch(new DOMEvent(\"hls-unsupported\"));\n      this.#ctx.notify(\"error\", { message, code: 4 });\n      return null;\n    }\n    return ctor;\n  }\n  #onLoadStart() {\n    this.#ctx.player.dispatch(new DOMEvent(\"hls-lib-load-start\"));\n  }\n  #onLoaded(ctor) {\n    this.#ctx.player.dispatch(\n      new DOMEvent(\"hls-lib-loaded\", {\n        detail: ctor\n      })\n    );\n    this.#callback(ctor);\n  }\n  #onLoadError(e) {\n    const error = coerceToError(e);\n    this.#ctx.player.dispatch(\n      new DOMEvent(\"hls-lib-load-error\", {\n        detail: error\n      })\n    );\n    this.#ctx.notify(\"error\", {\n      message: error.message,\n      code: 4,\n      error\n    });\n  }\n}\nasync function importHLS(loader, callbacks = {}) {\n  if (isUndefined(loader)) return void 0;\n  callbacks.onLoadStart?.();\n  if (loader.prototype && loader.prototype !== Function) {\n    callbacks.onLoaded?.(loader);\n    return loader;\n  }\n  try {\n    const ctor = (await loader())?.default;\n    if (ctor && !!ctor.isSupported) {\n      callbacks.onLoaded?.(ctor);\n    } else {\n      throw Error(\n        false ? \"[vidstack] failed importing `hls.js`. Dynamic import returned invalid constructor.\" : \"\"\n      );\n    }\n    return ctor;\n  } catch (err) {\n    callbacks.onLoadError?.(err);\n  }\n  return void 0;\n}\nasync function loadHLSScript(src, callbacks = {}) {\n  if (!isString(src)) return void 0;\n  callbacks.onLoadStart?.();\n  try {\n    await loadScript(src);\n    if (!isFunction(window.Hls)) {\n      throw Error(\n        false ? \"[vidstack] failed loading `hls.js`. Could not find a valid `Hls` constructor on window\" : \"\"\n      );\n    }\n    const ctor = window.Hls;\n    callbacks.onLoaded?.(ctor);\n    return ctor;\n  } catch (err) {\n    callbacks.onLoadError?.(err);\n  }\n  return void 0;\n}\n\nconst JS_DELIVR_CDN = \"https://cdn.jsdelivr.net\";\nclass HLSProvider extends VideoProvider {\n  $$PROVIDER_TYPE = \"HLS\";\n  #ctor = null;\n  #controller = new HLSController(this.video, this.ctx);\n  /**\n   * The `hls.js` constructor.\n   */\n  get ctor() {\n    return this.#ctor;\n  }\n  /**\n   * The current `hls.js` instance.\n   */\n  get instance() {\n    return this.#controller.instance;\n  }\n  /**\n   * Whether `hls.js` is supported in this environment.\n   */\n  static supported = isHLSSupported();\n  get type() {\n    return \"hls\";\n  }\n  get canLiveSync() {\n    return true;\n  }\n  #library = `${JS_DELIVR_CDN}/npm/hls.js@^1.5.0/dist/hls${\".min.js\"}`;\n  /**\n   * The `hls.js` configuration object.\n   *\n   * @see {@link https://github.com/video-dev/hls.js/blob/master/docs/API.md#fine-tuning}\n   */\n  get config() {\n    return this.#controller.config;\n  }\n  set config(config) {\n    this.#controller.config = config;\n  }\n  /**\n   * The `hls.js` constructor (supports dynamic imports) or a URL of where it can be found.\n   *\n   * @defaultValue `https://cdn.jsdelivr.net/npm/hls.js@^1.0.0/dist/hls.min.js`\n   */\n  get library() {\n    return this.#library;\n  }\n  set library(library) {\n    this.#library = library;\n  }\n  preconnect() {\n    if (!isString(this.#library)) return;\n    preconnect(this.#library);\n  }\n  setup() {\n    super.setup();\n    new HLSLibLoader(this.#library, this.ctx, (ctor) => {\n      this.#ctor = ctor;\n      this.#controller.setup(ctor);\n      this.ctx.notify(\"provider-setup\", this);\n      const src = peek(this.ctx.$state.source);\n      if (src) this.loadSource(src);\n    });\n  }\n  async loadSource(src, preload) {\n    if (!isString(src.src)) {\n      this.removeSource();\n      return;\n    }\n    this.media.preload = preload || \"\";\n    this.appendSource(src, \"application/x-mpegurl\");\n    this.#controller.loadSource(src);\n    this.currentSrc = src;\n  }\n  /**\n   * The given callback is invoked when a new `hls.js` instance is created and right before it's\n   * attached to media.\n   */\n  onInstance(callback) {\n    const instance = this.#controller.instance;\n    if (instance) callback(instance);\n    return this.#controller.onInstance(callback);\n  }\n  destroy() {\n    this.#controller.destroy();\n  }\n}\n\nexport { HLSProvider };\n"],"names":[],"mappings":"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","ignoreList":[0]}