module.exports=[5816,a=>{"use strict";var b=a.i(72131),c=a.i(30770);let d=Math.min,e=Math.max,f=Math.round,g=Math.floor,h=a=>({x:a,y:a}),i={left:"right",right:"left",bottom:"top",top:"bottom"},j={start:"end",end:"start"};function k(a,b){return"function"==typeof a?a(b):a}function l(a){return a.split("-")[0]}function m(a){return a.split("-")[1]}function n(a){return"x"===a?"y":"x"}function o(a){return"y"===a?"height":"width"}let p=new Set(["top","bottom"]);function q(a){return p.has(l(a))?"y":"x"}function r(a){return a.replace(/start|end/g,a=>j[a])}let s=["left","right"],t=["right","left"],u=["top","bottom"],v=["bottom","top"];function w(a){return a.replace(/left|right|bottom|top/g,a=>i[a])}function x(a){let{x:b,y:c,width:d,height:e}=a;return{width:d,height:e,top:c,left:b,right:b+d,bottom:c+e,x:b,y:c}}function y(a,b,c){let d,{reference:e,floating:f}=a,g=q(b),h=n(q(b)),i=o(h),j=l(b),k="y"===g,p=e.x+e.width/2-f.width/2,r=e.y+e.height/2-f.height/2,s=e[i]/2-f[i]/2;switch(j){case"top":d={x:p,y:e.y-f.height};break;case"bottom":d={x:p,y:e.y+e.height};break;case"right":d={x:e.x+e.width,y:r};break;case"left":d={x:e.x-f.width,y:r};break;default:d={x:e.x,y:e.y}}switch(m(b)){case"start":d[h]-=s*(c&&k?-1:1);break;case"end":d[h]+=s*(c&&k?-1:1)}return d}let z=async(a,b,c)=>{let{placement:d="bottom",strategy:e="absolute",middleware:f=[],platform:g}=c,h=f.filter(Boolean),i=await (null==g.isRTL?void 0:g.isRTL(b)),j=await g.getElementRects({reference:a,floating:b,strategy:e}),{x:k,y:l}=y(j,d,i),m=d,n={},o=0;for(let c=0;c<h.length;c++){let{name:f,fn:p}=h[c],{x:q,y:r,data:s,reset:t}=await p({x:k,y:l,initialPlacement:d,placement:m,strategy:e,middlewareData:n,rects:j,platform:g,elements:{reference:a,floating:b}});k=null!=q?q:k,l=null!=r?r:l,n={...n,[f]:{...n[f],...s}},t&&o<=50&&(o++,"object"==typeof t&&(t.placement&&(m=t.placement),t.rects&&(j=!0===t.rects?await g.getElementRects({reference:a,floating:b,strategy:e}):t.rects),{x:k,y:l}=y(j,m,i)),c=-1)}return{x:k,y:l,placement:m,strategy:e,middlewareData:n}};async function A(a,b){var c,d;void 0===b&&(b={});let{x:e,y:f,platform:g,rects:h,elements:i,strategy:j}=a,{boundary:l="clippingAncestors",rootBoundary:m="viewport",elementContext:n="floating",altBoundary:o=!1,padding:p=0}=k(b,a),q="number"!=typeof(d=p)?{top:0,right:0,bottom:0,left:0,...d}:{top:d,right:d,bottom:d,left:d},r=i[o?"floating"===n?"reference":"floating":n],s=x(await g.getClippingRect({element:null==(c=await (null==g.isElement?void 0:g.isElement(r)))||c?r:r.contextElement||await (null==g.getDocumentElement?void 0:g.getDocumentElement(i.floating)),boundary:l,rootBoundary:m,strategy:j})),t="floating"===n?{x:e,y:f,width:h.floating.width,height:h.floating.height}:h.reference,u=await (null==g.getOffsetParent?void 0:g.getOffsetParent(i.floating)),v=await (null==g.isElement?void 0:g.isElement(u))&&await (null==g.getScale?void 0:g.getScale(u))||{x:1,y:1},w=x(g.convertOffsetParentRelativeRectToViewportRelativeRect?await g.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:t,offsetParent:u,strategy:j}):t);return{top:(s.top-w.top+q.top)/v.y,bottom:(w.bottom-s.bottom+q.bottom)/v.y,left:(s.left-w.left+q.left)/v.x,right:(w.right-s.right+q.right)/v.x}}function B(a){return function(a){return!1}(a)?(a.nodeName||"").toLowerCase():"#document"}function C(a){var b;return(null==a||null==(b=a.ownerDocument)?void 0:b.defaultView)||window}function D(a){var b;return null==(b=(function(a){return!1}(a)?a.ownerDocument:a.document)||window.document)?void 0:b.documentElement}function E(a){return!1}let F=new Set(["inline","contents"]);function G(a){let{overflow:b,overflowX:c,overflowY:d,display:e}=R(a);return/auto|scroll|overlay|hidden|clip/.test(b+d+c)&&!F.has(e)}let H=new Set(["table","td","th"]),I=[":popover-open",":modal"];function J(a){return I.some(b=>{try{return a.matches(b)}catch(a){return!1}})}let K=["transform","translate","scale","rotate","perspective"],L=["transform","translate","scale","rotate","perspective","filter"],M=["paint","layout","strict","content"];function N(a){let b=O(),c=a;return K.some(a=>!!c[a]&&"none"!==c[a])||!!c.containerType&&"normal"!==c.containerType||!b&&!!c.backdropFilter&&"none"!==c.backdropFilter||!b&&!!c.filter&&"none"!==c.filter||L.some(a=>(c.willChange||"").includes(a))||M.some(a=>(c.contain||"").includes(a))}function O(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let P=new Set(["html","body","#document"]);function Q(a){return P.has(B(a))}function R(a){return C(a).getComputedStyle(a)}function S(a){return{scrollLeft:a.scrollX,scrollTop:a.scrollY}}function T(a){if("html"===B(a))return a;let b=a.assignedSlot||a.parentNode||!1||D(a);return b}function U(a,b,c){var d;void 0===b&&(b=[]),void 0===c&&(c=!0);let e=function a(b){let c=T(b);return Q(c)?b.ownerDocument?b.ownerDocument.body:b.body:a(c)}(a),f=e===(null==(d=a.ownerDocument)?void 0:d.body),g=C(e);if(f){let a=V(g);return b.concat(g,g.visualViewport||[],G(e)?e:[],a&&c?U(a):[])}return b.concat(e,U(e,[],c))}function V(a){return a.parent&&Object.getPrototypeOf(a.parent)?a.frameElement:null}function W(a){let b=R(a),c=parseFloat(b.width)||0,d=parseFloat(b.height)||0,e=!1,g=e?a.offsetWidth:c,h=e?a.offsetHeight:d,i=f(c)!==g||f(d)!==h;return i&&(c=g,d=h),{width:c,height:d,$:i}}function X(a){return 0,a.contextElement}function Y(a){let b=X(a);1;return h(1)}let Z=h(0);function $(a){let b=C(a);return O()&&b.visualViewport?{x:b.visualViewport.offsetLeft,y:b.visualViewport.offsetTop}:Z}function _(a,b,c,d){var e;void 0===b&&(b=!1),void 0===c&&(c=!1);let f=a.getBoundingClientRect(),g=X(a),i=h(1);b&&(d||(i=Y(a)));let j=(void 0===(e=c)&&(e=!1),d&&(!e||d===C(g))&&e)?$(g):h(0),k=(f.left+j.x)/i.x,l=(f.top+j.y)/i.y,m=f.width/i.x,n=f.height/i.y;if(g){let a=C(g),b=d,c=a,e=V(c);for(;e&&d&&b!==c;){let a=Y(e),b=e.getBoundingClientRect(),d=R(e),f=b.left+(e.clientLeft+parseFloat(d.paddingLeft))*a.x,g=b.top+(e.clientTop+parseFloat(d.paddingTop))*a.y;k*=a.x,l*=a.y,m*=a.x,n*=a.y,k+=f,l+=g,e=V(c=C(e))}}return x({width:m,height:n,x:k,y:l})}function aa(a,b){let c=S(a).scrollLeft;return b?b.left+c:_(D(a)).left+c}function ab(a,b){let c=a.getBoundingClientRect();return{x:c.left+b.scrollLeft-aa(a,c),y:c.top+b.scrollTop}}function ac(a,b,c){var d;let f;if("viewport"===b)f=function(a,b){let c=C(a),d=D(a),e=c.visualViewport,f=d.clientWidth,g=d.clientHeight,h=0,i=0;if(e){f=e.width,g=e.height;let a=O();(!a||a&&"fixed"===b)&&(h=e.offsetLeft,i=e.offsetTop)}let j=aa(d);if(j<=0){let a=d.ownerDocument,b=a.body,c=getComputedStyle(b),e="CSS1Compat"===a.compatMode&&parseFloat(c.marginLeft)+parseFloat(c.marginRight)||0,g=Math.abs(d.clientWidth-b.clientWidth-e);g<=25&&(f-=g)}else j<=25&&(f+=j);return{width:f,height:g,x:h,y:i}}(a,c);else if("document"===b){let b,c,g,h,i,j,k;d=D(a),b=D(d),c=S(d),g=d.ownerDocument.body,h=e(b.scrollWidth,b.clientWidth,g.scrollWidth,g.clientWidth),i=e(b.scrollHeight,b.clientHeight,g.scrollHeight,g.clientHeight),j=-c.scrollLeft+aa(d),k=-c.scrollTop,"rtl"===R(g).direction&&(j+=e(b.clientWidth,g.clientWidth)-h),f={width:h,height:i,x:j,y:k}}else{1;{let c=$(a);f={x:b.x-c.x,y:b.y-c.y,width:b.width,height:b.height}}}return x(f)}function ad(a){return"static"===R(a).position}function ae(a,b){1;return null}function af(a,b){var c;let d=C(a);if(J(a))return d;1;{let b=T(a);for(;b&&!Q(b);){0;b=T(b)}return d}}let ag=async function(a){let b=this.getOffsetParent||af,c=this.getDimensions,d=await c(a.floating);return{reference:function(a,b,c){var d;let e=(d=0,!1),f=D(b),g="fixed"===c,i=_(a,!0,g,b),j={scrollLeft:0,scrollTop:0},k=h(0);if(e||!e&&!g)if(("body"!==B(b)||G(f))&&(j=S(b)),e){let a=_(b,!0,g,b);k.x=a.x+b.clientLeft,k.y=a.y+b.clientTop}else f&&(k.x=aa(f));g&&!e&&f&&(k.x=aa(f));let l=!f||e||g?h(0):ab(f,j);return{x:i.left+j.scrollLeft-k.x-l.x,y:i.top+j.scrollTop-k.y-l.y,width:i.width,height:i.height}}(a.reference,await b(a.floating),a.strategy),floating:{x:0,y:0,width:d.width,height:d.height}}},ah={convertOffsetParentRelativeRectToViewportRelativeRect:function(a){var b,c;let{elements:d,rect:e,offsetParent:f,strategy:g}=a,i="fixed"===g,j=D(f),k=!!d&&J(d.floating);if(f===j||k&&i)return e;let l={scrollLeft:0,scrollTop:0},m=h(1),n=h(0),o=(b=0,!1);(o||!o&&!i)&&(("body"!==B(f)||G(j))&&(l=S(f)),c=0,0);let p=!j||o||i?h(0):ab(j,l);return{width:e.width*m.x,height:e.height*m.y,x:e.x*m.x-l.scrollLeft*m.x+n.x+p.x,y:e.y*m.y-l.scrollTop*m.y+n.y+p.y}},getDocumentElement:D,getClippingRect:function(a){let{element:b,boundary:c,rootBoundary:f,strategy:g}=a,h=[..."clippingAncestors"===c?J(b)?[]:function(a,b){var c;let d=b.get(a);if(d)return d;let e=U(a,[],!1).filter(a=>{var b;return b=0,!1}),f="fixed"===R(a).position,g=f?T(a):a;return c=0,b.set(a,e),e}(b,this._c):[].concat(c),f],i=h[0],j=h.reduce((a,c)=>{let f=ac(b,c,g);return a.top=e(f.top,a.top),a.right=d(f.right,a.right),a.bottom=d(f.bottom,a.bottom),a.left=e(f.left,a.left),a},ac(b,i,g));return{width:j.right-j.left,height:j.bottom-j.top,x:j.left,y:j.top}},getOffsetParent:af,getElementRects:ag,getClientRects:function(a){return Array.from(a.getClientRects())},getDimensions:function(a){let{width:b,height:c}=W(a);return{width:b,height:c}},getScale:Y,isElement:E,isRTL:function(a){return"rtl"===R(a).direction}};function ai(a,b){return a.x===b.x&&a.y===b.y&&a.width===b.width&&a.height===b.height}function aj(a){return!(0,c.isString)(a)&&"width"in a&&"height"in a&&(0,c.isNumber)(a.width)&&(0,c.isNumber)(a.height)}let ak="undefined"==typeof document,al=ak?"":navigator?.userAgent.toLowerCase()||"",am=!ak&&/iphone|ipad|ipod|ios|crios|fxios/i.test(al),an=!ak&&/(iphone|ipod)/gi.test(navigator?.platform||""),ao=!ak&&!!window.chrome,ap=!ak&&(!!window.safari||am);function aq(){return!ak&&!(0,c.isUndefined)(window.screen.orientation)&&!(0,c.isUndefined)(window.screen.orientation.lock)&&(0,c.isFunction)(screen.orientation.unlock)}function ar(a,b){return!ak&&(a||(a=document.createElement("audio")),a.canPlayType(b).length>0)}function as(a,b){return!ak&&(a||(a=document.createElement("video")),a.canPlayType(b).length>0)}function at(a){return!ak&&(a||(a=document.createElement("video")),a.canPlayType("application/vnd.apple.mpegurl").length>0)}function au(a){return!ak&&!!document.pictureInPictureEnabled&&!a?.disablePictureInPicture}function av(a){return!ak&&(0,c.isFunction)(a?.webkitSupportsPresentationMode)&&(0,c.isFunction)(a?.webkitSetPresentationMode)}async function aw(){let a=document.createElement("video");return a.volume=.5,await (0,c.waitTimeout)(0),.5===a.volume}function ax(){if(ak)return!1;let a=ak?void 0:window?.ManagedMediaSource??window?.MediaSource??window?.WebKitMediaSource;if((0,c.isUndefined)(a))return!1;let b=a&&(0,c.isFunction)(a.isTypeSupported)&&a.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),d=ak?void 0:window?.SourceBuffer??window?.WebKitSourceBuffer,e=(0,c.isUndefined)(d)||!(0,c.isUndefined)(d.prototype)&&(0,c.isFunction)(d.prototype.appendBuffer)&&(0,c.isFunction)(d.prototype.remove);return!!b&&!!e}class ay{#a;get length(){return this.#a.length}constructor(a,b){(0,c.isArray)(a)?this.#a=a:(0,c.isUndefined)(a)||(0,c.isUndefined)(b)?this.#a=[]:this.#a=[[a,b]]}start(a){return this.#a[a][0]??1/0}end(a){return this.#a[a][1]??1/0}}function az(a){if(!a.length)return null;let b=a.start(0);for(let c=1;c<a.length;c++){let d=a.start(c);d<b&&(b=d)}return b}function aA(a){if(!a.length)return null;let b=a.end(0);for(let c=1;c<a.length;c++){let d=a.end(c);d>b&&(b=d)}return b}let aB=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx|flac)($|\?)/i,aC=new Set(["audio/mpeg","audio/ogg","audio/3gp","audio/mp3","audio/webm","audio/flac","audio/m4a","audio/m4b","audio/mp4a","audio/mp4"]),aD=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,aE=new Set(["video/mp4","video/webm","video/3gp","video/ogg","video/avi","video/mpeg"]),aF=/\.(m3u8)($|\?)/i,aG=/\.(mpd)($|\?)/i,aH=new Set(["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"]),aI=new Set(["application/dash+xml"]);function aJ({src:a,type:b}){return(0,c.isString)(a)?aB.test(a)||aC.has(b)||a.startsWith("blob:")&&"audio/object"===b:"audio/object"===b}function aK(a){return(0,c.isString)(a.src)?aD.test(a.src)||aE.has(a.type)||a.src.startsWith("blob:")&&"video/object"===a.type||aL(a)&&(ak||at()):"video/object"===a.type}function aL({src:a,type:b}){return(0,c.isString)(a)&&aF.test(a)||aH.has(b)}function aM({src:a,type:b}){return(0,c.isString)(a)&&aG.test(a)||aI.has(b)}function aN(a){return(0,c.isString)(a.src)&&(aJ(a)||aK(a)||aL(a))}function aO(a,b){let c=new URL(a);for(let a of Object.keys(b))c.searchParams.set(a,b[a]+"");return c.toString()}function aP(a,b="preconnect"){if(ak)return!1;let d=document.querySelector(`link[href="${a}"]`);if(!(0,c.isNull)(d))return!0;let e=document.createElement("link");return e.rel=b,e.href=a,e.crossOrigin="true",document.head.append(e),!0}let aQ={};function aR(a){if(aQ[a])return aQ[a].promise;let b=(0,c.deferredPromise)(),d=document.querySelector(`script[src="${a}"]`);if(!(0,c.isNull)(d))return b.resolve(),b.promise;aQ[a]=b;let e=document.createElement("script");return e.src=a,e.onload=()=>{b.resolve(),delete aQ[a]},e.onerror=()=>{b.reject(),delete aQ[a]},setTimeout(()=>document.head.append(e),0),b.promise}function aS(a){return"use-credentials"===a?"include":(0,c.isString)(a)?"same-origin":void 0}function aT({title:a,src:b,download:d}){let e=(0,c.isBoolean)(d)||""===d?b.src:(0,c.isString)(d)?d:d?.url;return!function({url:a,src:b,download:d}){return(0,c.isString)(a)&&(d&&!0!==d||aJ(b)||aK(b))}({url:e,src:b,download:d})?null:{url:e,name:!(0,c.isBoolean)(d)&&!(0,c.isString)(d)&&d?.filename||a.toLowerCase()||"media"}}let aU={crossOrigin:Symbol(0),readyState:Symbol(0),updateActiveCues:Symbol(0),canLoad:Symbol(0),onModeChange:Symbol(0),native:Symbol(0),nativeHLS:Symbol(0)};function aV(a,b){return b>=a.startTime&&b<a.endTime}function aW(a,b,d){let e=null,f=(0,c.getScope)();function g(){let g=(0,c.isString)(b)?[b]:b,h=a.toArray().find(a=>g.includes(a.kind)&&"showing"===a.mode);if(h!==e){if(!h){d(null),e=null;return}2==h.readyState?d(h):(d(null),(0,c.scoped)(()=>{let a=(0,c.listenEvent)(h,"load",()=>{d(h),a()},{once:!0})},f)),e=h}}return g(),(0,c.listenEvent)(a,"mode-change",g)}class aX extends c.EventsTarget{static createId(a){return`vds-${a.type}-${a.kind}-${a.src??a.label??"?"}`}src;content;type;encoding;id="";label="";language="";kind;default=!1;#b=!1;#c=0;#d="disabled";#e={};#f=[];#g=[];#h=[];[aU.readyState]=0;[aU.crossOrigin];[aU.onModeChange]=null;[aU.native]=null;get metadata(){return this.#e}get regions(){return this.#f}get cues(){return this.#g}get activeCues(){return this.#h}get readyState(){return this[aU.readyState]}get mode(){return this.#d}set mode(a){this.setMode(a)}constructor(a){for(const b of(super(),Object.keys(a)))this[b]=a[b];this.type||(this.type="vtt"),!ak&&a.content?this.#i(a):a.src||(this[aU.readyState]=2)}addCue(a,b){let d=0,e=this.#g.length;for(d=0;d<e&&!(a.endTime<=this.#g[d].startTime);d++);d===e?this.#g.push(a):this.#g.splice(d,0,a),a instanceof TextTrackCue||this[aU.native]?.track.addCue(a),this.dispatchEvent(new c.DOMEvent("add-cue",{detail:a,trigger:b})),aV(a,this.#c)&&this[aU.updateActiveCues](this.#c,b)}removeCue(a,b){let d=this.#g.indexOf(a);if(d>=0){let e=this.#h.includes(a);this.#g.splice(d,1),this[aU.native]?.track.removeCue(a),this.dispatchEvent(new c.DOMEvent("remove-cue",{detail:a,trigger:b})),e&&this[aU.updateActiveCues](this.#c,b)}}setMode(a,b){this.#d!==a&&(this.#d=a,"disabled"===a?(this.#h=[],this.#j()):2===this.readyState?this[aU.updateActiveCues](this.#c,b):this.#k(),this.dispatchEvent(new c.DOMEvent("mode-change",{detail:this,trigger:b})),this[aU.onModeChange]?.())}[aU.updateActiveCues](a,b){if(this.#c=a,"disabled"===this.mode||!this.#g.length)return;let c=[];for(let b=0,d=this.#g.length;b<d;b++){let d=this.#g[b];aV(d,a)&&c.push(d)}let d=c.length!==this.#h.length;if(!d){for(let a=0;a<c.length;a++)if(!this.#h.includes(c[a])){d=!0;break}}this.#h=c,d&&this.#j(b)}[aU.canLoad](){this.#b=!0,"disabled"!==this.#d&&this.#k()}#i(b){a.A(30642).then(({parseText:a,VTTCue:d,VTTRegion:e})=>{(0,c.isString)(b.content)&&"json"!==b.type?a(b.content,{type:b.type}).then(({cues:a,regions:b})=>{this.#g=a,this.#f=b,this.#l()}):(this.#m(b.content,d,e),3!==this.readyState&&this.#l())})}async #k(){if(this.#b&&!(this[aU.readyState]>0)){if(this[aU.readyState]=1,this.dispatchEvent(new c.DOMEvent("load-start")),!this.src)return void this.#l();try{let{parseResponse:b,VTTCue:c,VTTRegion:d}=await a.A(30642),e=this[aU.crossOrigin]?.(),f=fetch(this.src,{headers:"json"===this.type?{"Content-Type":"application/json"}:void 0,credentials:aS(e)});if("json"===this.type)this.#m(await (await f).text(),c,d);else{let{errors:a,metadata:c,regions:d,cues:e}=await b(f,{type:this.type,encoding:this.encoding});if(a[0]?.code===0)throw a[0];this.#e=c,this.#f=d,this.#g=e}this.#l()}catch(a){this.#n(a)}}}#l(){if(this[aU.readyState]=2,!this.src||"vtt"!==this.type){let a=this[aU.native];if(a&&!a.managed)for(let b of this.#g)a.track.addCue(b)}let a=new c.DOMEvent("load");this[aU.updateActiveCues](this.#c,a),this.dispatchEvent(a)}#n(a){this[aU.readyState]=3,this.dispatchEvent(new c.DOMEvent("error",{detail:a}))}#m(a,b,d){try{var e,f,g;let h,i,j,{regions:k,cues:l}=(e=a,f=b,g=d,h=(0,c.isString)(e)?JSON.parse(e):e,i=[],j=[],h.regions&&g&&(i=h.regions.map(a=>Object.assign(new g,a))),(h.cues||(0,c.isArray)(h))&&(j=((0,c.isArray)(h)?h:h.cues).filter(a=>(0,c.isNumber)(a.startTime)&&(0,c.isNumber)(a.endTime)).map(a=>Object.assign(new f(0,0,""),a))),{regions:i,cues:j});this.#f=k,this.#g=l}catch(a){this.#n(a)}}#j(a){this.dispatchEvent(new c.DOMEvent("cue-change",{trigger:a}))}}let aY=/captions|subtitles/;function aZ(a){return aY.test(a.kind)}let a$=new c.State({artist:"",artwork:null,audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,audioGain:null,buffered:new ay,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:aq(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,get iOSControls(){return an&&"video"===this.mediaType&&(!this.playsInline||!c.fscreen.fullscreenEnabled&&this.fullscreen)},get nativeControls(){return this.controls||this.iOSControls},controlsVisible:!1,get controlsHidden(){return!this.controlsVisible},crossOrigin:null,ended:!1,error:null,fullscreen:!1,get loop(){return this.providedLoop||this.userPrefersLoop},logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new ay,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,canSetAudioGain:!1,seekable:new ay,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(aZ).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.ended?this.duration:this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get duration(){return this.seekableWindow},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return"unknown"!==this.providedViewType?this.providedViewType:this.inferredViewType},get streamType(){return"unknown"!==this.providedStreamType?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){return Math.max(az(this.buffered)??0,this.clipStartTime)},get bufferedEnd(){let a=aA(this.buffered)??0;return Math.min(this.seekableEnd,Math.max(0,a-this.clipStartTime))},get bufferedWindow(){return Math.max(0,this.bufferedEnd-this.bufferedStart)},get seekableStart(){if(this.isLiveDVR&&this.liveDVRWindow>0)return Math.max(0,this.seekableEnd-this.liveDVRWindow);return Math.max(az(this.seekable)??0,this.clipStartTime)},get seekableEnd(){if(this.providedDuration>0)return this.providedDuration;let a=this.liveSyncPosition>0?this.liveSyncPosition:this.canPlay?aA(this.seekable)??1/0:0;return this.clipEndTime>0?Math.min(this.clipEndTime,a):a},get seekableWindow(){let a=this.seekableEnd-this.seekableStart;return isNaN(a)?1/0:Math.max(0,a)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return"airplay"===this.remotePlaybackType&&"connected"===this.remotePlaybackState},get isGoogleCastConnected(){return"google-cast"===this.remotePlaybackType&&"connected"===this.remotePlaybackState},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.duration)&&(!this.isLiveDVR||this.duration>=this.liveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.duration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,this.seekableEnd-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},get isLiveDVR(){return/:dvr/.test(this.streamType)},get liveDVRWindow(){return Math.max(this.inferredLiveDVRWindow,this.minLiveDVRWindow)},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedLoop:!1,userPrefersLoop:!1,providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null,inferredLiveDVRWindow:0,savedState:null}),a_=new Set(["autoPlayError","autoPlaying","buffered","canPlay","error","paused","played","playing","seekable","seeking","waiting"]),a0=new Set([...a_,"ended","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","inferredLiveDVRWindow","liveSyncPosition","realCurrentTime","savedState","started","userBehindLiveEdge"]);function a1(a,b=!1){let d=b?a_:a0;a$.reset(a,a=>d.has(a)),(0,c.tick)()}function a2(a,b){let c=a+b.clipStartTime(),d=Math.floor(a)===Math.floor(b.seekableStart()),e=Math.floor(c)===Math.floor(b.seekableEnd());return d?b.seekableStart():e?b.seekableEnd():b.isLiveDVR()&&b.liveDVRWindow()>0&&c<b.seekableEnd()-b.liveDVRWindow()?b.bufferedStart():Math.min(Math.max(b.seekableStart()+.1,c),b.seekableEnd()-.1)}let a3=(0,c.createContext)();function a4(){return(0,c.useContext)(a3)}class a5{#o=null;#p=null;#q=-1;#r;constructor(a){this.#r=a}setTarget(a){this.#o=a}getPlayer(a){return this.#p||(a??this.#o)?.dispatchEvent(new c.DOMEvent("find-media-player",{detail:a=>void(this.#p=a),bubbles:!0,composed:!0})),this.#p}setPlayer(a){this.#p=a}startLoading(a){this.#s("media-start-loading",a)}startLoadingPoster(a){this.#s("media-poster-start-loading",a)}requestAirPlay(a){this.#s("media-airplay-request",a)}requestGoogleCast(a){this.#s("media-google-cast-request",a)}play(a){this.#s("media-play-request",a)}pause(a){this.#s("media-pause-request",a)}mute(a){this.#s("media-mute-request",a)}unmute(a){this.#s("media-unmute-request",a)}enterFullscreen(a,b){this.#s("media-enter-fullscreen-request",b,a)}exitFullscreen(a,b){this.#s("media-exit-fullscreen-request",b,a)}lockScreenOrientation(a,b){this.#s("media-orientation-lock-request",b,a)}unlockScreenOrientation(a){this.#s("media-orientation-unlock-request",a)}enterPictureInPicture(a){this.#s("media-enter-pip-request",a)}exitPictureInPicture(a){this.#s("media-exit-pip-request",a)}seeking(a,b){this.#s("media-seeking-request",b,a)}seek(a,b){this.#s("media-seek-request",b,a)}seekToLiveEdge(a){this.#s("media-live-edge-request",a)}changeDuration(a,b){this.#s("media-duration-change-request",b,a)}changeClipStart(a,b){this.#s("media-clip-start-change-request",b,a)}changeClipEnd(a,b){this.#s("media-clip-end-change-request",b,a)}changeVolume(a,b){this.#s("media-volume-change-request",b,Math.max(0,Math.min(1,a)))}changeAudioTrack(a,b){this.#s("media-audio-track-change-request",b,a)}changeQuality(a,b){this.#s("media-quality-change-request",b,a)}requestAutoQuality(a){this.changeQuality(-1,a)}changeTextTrackMode(a,b,c){this.#s("media-text-track-change-request",c,{index:a,mode:b})}changePlaybackRate(a,b){this.#s("media-rate-change-request",b,a)}changeAudioGain(a,b){this.#s("media-audio-gain-change-request",b,a)}resumeControls(a){this.#s("media-resume-controls-request",a)}pauseControls(a){this.#s("media-pause-controls-request",a)}togglePaused(a){let b=this.getPlayer(a?.target);b&&(b.state.paused?this.play(a):this.pause(a))}toggleControls(a){let b=this.getPlayer(a?.target);b&&(b.controls.showing?b.controls.hide(0,a):b.controls.show(0,a))}toggleMuted(a){let b=this.getPlayer(a?.target);b&&(b.state.muted?this.unmute(a):this.mute(a))}toggleFullscreen(a,b){let c=this.getPlayer(b?.target);c&&(c.state.fullscreen?this.exitFullscreen(a,b):this.enterFullscreen(a,b))}togglePictureInPicture(a){let b=this.getPlayer(a?.target);b&&(b.state.pictureInPicture?this.exitPictureInPicture(a):this.enterPictureInPicture(a))}showCaptions(a){let b=this.getPlayer(a?.target);if(!b)return;let c=b.state.textTracks,d=this.#q;c[d]&&aZ(c[d])||(d=-1),-1===d&&(d=c.findIndex(a=>aZ(a)&&a.default)),-1===d&&(d=c.findIndex(a=>aZ(a))),d>=0&&this.changeTextTrackMode(d,"showing",a),this.#q=-1}disableCaptions(a){let b=this.getPlayer(a?.target);if(!b)return;let c=b.state.textTracks,d=b.state.textTrack;if(d){let b=c.indexOf(d);this.changeTextTrackMode(b,"disabled",a),this.#q=b}}toggleCaptions(a){let b=this.getPlayer(a?.target);b&&(b.state.textTrack?this.disableCaptions():this.showCaptions())}userPrefersLoopChange(a,b){this.#s("media-user-loop-change-request",b,a)}#s(a,b,d){let e=new c.DOMEvent(a,{bubbles:!0,composed:!0,cancelable:!0,detail:d,trigger:b}),f=b?.target||null;f&&f instanceof c.Component&&(f=f.el),f=!f||f===document||f===window||f===document.body||this.#p?.el&&f instanceof Node&&!this.#p.el.contains(f)?this.#o??this.getPlayer()?.el:f??this.#o,this.#p&&("media-play-request"!==a||this.#p.state.canLoad)?this.#p.canPlayQueue.enqueue(a,()=>f?.dispatchEvent(e)):f?.dispatchEvent(e)}#t(a){}}class a6{playerId="vds-player";mediaId=null;#u={volume:null,muted:null,audioGain:null,time:null,lang:null,captions:null,rate:null,quality:null};async getVolume(){return this.#u.volume}async setVolume(a){this.#u.volume=a,this.save()}async getMuted(){return this.#u.muted}async setMuted(a){this.#u.muted=a,this.save()}async getTime(){return this.#u.time}async setTime(a,b){let c=a<0;this.#u.time=c?null:a,c||b?this.saveTime():this.saveTimeThrottled()}async getLang(){return this.#u.lang}async setLang(a){this.#u.lang=a,this.save()}async getCaptions(){return this.#u.captions}async setCaptions(a){this.#u.captions=a,this.save()}async getPlaybackRate(){return this.#u.rate}async setPlaybackRate(a){this.#u.rate=a,this.save()}async getAudioGain(){return this.#u.audioGain}async setAudioGain(a){this.#u.audioGain=a,this.save()}async getVideoQuality(){return this.#u.quality}async setVideoQuality(a){this.#u.quality=a,this.save()}onChange(a,b,c="vds-player"){let d=c?localStorage.getItem(c):null,e=b?localStorage.getItem(b):null;this.playerId=c,this.mediaId=b,this.#u={volume:null,muted:null,audioGain:null,lang:null,captions:null,rate:null,quality:null,...d?JSON.parse(d):{},time:e?+e:null}}save(){if(ak||!this.playerId)return;let a=JSON.stringify({...this.#u,time:void 0});localStorage.setItem(this.playerId,a)}saveTimeThrottled=(0,c.functionThrottle)(this.saveTime.bind(this),1e3);saveTime(){if(ak||!this.mediaId)return;let a=(this.#u.time??0).toString();localStorage.setItem(this.mediaId,a)}}let a7={add:Symbol(0),remove:Symbol(0),reset:Symbol(0),select:Symbol(0),readonly:Symbol(0),setReadonly:Symbol(0),onReset:Symbol(0),onRemove:Symbol(0),onUserSelect:Symbol(0)};class a8 extends c.EventsTarget{items=[];[a7.readonly]=!1;get length(){return this.items.length}get readonly(){return this[a7.readonly]}indexOf(a){return this.items.indexOf(a)}getById(a){return""===a?null:this.items.find(b=>b.id===a)??null}toArray(){return[...this.items]}[Symbol.iterator](){return this.items.values()}[a7.add](a,b){let d=this.items.length;""+d in this||Object.defineProperty(this,d,{get(){return this.items[d]}}),this.items.includes(a)||(this.items.push(a),this.dispatchEvent(new c.DOMEvent("add",{detail:a,trigger:b})))}[a7.remove](a,b){let d=this.items.indexOf(a);d>=0&&(this[a7.onRemove]?.(a,b),this.items.splice(d,1),this.dispatchEvent(new c.DOMEvent("remove",{detail:a,trigger:b})))}[a7.reset](a){for(let b of[...this.items])this[a7.remove](b,a);this.items=[],this[a7.setReadonly](!1,a),this[a7.onReset]?.()}[a7.setReadonly](a,b){this[a7.readonly]!==a&&(this[a7.readonly]=a,this.dispatchEvent(new c.DOMEvent("readonly-change",{detail:a,trigger:b})))}}let a9=Symbol(0);class ba extends a8{get selected(){return this.items.find(a=>a.selected)??null}get selectedIndex(){return this.items.findIndex(a=>a.selected)}[a7.onRemove](a,b){this[a7.select](a,!1,b)}[a7.add](a,b){a[a9]=!1,Object.defineProperty(a,"selected",{get(){return this[a9]},set:b=>{this.readonly||(this[a7.onUserSelect]?.(),this[a7.select](a,b))}}),super[a7.add](a,b)}[a7.select](a,b,d){if(b===a?.[a9])return;let e=this.selected;a&&(a[a9]=b),(b?e!==a:e===a)&&(e&&(e[a9]=!1),this.dispatchEvent(new c.DOMEvent("change",{detail:{prev:e,current:this.selected},trigger:d})))}}class bb extends ba{}function bc(a,b=2){return Number(a.toFixed(b))}function bd(a){return String(a).split(".")[1]?.length??0}function be(a,b,c){return Math.max(a,Math.min(c,b))}function bf(a,b){let d=b.composedPath()[0];return(0,c.isDOMNode)(d)&&a.contains(d)}let bg=new Set;if(!ak){let a=function(){for(let a of bg)try{a()}catch(a){}window.requestAnimationFrame(a)};a()}function bh(a,b,c){a.hasAttribute(b)||a.setAttribute(b,c)}function bi(a,b){if(!(a.hasAttribute("aria-label")||a.hasAttribute("data-no-label"))){if(!(0,c.isFunction)(b))return void(0,c.setAttribute)(a,"aria-label",b);ak?d():(0,c.effect)(d)}function d(){(0,c.setAttribute)(a,"aria-label",b())}}function bj(a){let b=getComputedStyle(a);return"none"!==b.display&&parseInt(b.opacity)>0}function bk(a,b){var c;return c=()=>b(!!a&&("checkVisibility"in a?a.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0}):bj(a))),bg.add(c),()=>bg.delete(c)}function bl(a,b,c){for(;b;)if(b===a)return!0;else if(c?.(b))break;else b=b.parentElement;return!1}function bm(a,b){return new c.EventsController(a).add("pointerup",a=>{0!==a.button||a.defaultPrevented||b(a)}).add("keydown",a=>{(0,c.isKeyboardClick)(a)&&b(a)})}function bn(a){return(0,c.isTouchEvent)(a)&&(a.touches.length>1||a.changedTouches.length>1)}function bo(a){if(ak)return a();let b=(0,c.getScope)(),d=window.requestAnimationFrame(()=>{(0,c.scoped)(a,b),d=-1});return()=>void window.cancelAnimationFrame(d)}function bp(a,b,f,{offsetVarName:h,xOffset:i,yOffset:j,...p}){if(!a)return;let x=f.replace(" ","-").replace("-center","");if((0,c.setStyle)(a,"visibility",b?null:"hidden"),!b)return;let y=f.includes("top");return function(a,b,c,f){let h;void 0===f&&(f={});let{ancestorScroll:i=!0,ancestorResize:j=!0,elementResize:k="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:m=!1}=f,n=X(a),o=i||j?[...n?U(n):[],...U(b)]:[];o.forEach(a=>{i&&a.addEventListener("scroll",c,{passive:!0}),j&&a.addEventListener("resize",c)});let p=n&&l?function(a,b){let c,f=null,h=D(a);function i(){var a;clearTimeout(c),null==(a=f)||a.disconnect(),f=null}return!function j(k,l){void 0===k&&(k=!1),void 0===l&&(l=1),i();let m=a.getBoundingClientRect(),{left:n,top:o,width:p,height:q}=m;if(k||b(),!p||!q)return;let r={rootMargin:-g(o)+"px "+-g(h.clientWidth-(n+p))+"px "+-g(h.clientHeight-(o+q))+"px "+-g(n)+"px",threshold:e(0,d(1,l))||1},s=!0;function t(b){let d=b[0].intersectionRatio;if(d!==l){if(!s)return j();d?j(!1,d):c=setTimeout(()=>{j(!1,1e-7)},1e3)}1!==d||ai(m,a.getBoundingClientRect())||j(),s=!1}try{f=new IntersectionObserver(t,{...r,root:h.ownerDocument})}catch(a){f=new IntersectionObserver(t,r)}f.observe(a)}(!0),i}(n,c):null,q=-1,r=null;k&&(r=new ResizeObserver(a=>{let[d]=a;d&&d.target===n&&r&&(r.unobserve(b),cancelAnimationFrame(q),q=requestAnimationFrame(()=>{var a;null==(a=r)||a.observe(b)})),c()}),n&&!m&&r.observe(n),r.observe(b));let s=m?_(a):null;return m&&function b(){let d=_(a);s&&!ai(s,d)&&c(),s=d,h=requestAnimationFrame(b)}(),c(),()=>{var a;o.forEach(a=>{i&&a.removeEventListener("scroll",c),j&&a.removeEventListener("resize",c)}),null==p||p(),null==(a=r)||a.disconnect(),r=null,m&&cancelAnimationFrame(h)}}(b,a,()=>{var c,g,B;let C,D,E;(B={placement:x,middleware:[...p.middleware??[],{name:"flip",options:c={fallbackAxisSideDirection:"start",crossAxis:!1},async fn(a){var b,d,e,f,g,h,i,j;let p,x,y,{placement:z,middlewareData:B,rects:C,initialPlacement:D,platform:E,elements:F}=a,{mainAxis:G=!0,crossAxis:H=!0,fallbackPlacements:I,fallbackStrategy:J="bestFit",fallbackAxisSideDirection:K="none",flipAlignment:L=!0,...M}=k(c,a);if(null!=(b=B.arrow)&&b.alignmentOffset)return{};let N=l(z),O=q(D),P=l(D)===D,Q=await (null==E.isRTL?void 0:E.isRTL(F.floating)),R=I||(P||!L?[w(D)]:(p=w(D),[r(D),p,r(p)])),S="none"!==K;!I&&S&&R.push(...(x=m(D),y=function(a,b,c){switch(a){case"top":case"bottom":if(c)return b?t:s;return b?s:t;case"left":case"right":return b?u:v;default:return[]}}(l(D),"start"===K,Q),x&&(y=y.map(a=>a+"-"+x),L&&(y=y.concat(y.map(r)))),y));let T=[D,...R],U=await A(a,M),V=[],W=(null==(d=B.flip)?void 0:d.overflows)||[];if(G&&V.push(U[N]),H){let a,b,c,d,e=(h=z,i=C,void 0===(j=Q)&&(j=!1),a=m(h),c=o(b=n(q(h))),d="x"===b?a===(j?"end":"start")?"right":"left":"start"===a?"bottom":"top",i.reference[c]>i.floating[c]&&(d=w(d)),[d,w(d)]);V.push(U[e[0]],U[e[1]])}if(W=[...W,{placement:z,overflows:V}],!V.every(a=>a<=0)){let a=((null==(e=B.flip)?void 0:e.index)||0)+1,b=T[a];if(b&&("alignment"!==H||O===q(b)||W.every(a=>q(a.placement)!==O||a.overflows[0]>0)))return{data:{index:a,overflows:W},reset:{placement:b}};let c=null==(f=W.filter(a=>a.overflows[0]<=0).sort((a,b)=>a.overflows[1]-b.overflows[1])[0])?void 0:f.placement;if(!c)switch(J){case"bestFit":{let a=null==(g=W.filter(a=>{if(S){let b=q(a.placement);return b===O||"y"===b}return!0}).map(a=>[a.placement,a.overflows.filter(a=>a>0).reduce((a,b)=>a+b,0)]).sort((a,b)=>a[1]-b[1])[0])?void 0:g[0];a&&(c=a);break}case"initialPlacement":c=D}if(z!==c)return{reset:{placement:c}}}return{}}},(void 0===g&&(g={}),{name:"shift",options:g,async fn(a){let{x:b,y:c,placement:f}=a,{mainAxis:h=!0,crossAxis:i=!1,limiter:j={fn:a=>{let{x:b,y:c}=a;return{x:b,y:c}}},...m}=k(g,a),o={x:b,y:c},p=await A(a,m),r=q(l(f)),s=n(r),t=o[s],u=o[r];if(h){let a="y"===s?"top":"left",b="y"===s?"bottom":"right",c=t+p[a],f=t-p[b];t=e(c,d(t,f))}if(i){let a="y"===r?"top":"left",b="y"===r?"bottom":"right",c=u+p[a],f=u-p[b];u=e(c,d(u,f))}let v=j.fn({...a,[s]:t,[r]:u});return{...v,data:{x:v.x-b,y:v.y-c,enabled:{[s]:h,[r]:i}}}}})],...p},C=new Map,E={...(D={platform:ah,...B}).platform,_c:C},z(b,a,{...D,platform:E})).then(({x:b,y:c,middlewareData:d})=>{let e,g,k=!!d.flip?.index;y=f.includes(k?"bottom":"top"),a.setAttribute("data-placement",k?f.startsWith("top")?f.replace("top","bottom"):f.replace("bottom","top"):f),Object.assign(a.style,{top:`calc(${c+"px"} + ${(e=j?j+"px":`var(--${h}-y-offset, 0px)`,y?`calc(-1 * ${e})`:e)})`,left:`calc(${b+"px"} + ${(g=i?i+"px":`var(--${h}-x-offset, 0px)`,f.includes("left")?`calc(-1 * ${g})`:g)})`})})})}function bq(a){return a instanceof HTMLElement}class br{priority=0;#v=!0;#w=null;#x=null;#y=new Set;canRender(a,b){return!!b}attach(a){this.#w=a,a&&(a.textTracks.onchange=this.#z.bind(this))}addTrack(a){this.#y.add(a),this.#A(a)}removeTrack(a){a[aU.native]?.remove?.(),a[aU.native]=null,this.#y.delete(a)}changeTrack(a){let b=a?.[aU.native];b&&"showing"!==b.track.mode&&(b.track.mode="showing"),this.#x=a}setDisplay(a){this.#v=a,this.#z()}detach(){for(let a of(this.#w&&(this.#w.textTracks.onchange=null),this.#y))this.removeTrack(a);this.#y.clear(),this.#w=null,this.#x=null}#A(a){if(!this.#w)return;let b=a[aU.native]??=this.#B(a);bq(b)&&(this.#w.append(b),b.track.mode=b.default?"showing":"disabled")}#B(a){let b=document.createElement("track"),c=a.default||"showing"===a.mode,d=a.src&&"vtt"===a.type;return b.id=a.id,b.src=d?a.src:"",b.label=a.label,b.kind=a.kind,b.default=c,a.language&&(b.srclang=a.language),c&&!d&&this.#C(a,b.track),b}#C(a,b){if(!(a.src&&"vtt"===a.type||b.cues?.length))for(let c of a.cues)b.addCue(c)}#z(a){for(let b of this.#y){let c=b[aU.native];if(!c)continue;if(!this.#v){c.track.mode=c.managed?"hidden":"disabled";continue}let d="showing"===c.track.mode;d&&this.#C(b,c.track),b.setMode(d?"showing":"disabled",a)}}}class bs{#w=null;#D;#E=[];#F;#G=!1;#H=null;#I=null;constructor(a){this.#F=a;const b=a.textTracks;this.#D=b,(0,c.effect)(this.#J.bind(this)),(0,c.onDispose)(this.#K.bind(this)),new c.EventsController(b).add("add",this.#L.bind(this)).add("remove",this.#M.bind(this)).add("mode-change",this.#N.bind(this))}#J(){let{nativeControls:a}=this.#F.$state;this.#G=a(),this.#N()}add(a){this.#E.push(a),(0,c.untrack)(this.#N.bind(this))}remove(a){a.detach(),this.#E.splice(this.#E.indexOf(a),1),(0,c.untrack)(this.#N.bind(this))}attachVideo(a){requestAnimationFrame(()=>{if(this.#w=a,a)for(let b of(this.#H=new br,this.#H.attach(a),this.#D))this.#O(b);this.#N()})}#O(a){aZ(a)&&this.#H?.addTrack(a)}#P(a){aZ(a)&&this.#H?.removeTrack(a)}#L(a){this.#O(a.detail)}#M(a){this.#P(a.detail)}#N(){let a=this.#D.selected;if(this.#w&&(this.#G||a?.[aU.nativeHLS])){this.#I?.changeTrack(null),this.#H?.setDisplay(!0),this.#H?.changeTrack(a);return}if(this.#H?.setDisplay(!1),this.#H?.changeTrack(null),!a)return void this.#I?.changeTrack(null);let b=this.#E.sort((a,b)=>a.priority-b.priority).find(b=>b.canRender(a,this.#w));this.#I!==b&&(this.#I?.detach(),b?.attach(this.#w),this.#I=b??null),b?.changeTrack(a)}#K(){this.#H?.detach(),this.#H=null,this.#I?.detach(),this.#I=null}}class bt extends a8{#b=!1;#Q={};#R=null;#S=null;[aU.crossOrigin];constructor(){super()}get selected(){return this.items.find(a=>"showing"===a.mode&&aZ(a))??null}get selectedIndex(){let a=this.selected;return a?this.indexOf(a):-1}get preferredLang(){return this.#S}set preferredLang(a){this.#S=a,this.#T(a)}add(a,b){let c=a instanceof aX?a:new aX(a),d="captions"===a.kind||"subtitles"===a.kind?"captions":a.kind;return this.#Q[d]&&a.default&&delete a.default,c.addEventListener("mode-change",this.#U),this[a7.add](c,b),c[aU.crossOrigin]=this[aU.crossOrigin],this.#b&&c[aU.canLoad](),a.default&&(this.#Q[d]=c),this.#V(),this}remove(a,b){if(this.#W=a,this.items.includes(a))return a===this.#Q[a.kind]&&delete this.#Q[a.kind],a.mode="disabled",a[aU.onModeChange]=null,a.removeEventListener("mode-change",this.#U),this[a7.remove](a,b),this.#W=null,this}clear(a){for(let b of[...this.items])this.remove(b,a);return this}getByKind(a){let b=Array.isArray(a)?a:[a];return this.items.filter(a=>b.includes(a.kind))}[aU.canLoad](){if(!this.#b){for(let a of this.items)a[aU.canLoad]();this.#b=!0,this.#V()}}#V=(0,c.functionDebounce)(async()=>{if(!this.#b)return;!this.#S&&this.#R&&(this.#S=await this.#R.getLang());let a=await this.#R?.getCaptions();for(let b of[["captions","subtitles"],"chapters","descriptions","metadata"]){let d=this.getByKind(b);if(d.find(a=>"showing"===a.mode))continue;let e=this.#S?d.find(a=>a.language===this.#S):null,f=(0,c.isArray)(b)?this.#Q[b.find(a=>this.#Q[a])||""]:this.#Q[b],g=e??f,h=g&&aZ(g);g&&(!h||!1!==a)&&(g.mode="showing",h&&this.#X(g))}},300);#W=null;#U=this.#Y.bind(this);#Y(a){let b=a.detail;if(this.#R&&aZ(b)&&b!==this.#W&&this.#X(b),"showing"===b.mode){let a=aZ(b)?["captions","subtitles"]:[b.kind];for(let c of this.items)"showing"===c.mode&&c!=b&&a.includes(c.kind)&&(c.mode="disabled")}this.dispatchEvent(new c.DOMEvent("mode-change",{detail:a.detail,trigger:a}))}#X(a){"disabled"!==a.mode&&this.#T(a.language),this.#R?.setCaptions?.("showing"===a.mode)}#T(a){this.#R?.setLang?.(this.#S=a)}setStorage(a){this.#R=a}}let bu={setAuto:Symbol(0),enableAuto:Symbol(0)};class bv extends ba{#Z=!1;switch="current";get auto(){return this.#Z||this.readonly}[bu.enableAuto];[a7.onUserSelect](){this[bu.setAuto](!1)}[a7.onReset](a){this[bu.enableAuto]=void 0,this[bu.setAuto](!1,a)}autoSelect(a){this.readonly||this.#Z||!this[bu.enableAuto]||(this[bu.enableAuto]?.(a),this[bu.setAuto](!0,a))}getBySrc(a){return this.items.find(b=>b.src===a)}[bu.setAuto](a,b){this.#Z!==a&&(this.#Z=a,this.dispatchEvent(new c.DOMEvent("auto-change",{detail:a,trigger:b})))}}function bw(a,b){return[...a].sort(b?by:bx)}function bx(a,b){return a.height===b.height?(a.bitrate??0)-(b.bitrate??0):a.height-b.height}function by(a,b){return b.height===a.height?(b.bitrate??0)-(a.bitrate??0):b.height-a.height}class bz extends c.ViewController{}let bA=new Set(["Shift","Alt","Meta","Ctrl"]),bB='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]';class bC extends bz{#F;constructor(a){super(),this.#F=a}onConnect(){(0,c.effect)(this.#$.bind(this))}#$(){let{keyDisabled:a,keyTarget:b}=this.$props;if(a())return;let d="player"===b()?this.el:document,e=(0,c.signal)(!1);d===this.el?new c.EventsController(this.el).add("focusin",()=>e.set(!0)).add("focusout",a=>{this.el.contains(a.target)||e.set(!1)}):((0,c.peek)(e)||e.set(document.querySelector("[data-media-player]")===this.el),(0,c.listenEvent)(document,"focusin",a=>{let b=a.composedPath().find(a=>a instanceof Element&&"media-player"===a.localName);void 0!==b&&e.set(this.el===b)})),(0,c.effect)(()=>{e()&&new c.EventsController(d).add("keyup",this.#_.bind(this)).add("keydown",this.#aa.bind(this)).add("keydown",this.#ab.bind(this),{capture:!0})})}#_(a){let b=document.activeElement;if(!a.key||!this.$state.canSeek()||b?.matches(bB))return;let{method:d,value:e}=this.#ac(a);if(!(0,c.isString)(e)&&!(0,c.isArray)(e)){e?.onKeyUp?.({event:a,player:this.#F.player,remote:this.#F.remote}),e?.callback?.(a,this.#F.remote);return}if(d?.startsWith("seek")&&(a.preventDefault(),a.stopPropagation(),this.#ad?(this.#ae(a,"seekForward"===d),this.#ad=null):(this.#F.remote.seek(this.#af,a),this.#af=void 0)),d?.startsWith("volume")){let b=this.el.querySelector("[data-media-volume-slider]");b?.dispatchEvent(new KeyboardEvent("keyup",{key:"volumeUp"===d?"Up":"Down",shiftKey:a.shiftKey,trigger:a}))}}#aa(a){if(!a.key||bA.has(a.key))return;let b=document.activeElement;if(b?.matches(bB)||(0,c.isKeyboardClick)(a)&&b?.matches('button, [role="button"]'))return;let{method:d,value:e}=this.#ac(a),f=!a.metaKey&&/^[0-9]$/.test(a.key);if(!(0,c.isString)(e)&&!(0,c.isArray)(e)&&!f){e?.onKeyDown?.({event:a,player:this.#F.player,remote:this.#F.remote}),e?.callback?.(a,this.#F.remote);return}if(!d&&f&&!function(a){for(let b of bA)if(a[b.toLowerCase()+"Key"])return!0;return!1}(a)){a.preventDefault(),a.stopPropagation(),this.#F.remote.seek(this.$state.duration()/10*Number(a.key),a);return}if(d){switch(a.preventDefault(),a.stopPropagation(),d){case"seekForward":case"seekBackward":this.#ag(a,d,"seekForward"===d);break;case"volumeUp":case"volumeDown":let b=this.el.querySelector("[data-media-volume-slider]");if(b)b.dispatchEvent(new KeyboardEvent("keydown",{key:"volumeUp"===d?"Up":"Down",shiftKey:a.shiftKey,trigger:a}));else{let b=a.shiftKey?.1:.05;this.#F.remote.changeVolume(this.$state.volume()+("volumeUp"===d?+b:-b),a)}break;case"toggleFullscreen":this.#F.remote.toggleFullscreen("prefer-media",a);break;case"speedUp":case"slowDown":let c=this.$state.playbackRate();this.#F.remote.changePlaybackRate(Math.max(.25,Math.min(2,c+("speedUp"===d?.25:-.25))),a);break;default:this.#F.remote[d]?.(a)}this.$state.lastKeyboardAction.set({action:d,event:a})}}#ab(a){var b,c;c=b=a.target,(!ak&&c instanceof HTMLAudioElement||!ak&&b instanceof HTMLVideoElement)&&this.#ac(a).method&&a.preventDefault()}#ac(a){let b={...this.$props.keyShortcuts(),...this.#F.ariaKeys},d=Object.keys(b).find(d=>{let e=b[d],f=(0,c.isArray)(e)?e.join(" "):(0,c.isString)(e)?e:e?.keys,g=((0,c.isArray)(f)?f:f?.split(" "))?.map(a=>a.replace(/Shift\+(\d)/g,(a,b)=>bD[b-1]).replace(/Control/g,"Ctrl").split("+"));return g?.some(b=>{let c=new Set(b.filter(a=>bA.has(a)));for(let b of bA){let d=b.toLowerCase()+"Key";if(!c.has(b)&&a[d])return!1}return b.every(b=>bA.has(b)?a[b.toLowerCase()+"Key"]:a.key===b.replace("Space"," "))})});return{method:d,value:d?b[d]:null}}#af;#ah(a,b){let c=a.shiftKey?10:5;return this.#af=Math.max(0,Math.min((this.#af??this.$state.currentTime())+("seekForward"===b?+c:-c),this.$state.duration()))}#ad=null;#ae(a,b){this.#ad?.dispatchEvent(new KeyboardEvent(a.type,{key:b?"Right":"Left",shiftKey:a.shiftKey,trigger:a}))}#ag(a,b,c){this.$state.canSeek()&&(this.#ad||(this.#ad=this.el.querySelector("[data-media-time-slider]")),this.#ad?this.#ae(a,c):this.#F.remote.seeking(this.#ah(a,b),a))}}let bD=["!","@","#","$","%","^","&","*","(",")"];class bE extends c.ViewController{#ai;constructor(a){super(),this.#ai=a}onAttach(a){let{$props:b,ariaKeys:d}=a4(),e=a.getAttribute("aria-keyshortcuts");if(e){d[this.#ai]=e,ak||(0,c.onDispose)(()=>{delete d[this.#ai]});return}let f=b.keyShortcuts()[this.#ai];if(f){let b=(0,c.isArray)(f)?f.join(" "):(0,c.isString)(f)?f:f?.keys;a.setAttribute("aria-keyshortcuts",(0,c.isArray)(b)?b.join(" "):b)}}}class bF extends bz{#aj=-2;#ak=!1;#al=(0,c.signal)(!1);#am=(0,c.signal)(!1);#an=null;#ao=(0,c.signal)(!0);defaultDelay=2e3;get canIdle(){return this.#ao()}set canIdle(a){this.#ao.set(a)}get hideOnMouseLeave(){let{hideControlsOnMouseLeave:a}=this.$props;return this.#al()||a()}set hideOnMouseLeave(a){this.#al.set(a)}get showing(){return this.$state.controlsVisible()}show(a=0,b){this.#ap(),this.#ak||this.#aq(!0,a,b)}hide(a=this.defaultDelay,b){this.#ap(),this.#ak||this.#aq(!1,a,b)}pause(a){this.#ak=!0,this.#ap(),this.#aq(!0,0,a)}resume(a){this.#ak=!1,this.$state.paused()||this.#aq(!1,this.defaultDelay,a)}onConnect(){(0,c.effect)(this.#ar.bind(this))}#ar(){let{viewType:a}=this.$state;if(!this.el||!this.#ao())return;if("audio"===a())return void this.show();(0,c.effect)(this.#as.bind(this)),(0,c.effect)(this.#at.bind(this));let b=this.#au.bind(this),d=this.#av.bind(this),e=this.#aw.bind(this);new c.EventsController(this.el).add("can-play",a=>this.show(0,a)).add("play",b).add("pause",d).add("end",e).add("auto-play-fail",d)}#as(){if(!this.el)return;let{started:a,pointer:b,paused:d}=this.$state;if(!a()||"fine"!==b())return;let e=new c.EventsController(this.el),f=this.hideOnMouseLeave;f&&this.#am()||(0,c.effect)(()=>{d()||e.add("pointermove",this.#ax.bind(this))}),f&&e.add("mouseenter",this.#ay.bind(this)).add("mouseleave",this.#az.bind(this))}#at(){let{paused:a,started:b,autoPlayError:d}=this.$state;if(a()||d()&&!b())return;let e=this.#ax.bind(this);(0,c.effect)(()=>{if(!this.el)return;let a=this.$state.pointer(),b=new c.EventsController(this.el);for(let c of["coarse"===a?"touchend":"pointerup","keydown"])b.add(c,e,{passive:!1})})}#au(a){a.triggers.hasType("ended")||(this.show(0,a),this.hide(void 0,a))}#av(a){this.show(0,a)}#aw(a){let{loop:b}=this.$state;b()&&this.hide(0,a)}#ay(a){this.#am.set(!1),this.show(0,a),this.hide(void 0,a)}#az(a){this.#am.set(!0),this.hide(0,a)}#ap(){window.clearTimeout(this.#aj),this.#aj=-1}#ax(a){a.MEDIA_GESTURE||this.#ak||bn(a)||((0,c.isKeyboardEvent)(a)&&("Escape"===a.key?(this.el?.focus(),this.#an=null):this.#an&&(a.preventDefault(),requestAnimationFrame(()=>{this.#an?.focus(),this.#an=null}))),this.show(0,a),this.hide(this.defaultDelay,a))}#aq(a,b,c){0===b?this.#z(a,c):this.#aj=window.setTimeout(()=>{this.scope&&this.#z(a&&!this.#ak,c)},b)}#z(a,b){this.$state.controlsVisible()!==a&&(this.$state.controlsVisible.set(a),!a&&document.activeElement&&this.el?.contains(document.activeElement)&&(this.#an=document.activeElement,requestAnimationFrame(()=>{this.el?.focus({preventScroll:!0})})),this.dispatch("controls-change",{detail:a,trigger:b}))}}let bG=c.fscreen.fullscreenEnabled;class bH extends c.ViewController{#aA=!1;#aB=!1;get active(){return this.#aB}get supported(){return bG}onConnect(){new c.EventsController(c.fscreen).add("fullscreenchange",this.#z.bind(this)).add("fullscreenerror",this.#aC.bind(this)),(0,c.onDispose)(this.#aD.bind(this))}async #aD(){bG&&await this.exit()}#z(a){let b=bI(this.el);b!==this.#aB&&(b||(this.#aA=!1),this.#aB=b,this.dispatch("fullscreen-change",{detail:b,trigger:a}))}#aC(a){this.#aA&&(this.dispatch("fullscreen-error",{detail:null,trigger:a}),this.#aA=!1)}async enter(){try{if(this.#aA=!0,!this.el||bI(this.el))return;return bJ(),c.fscreen.requestFullscreen(this.el)}catch(a){throw this.#aA=!1,a}}async exit(){if(this.el&&bI(this.el))return bJ(),c.fscreen.exitFullscreen()}}function bI(a){if(c.fscreen.fullscreenElement===a)return!0;try{return a.matches(c.fscreen.fullscreenPseudoClass)}catch(a){return!1}}function bJ(){if(!bG)throw Error("[vidstack] no fullscreen API")}class bK extends c.ViewController{#aE=(0,c.signal)(this.#aF());#aG=(0,c.signal)(!1);#aH;get type(){return this.#aE()}get locked(){return this.#aG()}get portrait(){return this.#aE().startsWith("portrait")}get landscape(){return this.#aE().startsWith("landscape")}static supported=aq();get supported(){return bK.supported}onConnect(){if(this.supported)(0,c.listenEvent)(screen.orientation,"change",this.#aI.bind(this));else{let a=window.matchMedia("(orientation: landscape)");a.onchange=this.#aI.bind(this),(0,c.onDispose)(()=>a.onchange=null)}(0,c.onDispose)(this.#aD.bind(this))}async #aD(){this.supported&&this.#aG()&&await this.unlock()}#aI(a){this.#aE.set(this.#aF()),this.dispatch("orientation-change",{detail:{orientation:(0,c.peek)(this.#aE),lock:this.#aH},trigger:a})}async lock(a){(0,c.peek)(this.#aG)||this.#aH===a||(this.#aJ(),await screen.orientation.lock(a),this.#aG.set(!0),this.#aH=a)}async unlock(){(0,c.peek)(this.#aG)&&(this.#aJ(),this.#aH=void 0,await screen.orientation.unlock(),this.#aG.set(!1))}#aJ(){if(!this.supported)throw Error("[vidstack] no orientation API")}#aF(){return ak?"portrait-primary":this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}}class bL{name="audio";target;canPlay(a){return!!aJ(a)&&(ak||!(0,c.isString)(a.src)||"?"===a.type||ar(this.target,a.type))}mediaType(){return"audio"}async load(b){if(ak)throw Error("[vidstack] can not load audio provider server-side");return new(await a.A(33578)).AudioProvider(this.target,b)}}class bM{name="video";target;canPlay(a){return!!aK(a)&&(ak||!(0,c.isString)(a.src)||"?"===a.type||as(this.target,a.type))}mediaType(){return"video"}async load(a){if(ak)throw Error("[vidstack] can not load video provider server-side");return new(await Promise.resolve().then(function(){return b7})).VideoProvider(this.target,a)}}class bN extends bM{static supported=ax();name="hls";canPlay(a){return bN.supported&&aL(a)}async load(b){if(ak)throw Error("[vidstack] can not load hls provider server-side");return new(await a.A(73161)).HLSProvider(this.target,b)}}let bO=null,bP=[],bQ=[];function bR(){return bO??=new AudioContext}function bS(){bO&&0===bP.length&&0===bQ.length&&bO.close().then(()=>{bO=null})}class bT{#F;#z;#aK=null;#aL=null;get currentGain(){return this.#aK?.gain?.value??null}get supported(){return!0}constructor(a,b){this.#F=a,this.#z=b}setGain(a){let b=this.currentGain;if(a!==this.currentGain){var c,d;let e;if(1===a&&1!==b)return void this.removeGain();if(!this.#aK){let a,b;this.#aK=((b=(a=bR()).createGain()).connect(a.destination),bP.push(b),b),this.#aL&&this.#aL.connect(this.#aK)}this.#aL||(this.#aL=(c=this.#F,d=this.#aK,e=bR().createMediaElementSource(c),d&&e.connect(d),bQ.push(e),e)),this.#aK.gain.value=a,this.#z(a)}}removeGain(){this.#aK&&(this.#aL&&this.#aL.connect(bR().destination),this.#aM(),this.#z(null))}destroy(){this.#aN(),this.#aM()}#aN(){if(this.#aL)try{var a;let b;a=this.#aL,b=bQ.indexOf(a),-1!==b&&(bQ.splice(b,1),a.disconnect(),bS())}catch(a){}finally{this.#aL=null}}#aM(){if(this.#aK)try{var a;let b;a=this.#aK,b=bP.indexOf(a),-1!==b&&(bP.splice(b,1),a.disconnect(),bS())}catch(a){}finally{this.#aK=null}}}let bU=["focus","blur","visibilitychange","pageshow","pagehide"];class bV{#aO=(0,c.signal)(bW());#aP=(0,c.signal)(ak?"visible":document.visibilityState);#aQ;connect(){let a=new c.EventsController(window),b=this.#aR.bind(this);for(let c of bU)a.add(c,b);ap&&a.add("beforeunload",a=>{this.#aQ=setTimeout(()=>{a.defaultPrevented||a.returnValue.length>0||(this.#aO.set("hidden"),this.#aP.set("hidden"))},0)})}get pageState(){return this.#aO()}get visibility(){return this.#aP()}#aR(a){ap&&window.clearTimeout(this.#aQ),("blur"!==a.type||"active"===this.#aO())&&(this.#aO.set(bW(a)),this.#aP.set("hidden"==document.visibilityState?"hidden":"visible"))}}function bW(a){return ak||a?.type==="blur"||"hidden"===document.visibilityState?"hidden":document.hasFocus()?"active":"passive"}class bX{#aS;#aT;constructor(a){this.#aT=a}start(){(0,c.isUndefined)(this.#aS)&&this.#aU()}stop(){(0,c.isNumber)(this.#aS)&&window.cancelAnimationFrame(this.#aS),this.#aS=void 0}#aU(){this.#aS=window.requestAnimationFrame(()=>{(0,c.isUndefined)(this.#aS)||(this.#aT(),this.#aU())})}}class bY{#aV;#aW;#aX=!1;#aY=!1;#aZ=!1;#a$=new bX(this.#a_.bind(this));#a0=new bV;#a1;get #F(){return this.#aV.media}constructor(a,b){this.#aV=a,this.#aW=b,this.#a1=new c.EventsController(a.media),this.#a2(),this.#a0.connect(),(0,c.effect)(this.#a3.bind(this)),(0,c.onDispose)(this.#a4.bind(this))}#a4(){this.#aY=!1,this.#aZ=!1,this.#a$.stop(),this.#a1.abort(),this.#a5?.clear()}#a6=0;#a7=-1;#a_(){let a=this.#F.currentTime;ap&&a-this.#a7<.35||this.#a6===a||(this.#a8(a),this.#a6=a)}#a2(){this.#a9("loadstart",this.#ba),this.#a9("abort",this.#bb),this.#a9("emptied",this.#bc),this.#a9("error",this.#aC),this.#a9("volumechange",this.#bd)}#be(){this.#aY||(this.#a9("loadeddata",this.#bf),this.#a9("loadedmetadata",this.#bg),this.#a9("canplay",this.#bh),this.#a9("canplaythrough",this.#bi),this.#a9("durationchange",this.#bj),this.#a9("play",this.#au),this.#a9("progress",this.#bk),this.#a9("stalled",this.#bl),this.#a9("suspend",this.#bm),this.#a9("ratechange",this.#bn),this.#aY=!0)}#bo(){this.#aZ||(this.#a9("pause",this.#av),this.#a9("playing",this.#bp),this.#a9("seeked",this.#bq),this.#a9("seeking",this.#br),this.#a9("ended",this.#bs),this.#a9("waiting",this.#bt),this.#aZ=!0)}#a5=void 0;#bu=void 0;#a9(a,b){this.#a1.add(a,b.bind(this))}#bv(a){}#a8(a,b){let c=Math.min(a,this.#aW.$state.seekableEnd());this.#aW.notify("time-change",c,b)}#ba(a){3===this.#F.networkState?this.#bb(a):(this.#be(),this.#aW.notify("load-start",void 0,a))}#bb(a){this.#aW.notify("abort",void 0,a)}#bc(){this.#aW.notify("emptied",void 0,event)}#bf(a){this.#aW.notify("loaded-data",void 0,a)}#bg(a){this.#a6=0,this.#a7=-1,this.#bo(),this.#aW.notify("loaded-metadata",void 0,a),(am||ap&&aL(this.#aW.$state.source()))&&this.#aW.delegate.ready(this.#bw(),a)}#bw(){return{provider:(0,c.peek)(this.#aW.$provider),duration:this.#F.duration,buffered:this.#F.buffered,seekable:this.#F.seekable}}#au(a){this.#aW.$state.canPlay&&this.#aW.notify("play",void 0,a)}#av(a){(1!==this.#F.readyState||this.#aX)&&(this.#aX=!1,this.#a$.stop(),this.#aW.notify("pause",void 0,a))}#bh(a){this.#aW.delegate.ready(this.#bw(),a)}#bi(a){this.#aW.$state.started()||this.#aW.notify("can-play-through",this.#bw(),a)}#bp(a){this.#F.paused||(this.#aX=!1,this.#aW.notify("playing",void 0,a),this.#a$.start())}#bl(a){this.#aW.notify("stalled",void 0,a),this.#F.readyState<3&&(this.#aX=!0,this.#aW.notify("waiting",void 0,a))}#bt(a){this.#F.readyState<3&&(this.#aX=!0,this.#aW.notify("waiting",void 0,a))}#bs(a){this.#a$.stop(),this.#a8(this.#F.duration,a),this.#aW.notify("end",void 0,a),this.#aW.$state.loop()&&(0,c.isNil)(this.#F.controls)&&(this.#F.controls=!1)}#a3(){let a=this.#aW.$state.paused(),b="hidden"===this.#a0.visibility;(a||b)&&(0,c.listenEvent)(this.#F,"timeupdate",this.#bx.bind(this))}#bx(a){this.#a8(this.#F.currentTime,a)}#bj(a){this.#aW.$state.ended()&&this.#a8(this.#F.duration,a),this.#aW.notify("duration-change",this.#F.duration,a)}#bd(a){let b={volume:this.#F.volume,muted:this.#F.muted};this.#aW.notify("volume-change",b,a)}#bq(a){this.#a7=this.#F.currentTime,this.#a8(this.#F.currentTime,a),this.#aW.notify("seeked",this.#F.currentTime,a),Math.trunc(this.#F.currentTime)===Math.trunc(this.#F.duration)&&bd(this.#F.duration)>bd(this.#F.currentTime)&&(this.#a8(this.#F.duration,a),this.#F.ended||this.#aW.player.dispatch(new c.DOMEvent("media-play-request",{trigger:a})))}#br(a){this.#aW.notify("seeking",this.#F.currentTime,a)}#bk(a){let b={buffered:this.#F.buffered,seekable:this.#F.seekable};this.#aW.notify("progress",b,a)}#bm(a){this.#aW.notify("suspend",void 0,a)}#bn(a){this.#aW.notify("rate-change",this.#F.playbackRate,a)}#aC(a){let b=this.#F.error;if(!b)return;let c={message:b.message,code:b.code,mediaError:b};this.#aW.notify("error",c,a)}}class bZ{#aV;#aW;get #by(){return this.#aV.media.audioTracks}constructor(a,b){this.#aV=a,this.#aW=b,this.#by.onaddtrack=this.#bz.bind(this),this.#by.onremovetrack=this.#bA.bind(this),this.#by.onchange=this.#bB.bind(this),(0,c.listenEvent)(this.#aW.audioTracks,"change",this.#bC.bind(this))}#bz(a){let b=a.track;if(""===b.label)return;let c={id:b.id.toString()||`native-audio-${this.#aW.audioTracks.length}`,label:b.label,language:b.language,kind:b.kind,selected:!1};this.#aW.audioTracks[a7.add](c,a),b.enabled&&(c.selected=!0)}#bA(a){let b=this.#aW.audioTracks.getById(a.track.id);b&&this.#aW.audioTracks[a7.remove](b,a)}#bB(a){let b=this.#bD();if(!b)return;let c=this.#aW.audioTracks.getById(b.id);c&&this.#aW.audioTracks[a7.select](c,!0,a)}#bD(){return Array.from(this.#by).find(a=>a.enabled)}#bC(a){let{current:b}=a.detail;if(!b)return;let c=this.#by.getTrackById(b.id);if(c){let a=this.#bD();a&&(a.enabled=!1),c.enabled=!0}}}class b${constructor(a,b){this.media=a,this.ctx=b,this.audioGain=new bT(a,a=>{this.ctx.notify("audio-gain-change",a)})}scope=(0,c.createScope)();currentSrc=null;audioGain;setup(){new bY(this,this.ctx),"audioTracks"in this.media&&new bZ(this,this.ctx),(0,c.onDispose)(()=>{for(let a of(this.audioGain.destroy(),this.media.srcObject=null,this.media.removeAttribute("src"),this.media.querySelectorAll("source")))a.remove();this.media.load()})}get type(){return""}setPlaybackRate(a){this.media.playbackRate=a}async play(){return this.media.play()}async pause(){return this.media.pause()}setMuted(a){this.media.muted=a}setVolume(a){this.media.volume=a}setCurrentTime(a){this.media.currentTime=a}setPlaysInline(a){(0,c.setAttribute)(this.media,"playsinline",a)}async loadSource({src:a,type:b},d){(this.media.preload=d||"",!ak&&void 0!==window.MediaStream&&a instanceof window.MediaStream)?(this.removeSource(),this.media.srcObject=a):(this.media.srcObject=null,(0,c.isString)(a)?"?"!==b?this.appendSource({src:a,type:b}):(this.removeSource(),this.media.src=this.#bE(a)):(this.removeSource(),this.media.src=window.URL.createObjectURL(a))),this.media.load(),this.currentSrc={src:a,type:b}}appendSource(a,b){let d=this.media.querySelector("source[data-vds]"),e=d??document.createElement("source");(0,c.setAttribute)(e,"src",this.#bE(a.src)),(0,c.setAttribute)(e,"type","?"!==a.type?a.type:b),(0,c.setAttribute)(e,"data-vds",""),d||this.media.append(e)}removeSource(){this.media.querySelector("source[data-vds]")?.remove()}#bE(a){let{clipStartTime:b,clipEndTime:c}=this.ctx.$state,d=b(),e=c();return d>0&&e>0?`${a}#t=${d},${e}`:d>0?`${a}#t=${d}`:e>0?`${a}#t=0,${e}`:a}}class b_{#F;#aW;#aO;#bF=(0,c.signal)(!1);get supported(){return this.#bF()}constructor(a,b){this.#F=a,this.#aW=b,this.#bG()}#bG(){!ak&&this.#F?.remote&&this.canPrompt&&(this.#F.remote.watchAvailability(a=>{this.#bF.set(a)}).catch(()=>{this.#bF.set(!1)}),(0,c.effect)(this.#bH.bind(this)))}#bH(){if(!this.#bF())return;let a=this.#bI.bind(this);a(),(0,c.listenEvent)(this.#F,"playing",a);let b=new c.EventsController(this.#F.remote);for(let c of["connecting","connect","disconnect"])b.add(c,a)}async prompt(){if(!this.supported)throw Error("Not supported on this platform.");return"airplay"===this.type&&this.#F.webkitShowPlaybackTargetPicker?this.#F.webkitShowPlaybackTargetPicker():this.#F.remote.prompt()}#bI(a){let b=this.#F.remote.state;if(b===this.#aO)return;let c={type:this.type,state:b};this.#aW.notify("remote-playback-change",c,a),this.#aO=b}}class b0 extends b_{type="airplay";get canPrompt(){return"WebKitPlaybackTargetAvailabilityEvent"in window}}class b1{#w;#aW;constructor(a,b){this.#w=a,this.#aW=b,a.textTracks.onaddtrack=this.#L.bind(this),(0,c.onDispose)(this.#a4.bind(this))}#L(a){var b,c;let d=a.track;if(!d||(b=this.#w,c=d,Array.from(b.children).find(a=>a.track===c)))return;let e=new aX({id:d.id,kind:d.kind,label:d.label??"",language:d.language,type:"vtt"});e[aU.native]={track:d},e[aU.readyState]=2,e[aU.nativeHLS]=!0;let f=0,g=a=>{if(d.cues)for(let b=f;b<d.cues.length;b++)e.addCue(d.cues[b],a),f++};g(a),d.oncuechange=g,this.#aW.textTracks.add(e,a),e.setMode(d.mode,a)}#a4(){for(let a of(this.#w.textTracks.onaddtrack=null,this.#aW.textTracks)){let b=a[aU.native]?.track;b?.oncuechange&&(b.oncuechange=null)}}}class b2{#w;#F;constructor(a,b){this.#w=a,this.#F=b,new c.EventsController(a).add("enterpictureinpicture",this.#bJ.bind(this)).add("leavepictureinpicture",this.#bK.bind(this))}get active(){return document.pictureInPictureElement===this.#w}get supported(){return au(this.#w)}async enter(){return this.#w.requestPictureInPicture()}exit(){return document.exitPictureInPicture()}#bJ(a){this.#z(!0,a)}#bK(a){this.#z(!1,a)}#z=(a,b)=>{this.#F.notify("picture-in-picture-change",a,b)}}class b3{#w;#F;#d="inline";get mode(){return this.#d}constructor(a,b){this.#w=a,this.#F=b,(0,c.listenEvent)(a,"webkitpresentationmodechanged",this.#bL.bind(this))}get supported(){return av(this.#w)}async setPresentationMode(a){this.#d!==a&&this.#w.webkitSetPresentationMode(a)}#bL(a){let b=this.#d;this.#d=this.#w.webkitPresentationMode,this.#F.player?.dispatch(new c.DOMEvent("video-presentation-change",{detail:this.#d,trigger:a})),["fullscreen","picture-in-picture"].forEach(c=>{(this.#d===c||b===c)&&this.#F.notify(`${c}-change`,this.#d===c,a)})}}class b4{#bM;get active(){return"fullscreen"===this.#bM.mode}get supported(){return this.#bM.supported}constructor(a){this.#bM=a}async enter(){this.#bM.setPresentationMode("fullscreen")}async exit(){this.#bM.setPresentationMode("inline")}}class b5{#bM;get active(){return"picture-in-picture"===this.#bM.mode}get supported(){return this.#bM.supported}constructor(a){this.#bM=a}async enter(){this.#bM.setPresentationMode("picture-in-picture")}async exit(){this.#bM.setPresentationMode("inline")}}class b6 extends b${$$PROVIDER_TYPE="VIDEO";get type(){return"video"}airPlay;fullscreen;pictureInPicture;constructor(a,b){super(a,b),(0,c.scoped)(()=>{if(this.airPlay=new b0(a,b),av(a)){let c=new b3(a,b);this.fullscreen=new b4(c),this.pictureInPicture=new b5(c)}else au(a)&&(this.pictureInPicture=new b2(a,b))},this.scope)}setup(){super.setup(),at(this.video)&&new b1(this.video,this.ctx),this.ctx.textRenderers.attachVideo(this.video),(0,c.onDispose)(()=>{this.ctx.textRenderers.attachVideo(null)}),"video"===this.type&&this.ctx.notify("provider-setup",this)}get video(){return this.media}}var b7=Object.freeze({__proto__:null,VideoProvider:b6});function b8(a){try{return new Intl.DisplayNames(navigator.languages,{type:"language"}).of(a)??null}catch(a){return null}}class b9{#w;#aW;#bN=null;#bO=new Set;#bP=null;config={};get instance(){return this.#bN}constructor(a,b){this.#w=a,this.#aW=b}setup(a){this.#bN=a().create();let b=this.#bQ.bind(this);for(let c of Object.values(a.events))this.#bN.on(c,b);for(let b of(this.#bN.on(a.events.ERROR,this.#aC.bind(this)),this.#bO))b(this.#bN);this.#aW.player.dispatch("dash-instance",{detail:this.#bN}),this.#bN.initialize(this.#w,void 0,!1),this.#bN.updateSettings({streaming:{text:{defaultEnabled:!1,dispatchForManualRendering:!0},buffer:{fastSwitchEnabled:!0}},...this.config}),this.#bN.on(a.events.FRAGMENT_LOADING_STARTED,this.#bR.bind(this)),this.#bN.on(a.events.FRAGMENT_LOADING_COMPLETED,this.#bS.bind(this)),this.#bN.on(a.events.MANIFEST_LOADED,this.#bT.bind(this)),this.#bN.on(a.events.QUALITY_CHANGE_RENDERED,this.#bU.bind(this)),this.#bN.on(a.events.TEXT_TRACKS_ADDED,this.#bV.bind(this)),this.#bN.on(a.events.TRACK_CHANGE_RENDERED,this.#bW.bind(this)),this.#aW.qualities[bu.enableAuto]=this.#bX.bind(this),(0,c.listenEvent)(this.#aW.qualities,"change",this.#bY.bind(this)),(0,c.listenEvent)(this.#aW.audioTracks,"change",this.#bZ.bind(this)),this.#bP=(0,c.effect)(this.#b$.bind(this))}#b_(a){let b;return new c.DOMEvent((b=a.type,`dash-${(0,c.camelToKebabCase)(b)}`),{detail:a})}#b$(){if(!this.#aW.$state.live())return;let a=new bX(this.#b0.bind(this));return a.start(),a.stop.bind(a)}#b0(){if(!this.#bN)return;let a=this.#bN.duration()-this.#bN.time();this.#aW.$state.liveSyncPosition.set(isNaN(a)?1/0:a)}#bQ(a){this.#aW.player?.dispatch(this.#b_(a))}#b1=null;#b2={};#b3(a){let b=this.#b1?.[aU.native],c=(b?.track).cues;if(!b||!c)return;let d=this.#b1.id,e=this.#b2[d]??0,f=this.#b_(a);for(let a=e;a<c.length;a++){let b=c[a];b.positionAlign||(b.positionAlign="auto"),this.#b1.addCue(b,f)}this.#b2[d]=c.length}#bV(a){if(!this.#bN)return;let b=a.tracks,c=[...this.#w.textTracks].filter(a=>"manualMode"in a),d=this.#b_(a);for(let a=0;a<c.length;a++){let e=b[a],f=c[a],g=new aX({id:`dash-${e.kind}-${a}`,label:e?.label??e.labels.find(a=>a.text)?.text??(e?.lang&&b8(e.lang))??e?.lang??void 0,language:e.lang??void 0,kind:e.kind,default:e.defaultTrack});g[aU.native]={managed:!0,track:f},g[aU.readyState]=2,g[aU.onModeChange]=()=>{this.#bN&&("showing"===g.mode?(this.#bN.setTextTrack(a),this.#b1=g):(this.#bN.setTextTrack(-1),this.#b1=null))},this.#aW.textTracks.add(g,d)}}#bW(a){let{mediaType:b,newMediaInfo:c}=a;if("audio"===b){let b=this.#aW.audioTracks.getById(`dash-audio-${c.index}`);if(b){let c=this.#b_(a);this.#aW.audioTracks[a7.select](b,!0,c)}}}#bU(a){if("video"!==a.mediaType)return;let b=this.#aW.qualities[a.newQuality];if(b){let c=this.#b_(a);this.#aW.qualities[a7.select](b,!0,c)}}#bT(a){if(this.#aW.$state.canPlay()||!this.#bN)return;let{type:b,mediaPresentationDuration:d}=a.data,e=this.#b_(a);this.#aW.notify("stream-type-change","static"!==b?"live":"on-demand",e),this.#aW.notify("duration-change",d,e),this.#aW.qualities[bu.setAuto](!0,e);let f=this.#bN.getVideoElement(),g=this.#bN.getTracksForTypeFromManifest("video",a.data),h=[...new Set(g.map(a=>a.mimeType))].find(a=>a&&as(f,a)),i=g.filter(a=>h===a.mimeType)[0],j=this.#bN.getTracksForTypeFromManifest("audio",a.data),k=[...new Set(j.map(a=>a.mimeType))].find(a=>a&&ar(f,a));if(j=j.filter(a=>k===a.mimeType),i.bitrateList.forEach((a,b)=>{let c={id:a.id?.toString()??`dash-bitrate-${b}`,width:a.width??0,height:a.height??0,bitrate:a.bandwidth??0,codec:i.codec,index:b};this.#aW.qualities[a7.add](c,e)}),(0,c.isNumber)(i.index)){let a=this.#aW.qualities[i.index];a&&this.#aW.qualities[a7.select](a,!0,e)}j.forEach((a,b)=>{let c=a.labels.find(a=>navigator.languages.some(b=>a.lang&&b.toLowerCase().startsWith(a.lang.toLowerCase())))||a.labels[0],d={id:`dash-audio-${a?.index}`,label:c?.text??(a.lang&&b8(a.lang))??a.lang??"",language:a.lang??"",kind:"main",mimeType:a.mimeType,codec:a.codec,index:b};this.#aW.audioTracks[a7.add](d,e)}),f.dispatchEvent(new c.DOMEvent("canplay",{trigger:e}))}#aC(a){let{type:b,error:c}=a;27===c.code?this.#b4(c):this.#b5(c)}#bR(){this.#b6>=0&&this.#b7()}#bS(a){"text"===a.mediaType&&requestAnimationFrame(this.#b3.bind(this,a))}#b6=-1;#b4(a){this.#b7(),this.#bN?.play(),this.#b6=window.setTimeout(()=>{this.#b6=-1,this.#b5(a)},5e3)}#b7(){clearTimeout(this.#b6),this.#b6=-1}#b5(a){this.#aW.notify("error",{message:a.message??"",code:1,error:a})}#bX(){this.#b8("video",!0);let{qualities:a}=this.#aW;this.#bN?.setQualityFor("video",a.selectedIndex,!0)}#b8(a,b){this.#bN?.updateSettings({streaming:{abr:{autoSwitchBitrate:{[a]:b}}}})}#bY(){let{qualities:a}=this.#aW;this.#bN&&!a.auto&&a.selected&&(this.#b8("video",!1),this.#bN.setQualityFor("video",a.selectedIndex,"current"===a.switch),ao&&(this.#w.currentTime=this.#w.currentTime))}#bZ(){if(!this.#bN)return;let{audioTracks:a}=this.#aW,b=this.#bN.getTracksFor("audio").find(b=>a.selected&&a.selected.id===`dash-audio-${b.index}`);b&&this.#bN.setCurrentTrack(b)}#b9(){this.#b7(),this.#b1=null,this.#b2={}}onInstance(a){return this.#bO.add(a),()=>this.#bO.delete(a)}loadSource(a){this.#b9(),(0,c.isString)(a.src)&&this.#bN?.attachSource(a.src)}destroy(){this.#b9(),this.#bN?.destroy(),this.#bN=null,this.#bP?.(),this.#bP=null}}function ca(a){return a instanceof Error?a:Error("string"==typeof a?a:JSON.stringify(a))}function cb(a,b){if(!a)throw Error("Assertion failed.")}class cc{#ca;#aW;#aT;constructor(a,b,c){this.#ca=a,this.#aW=b,this.#aT=c,this.#cb()}async #cb(){let a={onLoadStart:this.#ba.bind(this),onLoaded:this.#cc.bind(this),onLoadError:this.#cd.bind(this)},b=await ce(this.#ca,a);return((0,c.isUndefined)(b)&&!(0,c.isString)(this.#ca)&&(b=await cd(this.#ca,a)),b)?window.dashjs.supportsMediaSource()?b:(this.#aW.player.dispatch(new c.DOMEvent("dash-unsupported")),this.#aW.notify("error",{message:"[vidstack] `dash.js` is not supported in this environment",code:4}),null):null}#ba(){this.#aW.player.dispatch(new c.DOMEvent("dash-lib-load-start"))}#cc(a){this.#aW.player.dispatch(new c.DOMEvent("dash-lib-loaded",{detail:a})),this.#aT(a)}#cd(a){let b=ca(a);this.#aW.player.dispatch(new c.DOMEvent("dash-lib-load-error",{detail:b})),this.#aW.notify("error",{message:b.message,code:4,error:b})}}async function cd(a,b={}){if(!(0,c.isUndefined)(a)){var d;if(b.onLoadStart?.(),(d=a)&&d.prototype&&d.prototype!==Function)return b.onLoaded?.(a),a;if(cf(a)){let c=a.MediaPlayer;return b.onLoaded?.(c),c}try{let c=(await a())?.default;if(cf(c))return b.onLoaded?.(c.MediaPlayer),c.MediaPlayer;if(c)b.onLoaded?.(c);else throw Error("");return c}catch(a){b.onLoadError?.(a)}}}async function ce(a,b={}){if((0,c.isString)(a)){b.onLoadStart?.();try{if(await aR(a),!(0,c.isFunction)(window.dashjs.MediaPlayer))throw Error("");let d=window.dashjs.MediaPlayer;return b.onLoaded?.(d),d}catch(a){b.onLoadError?.(a)}}}function cf(a){return a&&"MediaPlayer"in a}class cg extends b6{$$PROVIDER_TYPE="DASH";#ce=null;#cf=new b9(this.video,this.ctx);get ctor(){return this.#ce}get instance(){return this.#cf.instance}static supported=ax();get type(){return"dash"}get canLiveSync(){return!0}#cg="https://cdn.jsdelivr.net/npm/dashjs@4.7.4/dist/dash.all.min.js";get config(){return this.#cf.config}set config(a){this.#cf.config=a}get library(){return this.#cg}set library(a){this.#cg=a}preconnect(){(0,c.isString)(this.#cg)&&aP(this.#cg)}setup(){super.setup(),new cc(this.#cg,this.ctx,a=>{this.#ce=a,this.#cf.setup(a),this.ctx.notify("provider-setup",this);let b=(0,c.peek)(this.ctx.$state.source);b&&this.loadSource(b)})}async loadSource(a,b){(0,c.isString)(a.src)?(this.media.preload=b||"",this.appendSource(a,"application/x-mpegurl"),this.#cf.loadSource(a),this.currentSrc=a):this.removeSource()}onInstance(a){let b=this.#cf.instance;return b&&a(b),this.#cf.onInstance(a)}destroy(){this.#cf.destroy()}}var ch=Object.freeze({__proto__:null,DASHProvider:cg});class ci extends bM{static supported=ax();name="dash";canPlay(a){return ci.supported&&aM(a)}async load(a){if(ak)throw Error("[vidstack] can not load dash provider server-side");return new(await Promise.resolve().then(function(){return ch})).DASHProvider(this.target,a)}}class cj{name="vimeo";target;preconnect(){for(let a of["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"])aP(a)}canPlay(a){return(0,c.isString)(a.src)&&"video/vimeo"===a.type}mediaType(){return"video"}async load(b){if(ak)throw Error("[vidstack] can not load vimeo provider server-side");return new(await a.A(48495)).VimeoProvider(this.target,b)}async loadPoster(b,d,e){let{resolveVimeoVideoId:f,getVimeoVideoInfo:g}=await a.A(88520);if(!(0,c.isString)(b.src))return null;let{videoId:h,hash:i}=f(b.src);return h?g(h,e,i).then(a=>a?a.poster:null):null}}class ck{name="youtube";target;preconnect(){for(let a of["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"])aP(a)}canPlay(a){return(0,c.isString)(a.src)&&"video/youtube"===a.type}mediaType(){return"video"}async load(b){if(ak)throw Error("[vidstack] can not load youtube provider server-side");return new(await a.A(62446)).YouTubeProvider(this.target,b)}async loadPoster(b,d,e){let{findYouTubePoster:f,resolveYouTubeVideoId:g}=await a.A(81684),h=(0,c.isString)(b.src)&&g(b.src);return h?f(h,e):null}}function cl(a,b){let c=String(a),d=c.length;if(d<b){let c="0".repeat(b-d);return`${c}${a}`}return c}function cm(a){let b=Math.trunc(a/3600),c=Math.trunc(a%3600/60);return{hours:b,minutes:c,seconds:Math.trunc(a%60),fraction:Number((a-Math.trunc(a)).toPrecision(3))}}function cn(a,{padHrs:b=null,padMins:d=null,showHrs:e=!1,showMs:f=!1}={}){let{hours:g,minutes:h,seconds:i,fraction:j}=cm(a),k=b?cl(g,2):g,l=d||(0,c.isNull)(d)&&a>=3600?cl(h,2):h,m=cl(i,2),n=f&&j>0?`.${String(j).replace(/^0?\./,"")}`:"",o=`${l}:${m}${n}`;return g>0||e?`${k}:${o}`:o}function co(a){let b=[],{hours:c,minutes:d,seconds:e}=cm(a);return c>0&&b.push(`${c} hour`),d>0&&b.push(`${d} min`),(e>0||0===b.length)&&b.push(`${e} sec`),b.join(" ")}let cp=Symbol(0),cq=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"],cr={artist:"",artwork:null,autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:{togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},storage:null};class cs extends bz{#aE;#aT;constructor(a,b){super(),this.#aE=a,this.#aT=b}async onAttach(a){if(ak)return;let b=this.$props[this.#aE]();if("eager"===b)requestAnimationFrame(this.#aT);else if("idle"===b)(0,c.waitIdlePeriod)(this.#aT);else if("visible"===b){let b,d=new IntersectionObserver(a=>{this.scope&&a[0].isIntersecting&&(b?.(),b=void 0,this.#aT())});d.observe(a),b=(0,c.onDispose)(()=>d.disconnect())}}}class ct{#ch;#F;constructor(a,b){this.#ch=a,this.#F=b}notify(a,...b){ak||this.#ch(new c.DOMEvent(a,{detail:b?.[0],trigger:b?.[1]}))}async ready(a,b){if(!ak)return(0,c.untrack)(async()=>{let{logger:d}=this.#F,{autoPlay:e,canPlay:f,started:g,duration:h,seekable:i,buffered:j,remotePlaybackInfo:k,playsInline:l,savedState:m,source:n}=this.#F.$state;if(f())return;let o={duration:a?.duration??h(),seekable:a?.seekable??i(),buffered:a?.buffered??j(),provider:this.#F.$provider()};this.notify("can-play",o,b),(0,c.tick)();let p=this.#F.$provider(),{storage:q,qualities:r}=this.#F,{muted:s,volume:t,clipStartTime:u,playbackRate:v}=this.#F.$props;await q?.onLoad?.(n());let w=m()?.currentTime,x=m()?.paused,y=await q?.getTime(),z=w??y??u(),A=!1===x||!0!==x&&!g()&&e();if(p){p.setVolume(await q?.getVolume()??t()),p.setMuted(s()||!!await q?.getMuted());let a=await q?.getAudioGain()??1;a>1&&p.audioGain?.setGain?.(a),p.setPlaybackRate?.(await q?.getPlaybackRate()??v()),p.setPlaysInline?.(l()),z>0&&p.setCurrentTime(z)}let B=await q?.getVideoQuality();if(B&&r.length){let a=null,b=1/0;for(let c of r){let d=Math.abs(B.width-c.width)+Math.abs(B.height-c.height)+(B.bitrate?Math.abs(B.bitrate-(c.bitrate??0)):0);d<b&&(a=c,b=d)}a&&(a.selected=!0)}f()&&A?await this.#ci(b):y&&y>0&&this.notify("started",void 0,b),k.set(null)})}async #ci(a){let{player:b,$state:{autoPlaying:d,muted:e}}=this.#F;d.set(!0);let f=new c.DOMEvent("auto-play-attempt",{trigger:a});try{await b.play(f)}catch(a){}}}class cu{#cj=new Map;enqueue(a,b){this.#cj.set(a,b)}serve(a){let b=this.peek(a);return this.#cj.delete(a),b}peek(a){return this.#cj.get(a)}delete(a){this.#cj.delete(a)}clear(){this.#cj.clear()}}class cv{#ck=!1;#cl=(0,c.deferredPromise)();#cj=new Map;get size(){return this.#cj.size}get isServing(){return this.#ck}async waitForFlush(){this.#ck||await this.#cl.promise}enqueue(a,b){this.#ck?b():(this.#cj.delete(a),this.#cj.set(a,b))}serve(a){this.#cj.get(a)?.(),this.#cj.delete(a)}start(){this.#cm(),this.#ck=!0,this.#cj.size>0&&this.#cm()}stop(){this.#ck=!1}reset(){this.stop(),this.#cj.clear(),this.#cn()}#cm(){for(let a of this.#cj.keys())this.serve(a);this.#cn()}#cn(){this.#cl.resolve(),this.#cl=(0,c.deferredPromise)()}}function cw(a){return()=>a()?"true":"false"}class cx extends bz{#co;#cp;#F;controls;#cq;#cr;#cs;#ct=new cv;constructor(a,b,c){super(),this.#co=a,this.#cp=b,this.#F=c,this.#cs=c.$provider,this.controls=new bF,this.#cq=new bH,this.#cr=new bK}onAttach(){this.listen("fullscreen-change",this.#cu.bind(this))}onConnect(a){let b=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),d=new c.EventsController(a),e=this.#cv.bind(this);for(let a of b)a.startsWith("media-")&&d.add(a,e);this.#cw(),(0,c.effect)(this.#cx.bind(this)),(0,c.effect)(this.#cy.bind(this)),(0,c.effect)(this.#cz.bind(this)),(0,c.effect)(this.#cA.bind(this)),(0,c.effect)(this.#cB.bind(this)),(0,c.effect)(this.#cC.bind(this)),(0,c.effect)(this.#cD.bind(this))}onDestroy(){try{let a=this.createEvent("destroy"),{pictureInPicture:b,fullscreen:c}=this.$state;c()&&this.exitFullscreen("prefer-media",a),b()&&this.exitPictureInPicture(a)}catch(a){}this.#ct.reset()}#cw(){let{load:a}=this.$props,{canLoad:b}=this.$state;if("play"!==a()||b())return;let c=this.listen("media-play-request",a=>{this.#cE(a),c()})}#cx(){let a=this.#cs(),b=this.$state.canPlay();return a&&b&&this.#ct.start(),()=>{this.#ct.stop()}}#cv(a){a.stopPropagation(),a.defaultPrevented||this[a.type]&&((0,c.peek)(this.#cs)?this[a.type](a):this.#ct.enqueue(a.type,()=>{(0,c.peek)(this.#cs)&&this[a.type](a)}))}async play(a){if(ak)return;let{canPlay:b,paused:d,autoPlaying:e}=this.$state;if(this.#cE(a)||!(0,c.peek)(d))return;a&&this.#cp.queue.enqueue("media-play-request",a);let f=(0,c.peek)(e);try{let a=(0,c.peek)(this.#cs);return cy(a,(0,c.peek)(b)),await a.play()}catch(c){let b=this.createEvent("play-fail",{detail:ca(c),trigger:a});throw b.autoPlay=f,this.#co.handle(b),c}}#cE(a){let{load:b}=this.$props,{canLoad:c}=this.$state;if("play"===b()&&!c()){let b=this.createEvent("media-start-loading",{trigger:a});return this.dispatchEvent(b),this.#ct.enqueue("media-play-request",async()=>{try{await this.play(b)}catch(a){}}),!0}return!1}async pause(a){if(ak)return;let{canPlay:b,paused:d}=this.$state;if(!(0,c.peek)(d)){a&&this.#cp.queue.enqueue("media-pause-request",a);try{let a=(0,c.peek)(this.#cs);return cy(a,(0,c.peek)(b)),await a.pause()}catch(a){throw this.#cp.queue.delete("media-pause-request"),a}}}setAudioGain(a,b){let{audioGain:c,canSetAudioGain:d}=this.$state;if(c()===a)return;let e=this.#cs();if(!e?.audioGain||!d())throw Error("[vidstack] audio gain api not available");b&&this.#cp.queue.enqueue("media-audio-gain-change-request",b),e.audioGain.setGain(a)}seekToLiveEdge(a){if(ak)return;let{canPlay:b,live:d,liveEdge:e,canSeek:f,liveSyncPosition:g,seekableEnd:h,userBehindLiveEdge:i}=this.$state;if(i.set(!1),(0,c.peek)(()=>!d()||e()||!f()))return;let j=(0,c.peek)(this.#cs);cy(j,(0,c.peek)(b)),a&&this.#cp.queue.enqueue("media-seek-request",a);let k=h()-2;j.setCurrentTime(Math.min(k,g()??k))}#cF=!1;async enterFullscreen(a="prefer-media",b){if(ak)return;let d=this.#cG(a);if(cz(a,d),!d.active)return(0,c.peek)(this.$state.pictureInPicture)&&(this.#cF=!0,await this.exitPictureInPicture(b)),b&&this.#cp.queue.enqueue("media-enter-fullscreen-request",b),d.enter()}async exitFullscreen(a="prefer-media",b){if(ak)return;let d=this.#cG(a);if(cz(a,d),d.active){b&&this.#cp.queue.enqueue("media-exit-fullscreen-request",b);try{let a=await d.exit();return this.#cF&&(0,c.peek)(this.$state.canPictureInPicture)&&await this.enterPictureInPicture(),a}finally{this.#cF=!1}}}#cG(a){let b=(0,c.peek)(this.#cs);return"prefer-media"===a&&this.#cq.supported||"media"===a?this.#cq:b?.fullscreen}async enterPictureInPicture(a){if(!ak&&(this.#cH(),!this.$state.pictureInPicture()))return a&&this.#cp.queue.enqueue("media-enter-pip-request",a),await this.#cs().pictureInPicture.enter()}async exitPictureInPicture(a){if(!ak&&(this.#cH(),this.$state.pictureInPicture()))return a&&this.#cp.queue.enqueue("media-exit-pip-request",a),await this.#cs().pictureInPicture.exit()}#cH(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}#cy(){this.controls.defaultDelay=this.$props.controlsDelay()}#cz(){let{canSetAudioGain:a}=this.$state,b=!!this.#cs()?.audioGain?.supported;a.set(b)}#cA(){let{canAirPlay:a}=this.$state,b=!!this.#cs()?.airPlay?.supported;a.set(b)}#cB(){let{canGoogleCast:a,source:b}=this.$state,c=ao&&!am&&aN(b());a.set(c)}#cC(){let{canFullscreen:a}=this.$state,b=this.#cq.supported||!!this.#cs()?.fullscreen?.supported;a.set(b)}#cD(){let{canPictureInPicture:a}=this.$state,b=!!this.#cs()?.pictureInPicture?.supported;a.set(b)}async "media-airplay-request"(a){try{await this.requestAirPlay(a)}catch(a){}}async requestAirPlay(a){try{let b=this.#cs()?.airPlay;if(!b?.supported)throw Error("No AirPlay adapter.");return a&&this.#cp.queue.enqueue("media-airplay-request",a),await b.prompt()}catch(a){throw this.#cp.queue.delete("media-airplay-request"),a}}async "media-google-cast-request"(a){try{await this.requestGoogleCast(a)}catch(a){}}#cI;async requestGoogleCast(b){try{let{canGoogleCast:d}=this.$state;if(!(0,c.peek)(d)){let a=Error("Cast not available.");throw a.code="CAST_NOT_AVAILABLE",a}if(aP("https://www.gstatic.com"),!this.#cI){let b=await a.A(78915).then(function(a){return a.loader});this.#cI=new b.GoogleCastLoader}await this.#cI.prompt(this.#F),b&&this.#cp.queue.enqueue("media-google-cast-request",b);let e="disconnected"!==(0,c.peek)(this.$state.remotePlaybackState);e&&this.$state.savedState.set({paused:(0,c.peek)(this.$state.paused),currentTime:(0,c.peek)(this.$state.currentTime)}),this.$state.remotePlaybackLoader.set(e?this.#cI:null)}catch(a){throw this.#cp.queue.delete("media-google-cast-request"),a}}"media-clip-start-change-request"(a){let{clipStartTime:b}=this.$state;b.set(a.detail)}"media-clip-end-change-request"(a){let{clipEndTime:b}=this.$state;b.set(a.detail),this.dispatch("duration-change",{detail:a.detail,trigger:a})}"media-duration-change-request"(a){let{providedDuration:b,clipEndTime:c}=this.$state;b.set(a.detail),0>=c()&&this.dispatch("duration-change",{detail:a.detail,trigger:a})}"media-audio-track-change-request"(a){let{logger:b,audioTracks:c}=this.#F;if(c.readonly)return;let d=c[a.detail];if(d){let b=a.type;this.#cp.queue.enqueue(b,a),d.selected=!0}}async "media-enter-fullscreen-request"(a){try{await this.enterFullscreen(a.detail,a)}catch(b){this.#cJ(b,a)}}async "media-exit-fullscreen-request"(a){try{await this.exitFullscreen(a.detail,a)}catch(b){this.#cJ(b,a)}}async #cu(a){let b=(0,c.peek)(this.$props.fullscreenOrientation),d=a.detail;if(!(0,c.isUndefined)(b)&&"none"!==b&&this.#cr.supported)if(d){if(this.#cr.locked)return;this.dispatch("media-orientation-lock-request",{detail:b,trigger:a})}else this.#cr.locked&&this.dispatch("media-orientation-unlock-request",{trigger:a})}#cJ(a,b){this.#co.handle(this.createEvent("fullscreen-error",{detail:ca(a)}))}async "media-orientation-lock-request"(a){let b=a.type;try{this.#cp.queue.enqueue(b,a),await this.#cr.lock(a.detail)}catch(a){this.#cp.queue.delete(b)}}async "media-orientation-unlock-request"(a){let b=a.type;try{this.#cp.queue.enqueue(b,a),await this.#cr.unlock()}catch(a){this.#cp.queue.delete(b)}}async "media-enter-pip-request"(a){try{await this.enterPictureInPicture(a)}catch(b){this.#cK(b,a)}}async "media-exit-pip-request"(a){try{await this.exitPictureInPicture(a)}catch(b){this.#cK(b,a)}}#cK(a,b){this.#co.handle(this.createEvent("picture-in-picture-error",{detail:ca(a)}))}"media-live-edge-request"(a){let{live:b,liveEdge:c,canSeek:d}=this.$state;if(!(!b()||c())&&d()){this.#cp.queue.enqueue("media-seek-request",a);try{this.seekToLiveEdge()}catch(a){this.#cp.queue.delete("media-seek-request")}}}async "media-loop-request"(a){try{this.#cp.looping=!0,this.#cp.replaying=!0,await this.play(a)}catch(a){this.#cp.looping=!1}}"media-user-loop-change-request"(a){this.$state.userPrefersLoop.set(a.detail)}async "media-pause-request"(a){if(!this.$state.paused())try{await this.pause(a)}catch(a){}}async "media-play-request"(a){if(this.$state.paused())try{await this.play(a)}catch(a){}}"media-rate-change-request"(a){let{playbackRate:b,canSetPlaybackRate:c}=this.$state;if(b()===a.detail||!c())return;let d=this.#cs();d?.setPlaybackRate&&(this.#cp.queue.enqueue("media-rate-change-request",a),d.setPlaybackRate(a.detail))}"media-audio-gain-change-request"(a){try{this.setAudioGain(a.detail,a)}catch(a){}}"media-quality-change-request"(a){let{qualities:b,storage:c,logger:d}=this.#F;if(b.readonly)return;this.#cp.queue.enqueue("media-quality-change-request",a);let e=a.detail;if(e<0)b.autoSelect(a),a.isOriginTrusted&&c?.setVideoQuality?.(null);else{let d=b[e];d&&(d.selected=!0,a.isOriginTrusted&&c?.setVideoQuality?.({id:d.id,width:d.width,height:d.height,bitrate:d.bitrate}))}}"media-pause-controls-request"(a){let b=a.type;this.#cp.queue.enqueue(b,a),this.controls.pause(a)}"media-resume-controls-request"(a){let b=a.type;this.#cp.queue.enqueue(b,a),this.controls.resume(a)}"media-seek-request"(a){let{canSeek:b,ended:c,live:d,seekableEnd:e,userBehindLiveEdge:f}=this.$state,g=a.detail;c()&&(this.#cp.replaying=!0);let h=a.type;this.#cp.seeking=!1,this.#cp.queue.delete(h);let i=a2(g,this.$state);Number.isFinite(i)&&b()&&(this.#cp.queue.enqueue(h,a),this.#cs().setCurrentTime(i),d()&&a.isOriginTrusted&&Math.abs(e()-i)>=2&&f.set(!0))}"media-seeking-request"(a){let b=a.type;this.#cp.queue.enqueue(b,a),this.$state.seeking.set(!0),this.#cp.seeking=!0}"media-start-loading"(a){if(this.$state.canLoad())return;let b=a.type;this.#cp.queue.enqueue(b,a),this.#co.handle(this.createEvent("can-load"))}"media-poster-start-loading"(a){if(this.$state.canLoadPoster())return;let b=a.type;this.#cp.queue.enqueue(b,a),this.#co.handle(this.createEvent("can-load-poster"))}"media-text-track-change-request"(a){let{index:b,mode:c}=a.detail,d=this.#F.textTracks[b];if(d){let b=a.type;this.#cp.queue.enqueue(b,a),d.setMode(c,a)}}"media-mute-request"(a){if(this.$state.muted())return;let b=a.type;this.#cp.queue.enqueue(b,a),this.#cs().setMuted(!0)}"media-unmute-request"(a){let{muted:b,volume:c}=this.$state;if(!b())return;let d=a.type;this.#cp.queue.enqueue(d,a),this.#F.$provider().setMuted(!1),0===c()&&(this.#cp.queue.enqueue(d,a),this.#cs().setVolume(.25))}"media-volume-change-request"(a){let{muted:b,volume:c}=this.$state,d=a.detail;if(c()===d)return;let e=a.type;this.#cp.queue.enqueue(e,a),this.#cs().setVolume(d),d>0&&b()&&(this.#cp.queue.enqueue(e,a),this.#cs().setMuted(!1))}#cL(a,b,c){}}function cy(a,b){if(!a||!b)throw Error("[vidstack] media not ready")}function cz(a,b){if(!b?.supported)throw Error("[vidstack] no fullscreen support")}class cA{seeking=!1;looping=!1;replaying=!1;queue=new cu}let cB=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);class cC extends bz{#cp;#F;#cM=new Map;#cN=!1;#cO=[];#cP=[-1,-1];#cQ=!1;#cR;constructor(a,b){super(),this.#cp=a,this.#F=b}onAttach(a){a.setAttribute("aria-busy","true"),new c.EventsController(this).add("fullscreen-change",this["fullscreen-change"].bind(this)).add("fullscreen-error",this["fullscreen-error"].bind(this)).add("orientation-change",this["orientation-change"].bind(this))}onConnect(a){(0,c.effect)(this.#cS.bind(this)),this.#cT(),this.#cU(),this.#cV(),this.#cW(),(0,c.onDispose)(this.#cX.bind(this))}onDestroy(){let{audioTracks:a,qualities:b,textTracks:c}=this.#F;a[a7.reset](),b[a7.reset](),c[a7.reset](),this.#cY()}handle(a){if(!this.scope)return;let b=a.type;(0,c.untrack)(()=>this[a.type]?.(a)),ak||(cB.has(b)&&this.#cM.set(b,a),this.dispatch(a))}#cZ=!1;#cW(){this.#cZ&&(requestAnimationFrame(()=>{this.scope&&this.#F.remote.play(new c.DOMEvent("dom-connect"))}),this.#cZ=!1)}#cX(){this.#cZ||(this.#cZ=!this.$state.paused(),this.#F.$provider()?.pause())}#c$(){this.#c_(),this.#cN=!1,this.#cp.replaying=!1,this.#cp.looping=!1,this.#cQ=!1,this.#cR=void 0,this.#cM.clear()}#c0(a,b){let c=this.#cp.queue.serve(a);c&&(b.request=c,b.triggers.add(c))}#cT(){this.#c1(),this.#c2();let a=this.#F.textTracks;new c.EventsController(a).add("add",this.#c1.bind(this)).add("remove",this.#c1.bind(this)).add("mode-change",this.#c2.bind(this))}#cU(){let a=this.#F.qualities;new c.EventsController(a).add("add",this.#c3.bind(this)).add("remove",this.#c3.bind(this)).add("change",this.#bU.bind(this)).add("auto-change",this.#c4.bind(this)).add("readonly-change",this.#c5.bind(this))}#cV(){let a=this.#F.audioTracks;new c.EventsController(a).add("add",this.#c6.bind(this)).add("remove",this.#c6.bind(this)).add("change",this.#c7.bind(this))}#c1(a){let{textTracks:b}=this.$state;b.set(this.#F.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:b(),trigger:a})}#c2(a){a&&this.#c0("media-text-track-change-request",a);let b=this.#F.textTracks.selected,{textTrack:c}=this.$state;c()!==b&&(c.set(b),this.dispatch("text-track-change",{detail:b,trigger:a}))}#c6(a){let{audioTracks:b}=this.$state;b.set(this.#F.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:b(),trigger:a})}#c7(a){let{audioTrack:b}=this.$state;b.set(this.#F.audioTracks.selected),a&&this.#c0("media-audio-track-change-request",a),this.dispatch("audio-track-change",{detail:b(),trigger:a})}#c3(a){let{qualities:b}=this.$state;b.set(this.#F.qualities.toArray()),this.dispatch("qualities-change",{detail:b(),trigger:a})}#bU(a){let{quality:b}=this.$state;b.set(this.#F.qualities.selected),a&&this.#c0("media-quality-change-request",a),this.dispatch("quality-change",{detail:b(),trigger:a})}#c4(){let{qualities:a}=this.#F,b=a.auto;this.$state.autoQuality.set(b),b||this.#cY()}#c8=null;#c9(){this.#cY(),this.#c8=(0,c.effect)(()=>{let{qualities:a}=this.#F,{mediaWidth:b,mediaHeight:d}=this.$state,e=b(),f=d();if(0===e||0===f)return;let g=null,h=1/0;for(let b of a){let a=Math.abs(b.width-e)+Math.abs(b.height-f);a<h&&(h=a,g=b)}g&&a[a7.select](g,!0,new c.DOMEvent("resize",{detail:{width:e,height:f}}))})}#cY(){this.#c8?.(),this.#c8=null}#c5(){this.$state.canSetQuality.set(!this.#F.qualities.readonly)}#cS(){let{canSetVolume:a,isGoogleCastConnected:b}=this.$state;b()?a.set(!1):aw().then(a.set)}"provider-change"(a){let b=this.#F.$provider(),c=a.detail;b?.type!==c?.type&&(b?.destroy?.(),b?.scope?.dispose(),this.#F.$provider.set(a.detail),b&&null===a.detail&&this.#da(a))}"provider-loader-change"(a){}"auto-play"(a){this.$state.autoPlayError.set(null)}"auto-play-fail"(a){this.$state.autoPlayError.set(a.detail),this.#c$()}"can-load"(a){this.$state.canLoad.set(!0),this.#cM.set("can-load",a),this.#F.textTracks[aU.canLoad](),this.#c0("media-start-loading",a)}"can-load-poster"(a){this.$state.canLoadPoster.set(!0),this.#cM.set("can-load-poster",a),this.#c0("media-poster-start-loading",a)}"media-type-change"(a){let b=this.#cM.get("source-change");b&&a.triggers.add(b);let c=this.$state.viewType();this.$state.mediaType.set(a.detail);let d=this.$state.providedViewType(),e="unknown"===d?a.detail:d;c!==e&&(ak?this.$state.inferredViewType.set(e):setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(a.detail),this.dispatch("view-type-change",{detail:e,trigger:a}))})},0))}"stream-type-change"(a){let b=this.#cM.get("source-change");b&&a.triggers.add(b);let{streamType:c,inferredStreamType:d}=this.$state;d.set(a.detail),a.detail=c()}"rate-change"(a){let{storage:b}=this.#F,{canPlay:c}=this.$state;this.$state.playbackRate.set(a.detail),this.#c0("media-rate-change-request",a),c()&&b?.setPlaybackRate?.(a.detail)}"remote-playback-change"(a){let{remotePlaybackState:b,remotePlaybackType:c}=this.$state,{type:d,state:e}=a.detail,f="connected"===e;c.set(d),b.set(e);let g="airplay"===d?"media-airplay-request":"media-google-cast-request";if(f)this.#c0(g,a);else{let b=this.#cp.queue.peek(g);b&&(a.request=b,a.triggers.add(b))}}"sources-change"(a){let b=this.$state.sources(),c=a.detail;this.$state.sources.set(c),this.#db(b,c,a)}#db(a,b,c){let{qualities:d}=this.#F,e=!1,f=!1;for(let e of a)if(aj(e)&&!b.some(a=>a.src===e.src)){let a=d.getBySrc(e.src);a&&(d[a7.remove](a,c),f=!0)}for(let a of(f&&!d.length&&(this.$state.savedState.set(null),d[a7.reset](c)),b)){if(!aj(a)||d.getBySrc(a.src))continue;let b={id:a.id??a.height+"p",bitrate:null,codec:null,...a,selected:!1};d[a7.add](b,c),e=!0}e&&!d[bu.enableAuto]&&(this.#c9(),d[bu.enableAuto]=this.#c9.bind(this),d[bu.setAuto](!0,c))}"source-change"(a){a.isQualityChange=a.originEvent?.type==="quality-change";let b=a.detail;this.#da(a,a.isQualityChange),this.#cM.set(a.type,a),this.$state.source.set(b),this.el?.setAttribute("aria-busy","true")}#da(a,b=!1){let{audioTracks:c,qualities:d}=this.#F;if(!b){this.#cO=[],this.#cP=[-1,-1],c[a7.reset](a),d[a7.reset](a),a1(this.$state,b),this.#c$();return}a1(this.$state,b),this.#c$()}abort(a){let b=this.#cM.get("source-change");b&&a.triggers.add(b);let c=this.#cM.get("can-load");c&&!a.triggers.hasType("can-load")&&a.triggers.add(c)}"load-start"(a){let b=this.#cM.get("source-change");b&&a.triggers.add(b)}error(a){this.$state.error.set(a.detail);let b=this.#cM.get("abort");b&&a.triggers.add(b)}"loaded-metadata"(a){let b=this.#cM.get("load-start");b&&a.triggers.add(b)}"loaded-data"(a){let b=this.#cM.get("load-start");b&&a.triggers.add(b)}"can-play"(a){let b=this.#cM.get("loaded-metadata");b&&a.triggers.add(b),this.#dc(a.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(a){this.#dc(a.detail);let b=this.#cM.get("can-play");b&&a.triggers.add(b)}#dc(a){let{seekable:b,buffered:c,intrinsicDuration:d,canPlay:e}=this.$state;e.set(!0),c.set(a.buffered),b.set(a.seekable);let f=aA(a.seekable)??1/0;d.set(f)}"duration-change"(a){let{live:b,intrinsicDuration:c,providedDuration:d,clipEndTime:e,ended:f}=this.$state,g=a.detail;if(!b()){let b=Number.isNaN(g)?0:g;c.set(b),f()&&this.#dd(a)}(d()>0||e()>0)&&a.stopImmediatePropagation()}progress(a){let{buffered:b,seekable:c}=this.$state,{buffered:d,seekable:e}=a.detail,f=aA(d),g=d.length!==b().length,h=f!==aA(b()),i=aA(e),j=e.length!==c().length,k=i!==aA(c());(g||h)&&b.set(d),(j||k)&&c.set(e)}play(a){let{paused:b,autoPlayError:c,ended:d,autoPlaying:e,playsInline:f,pointer:g,muted:h,viewType:i,live:j,userBehindLiveEdge:k}=this.$state;if(this.#de(),!b())return void a.stopImmediatePropagation();a.autoPlay=e();let l=this.#cM.get("waiting");l&&a.triggers.add(l),this.#c0("media-play-request",a),this.#cM.set("play",a),b.set(!1),c.set(null),a.autoPlay&&(this.handle(this.createEvent("auto-play",{detail:{muted:h()},trigger:a})),e.set(!1)),(d()||this.#cp.replaying)&&(this.#cp.replaying=!1,d.set(!1),this.handle(this.createEvent("replay",{trigger:a}))),f()||"video"!==i()||"coarse"!==g()||this.#F.remote.enterFullscreen("prefer-media",a),j()&&!k()&&this.#F.remote.seekToLiveEdge(a)}#de(a){if(!(0,c.peek)(this.#F.$provider))return;let{ended:b,seekableStart:d,clipEndTime:e,currentTime:f,realCurrentTime:g,duration:h}=this.$state,i=b()||g()<d()||e()>0&&g()>=e()||.1>Math.abs(f()-h());return i&&this.dispatch("media-seek-request",{detail:d(),trigger:a}),i}"play-fail"(a){let{muted:b,autoPlaying:c}=this.$state,d=this.#cM.get("play");d&&a.triggers.add(d),this.#c0("media-play-request",a);let{paused:e,playing:f}=this.$state;e.set(!0),f.set(!1),this.#c$(),this.#cM.set("play-fail",a),a.autoPlay&&(this.handle(this.createEvent("auto-play-fail",{detail:{muted:b(),error:a.detail},trigger:a})),c.set(!1))}playing(a){let b=this.#cM.get("play"),c=this.#cM.get("seeked");b?a.triggers.add(b):c&&a.triggers.add(c),setTimeout(()=>this.#c$(),0);let{paused:d,playing:e,live:f,liveSyncPosition:g,seekableEnd:h,started:i,currentTime:j,seeking:k,ended:l}=this.$state;if(d.set(!1),e.set(!0),k.set(!1),l.set(!1),this.#cp.looping){this.#cp.looping=!1;return}if(f()&&!i()&&0===j()){let a=g()??h()-2;Number.isFinite(a)&&this.#F.$provider().setCurrentTime(a)}this.started(a)}started(a){let{started:b}=this.$state;b()||(b.set(!0),this.handle(this.createEvent("started",{trigger:a})))}pause(a){this.el?.isConnected||(this.#cZ=!0),this.#c0("media-pause-request",a);let b=this.#cM.get("seeked");b&&a.triggers.add(b);let{paused:c,playing:d}=this.$state;c.set(!0),d.set(!1),this.#cN&&setTimeout(()=>{this.handle(this.createEvent("end",{trigger:a})),this.#cN=!1},0),this.#c$()}"time-change"(a){if(this.#cp.looping)return void a.stopImmediatePropagation();let{waiting:b,played:c,clipEndTime:d,realCurrentTime:e,currentTime:f}=this.$state,g=a.detail,h=d();for(let c of(e.set(g),this.#df(),b.set(!1),this.#F.textTracks))c[aU.updateActiveCues](g,a);h>0&&g>=h&&(this.#cN=!0,this.dispatch("media-pause-request",{trigger:a})),this.#dg(),this.dispatch("time-update",{detail:{currentTime:f(),played:c()},trigger:a})}#df(){var a,b,c;let d,e,{currentTime:f,played:g,paused:h}=this.$state;h()||(this.#cP=(a=this.#cO,b=this.#cP,c=f(),d=b[0],e=b[1],c<d?[c,-1]:c===d?b:-1===d?(b[0]=c,b):(c>d&&(b[1]=c,-1===e&&a.push(b)),!function(a){if(a.length<=1)return;a.sort((a,b)=>a[0]-b[0]);let b=[],c=a[0];for(let d=1;d<a.length;d++){let e=a[d];c[1]>=e[0]-1?c=[c[0],Math.max(c[1],e[1])]:(b.push(c),c=e)}b.push(c)}(a),b)),g.set(new ay(this.#cO)))}#dd(a){let{clipStartTime:b,clipEndTime:c,duration:d}=this.$state;b()>0||c()>0||this.handle(this.createEvent("time-change",{detail:d(),trigger:a}))}#dg(){let{storage:a}=this.#F,{canPlay:b,realCurrentTime:c}=this.$state;b()&&a?.setTime?.(c())}"audio-gain-change"(a){let{storage:b}=this.#F,{canPlay:c,audioGain:d}=this.$state;d.set(a.detail),this.#c0("media-audio-gain-change-request",a),c()&&b?.setAudioGain?.(d())}"volume-change"(a){let{storage:b}=this.#F,{volume:c,muted:d,canPlay:e}=this.$state,f=a.detail;c.set(f.volume),d.set(f.muted||0===f.volume),this.#c0("media-volume-change-request",a),this.#c0(f.muted?"media-mute-request":"media-unmute-request",a),e()&&(b?.setVolume?.(c()),b?.setMuted?.(d()))}seeking=(0,c.functionThrottle)(a=>{let{seeking:b,realCurrentTime:c,paused:d}=this.$state;b.set(!0),c.set(a.detail),this.#c0("media-seeking-request",a),d()&&(this.#cR=a,this.#dh()),this.#cP=[-1,-1]},150,{leading:!0});seeked(a){let{seeking:b,currentTime:c,realCurrentTime:d,paused:e,seekableEnd:f,ended:g,live:h}=this.$state;if(this.#cp.seeking)b.set(!0),a.stopImmediatePropagation();else if(b()){let c=this.#cM.get("waiting");c&&a.triggers.add(c);let f=this.#cM.get("seeking");f&&!a.triggers.has(f)&&a.triggers.add(f),e()&&this.#c_(),b.set(!1),d.set(a.detail),this.#c0("media-seek-request",a);let g=a?.originEvent;!g?.isTrusted||g instanceof MessageEvent||/seek/.test(g.type)||this.started(a)}h()||(Math.floor(c())!==Math.floor(f())?g.set(!1):this.end(a))}waiting(a){this.#cQ||this.#cp.seeking||(a.stopImmediatePropagation(),this.#cR=a,this.#dh())}#dh=(0,c.functionDebounce)(()=>{if(!this.#cR)return;this.#cQ=!0;let{waiting:a,playing:b}=this.$state;a.set(!0),b.set(!1);let c=this.createEvent("waiting",{trigger:this.#cR});this.#cM.set("waiting",c),this.dispatch(c),this.#cR=void 0,this.#cQ=!1},300);end(a){let{loop:b,ended:c}=this.$state;if(!(!b()&&c())){if(b())return void setTimeout(()=>{requestAnimationFrame(()=>{this.#de(a),this.dispatch("media-loop-request",{trigger:a})})},10);setTimeout(()=>this.#bs(a),0)}}#bs(a){let{storage:b}=this.#F,{paused:c,seeking:d,ended:e,duration:f}=this.$state;this.#dd(a),c()||this.dispatch("pause",{trigger:a}),d()&&this.dispatch("seeked",{detail:f(),trigger:a}),e.set(!0),this.#c$(),b?.setTime?.(f(),!0),this.dispatch("ended",{trigger:a})}#c_(){this.#dh.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(a){let b=a.detail;this.$state.fullscreen.set(b),this.#c0(b?"media-enter-fullscreen-request":"media-exit-fullscreen-request",a)}"fullscreen-error"(a){this.#c0("media-enter-fullscreen-request",a),this.#c0("media-exit-fullscreen-request",a)}"orientation-change"(a){let b=a.detail.lock;this.#c0(b?"media-orientation-lock-request":"media-orientation-unlock-request",a)}"picture-in-picture-change"(a){let b=a.detail;this.$state.pictureInPicture.set(b),this.#c0(b?"media-enter-pip-request":"media-exit-pip-request",a)}"picture-in-picture-error"(a){this.#c0("media-enter-pip-request",a),this.#c0("media-exit-pip-request",a)}"title-change"(a){a.trigger&&(a.stopImmediatePropagation(),this.$state.inferredTitle.set(a.detail))}"poster-change"(a){a.trigger&&(a.stopImmediatePropagation(),this.$state.inferredPoster.set(a.detail))}}class cD extends bz{onSetup(){if(this.#ar(),!ak)for(let a of[this.#di,this.#dj,this.#dk,this.#dl,this.#J,this.#dm,this.#dn,this.#dp,this.#dq,this.#dr,this.#ds,this.#dt,this.#du,this.#dv,this.#dw])(0,c.effect)(a.bind(this))}#ar(){let a={duration:"providedDuration",loop:"providedLoop",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},b=new Set(["currentTime","paused","playbackRate","volume"]);for(let c of Object.keys(this.$props))b.has(c)||this.$state[a[c]??c]?.set(this.$props[c]());this.$state.muted.set(this.$props.muted()||0===this.$props.volume())}#dv(){let{viewType:a,streamType:b,title:c,poster:d,loop:e}=this.$props,f=this.$state;f.providedPoster.set(d()),f.providedStreamType.set(b()),f.providedViewType.set(a()),f.providedTitle.set(c()),f.providedLoop.set(e())}#dx(){}#di(){let{artist:a,artwork:b}=this.$props;this.$state.artist.set(a()),this.$state.artwork.set(b())}#dw(){let{title:a}=this.$state;this.dispatch("title-change",{detail:a()})}#dj(){let a=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(a),this.dispatch("auto-play-change",{detail:a})}#ds(){let a=this.$state.loop();this.dispatch("loop-change",{detail:a})}#J(){let a=this.$props.controls();this.$state.controls.set(a)}#du(){let{poster:a}=this.$state;this.dispatch("poster-change",{detail:a()})}#dm(){let a=this.$props.crossOrigin()??this.$props.crossorigin();this.$state.crossOrigin.set(!0===a?"":a)}#dn(){let{duration:a}=this.$props;this.dispatch("media-duration-change-request",{detail:a()})}#dt(){let a=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(a),this.dispatch("plays-inline-change",{detail:a})}#dk(){let{clipStartTime:a}=this.$props;this.dispatch("media-clip-start-change-request",{detail:a()})}#dl(){let{clipEndTime:a}=this.$props;this.dispatch("media-clip-end-change-request",{detail:a()})}#dp(){this.dispatch("live-change",{detail:this.$state.live()})}#dr(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}#dq(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}}let cE=["play","pause","seekforward","seekbackward","seekto"];class cF extends bz{onConnect(){(0,c.effect)(this.#dy.bind(this)),(0,c.effect)(this.#dz.bind(this));let a=this.#dA.bind(this);for(let b of cE)navigator.mediaSession.setActionHandler(b,a);(0,c.onDispose)(this.#aD.bind(this))}#aD(){for(let a of cE)navigator.mediaSession.setActionHandler(a,null)}#dy(){let{title:a,artist:b,artwork:c,poster:d}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:a(),artist:b(),artwork:c()??[{src:d()}]})}#dz(){let{canPlay:a,paused:b}=this.$state;navigator.mediaSession.playbackState=a()?b()?"paused":"playing":"none"}#dA(a){let b=new c.DOMEvent("media-session-action",{detail:a});switch(a.action){case"play":this.dispatch("media-play-request",{trigger:b});break;case"pause":this.dispatch("media-pause-request",{trigger:b});break;case"seekto":case"seekforward":case"seekbackward":this.dispatch("media-seek-request",{detail:(0,c.isNumber)(a.seekTime)?a.seekTime:this.$state.currentTime()+(a.seekOffset??("seekforward"===a.action?10:-10)),trigger:b})}}}let cG=(0,c.signal)(!1);ak||((0,c.listenEvent)(document,"pointerdown",()=>{cG.set(!1)}),(0,c.listenEvent)(document,"keydown",a=>{a.metaKey||a.altKey||a.ctrlKey||cG.set(!0)}));class cH extends c.ViewController{#dB=(0,c.signal)(!1);onConnect(a){(0,c.effect)(()=>{let b=new c.EventsController(a);if(!cG()){this.#dB.set(!1),cI(a,!1),b.add("pointerenter",this.#dC.bind(this)).add("pointerleave",this.#dD.bind(this));return}let d=document.activeElement===a;this.#dB.set(d),cI(a,d),b.add("focus",this.#dE.bind(this)).add("blur",this.#dF.bind(this))})}focused(){return this.#dB()}#dE(){this.#dB.set(!0),cI(this.el,!0)}#dF(){this.#dB.set(!1),cI(this.el,!1)}#dC(){cJ(this.el,!0)}#dD(){cJ(this.el,!1)}}function cI(a,b){(0,c.setAttribute)(a,"data-focus",b),(0,c.setAttribute)(a,"data-hocus",b)}function cJ(a,b){(0,c.setAttribute)(a,"data-hocus",b),(0,c.setAttribute)(a,"data-hover",b)}class cK extends c.Component{static props=cr;static state=a$;#F;#co;#dG;canPlayQueue=new cv;remoteControl;get #aV(){return this.#F.$provider()}get #dH(){return this.$props}constructor(){super(),new cD;const a={player:this,qualities:new bv,audioTracks:new bb,storage:null,$provider:(0,c.signal)(null),$providerSetup:(0,c.signal)(!1),$props:this.$props,$state:this.$state};a.remote=this.remoteControl=new a5(void 0),a.remote.setPlayer(this),a.textTracks=new bt,a.textTracks[aU.crossOrigin]=this.$state.crossOrigin,a.textRenderers=new bs(a),a.ariaKeys={},this.#F=a,(0,c.provideContext)(a3,a),this.orientation=new bK,new cH,new bC(a);const b=new cA;this.#co=new cC(b,a),this.#dG=new cx(this.#co,b,a),a.delegate=new ct(this.#co.handle.bind(this.#co),a),a.notify=a.delegate.notify.bind(a.delegate),"undefined"!=typeof navigator&&"mediaSession"in navigator&&new cF,new cs("load",this.startLoading.bind(this)),new cs("posterLoad",this.startLoadingPoster.bind(this))}onSetup(){this.#dI(),(0,c.effect)(this.#dJ.bind(this)),(0,c.effect)(this.#dK.bind(this)),(0,c.effect)(this.#at.bind(this)),(0,c.effect)(this.#dL.bind(this)),(0,c.effect)(this.#dM.bind(this)),(0,c.effect)(this.#dt.bind(this)),(0,c.effect)(this.#dN.bind(this))}onAttach(a){a.setAttribute("data-media-player",""),bh(a,"tabindex","0"),bh(a,"role","region"),(0,c.effect)(this.#dO.bind(this)),ak?this.#dw():(0,c.effect)(this.#dw.bind(this)),ak?this.#dP():(0,c.effect)(this.#dP.bind(this)),(0,c.listenEvent)(a,"find-media-player",this.#dQ.bind(this))}onConnect(a){an&&(0,c.setAttribute)(a,"data-iphone","");let b=window.matchMedia("(pointer: coarse)");this.#dR(b),b.onchange=this.#dR.bind(this);let d=new ResizeObserver((0,c.animationFrameThrottle)(this.#dS.bind(this)));d.observe(a),(0,c.effect)(this.#dS.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),(0,c.onDispose)(()=>{d.disconnect(),b.onchange=null})}onDestroy(){this.#F.player=null,this.canPlayQueue.reset()}#dT=!1;#dw(){let a=this.$el,{title:b,live:d,viewType:e,providedTitle:f}=this.$state,g=d(),h=(0,c.uppercaseFirstChar)(e()),i="Unknown"!==h?`${g?"Live ":""}${h}`:g?"Live":"Media",j=b();(0,c.setAttribute)(this.el,"aria-label",`${i} Player`+(j?` - ${j}`:"")),!ak&&a?.hasAttribute("title")&&(this.#dT=!0,a?.removeAttribute("title"))}#dP(){let a=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(a),(0,c.setAttribute)(this.el,"data-orientation",a),this.#dS()}#dJ(){this.$state.canPlay()&&this.#aV?this.canPlayQueue.start():this.canPlayQueue.stop()}#dI(){if(cK[cp])return void this.setAttributes(cK[cp]);let a={"data-load":function(){return this.$props.load()},"data-captions":function(){let a=this.$state.textTrack();return!!a&&aZ(a)},"data-ios-controls":function(){return this.$state.iOSControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){let{canLoad:a,canPlay:b,waiting:c}=this.$state;return a()&&(!b()||c())},"data-error":function(){let{error:a}=this.$state;return!!a()},"data-autoplay-error":function(){let{autoPlayError:a}=this.$state;return!!a()}},b={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(let d of cq)a["data-"+(b[d]??(0,c.camelToKebabCase)(d))]=function(){return this.$state[d]()};delete a.title,cK[cp]=a,this.setAttributes(a)}#dQ(a){a.detail(this)}#dS(){if(ak||!this.el)return;let a=this.el.clientWidth,b=this.el.clientHeight;this.$state.width.set(a),this.$state.height.set(b),(0,c.setStyle)(this.el,"--player-width",a+"px"),(0,c.setStyle)(this.el,"--player-height",b+"px")}#dR(a){if(ak)return;let b=a.matches?"coarse":"fine";(0,c.setAttribute)(this.el,"data-pointer",b),this.$state.pointer.set(b),this.#dS()}get provider(){return this.#aV}get controls(){return this.#dG.controls}set controls(a){this.#dH.controls.set(a)}orientation;get title(){return(0,c.peek)(this.$state.title)}set title(a){if(this.#dT){this.#dT=!1;return}this.#dH.title.set(a)}get qualities(){return this.#F.qualities}get audioTracks(){return this.#F.audioTracks}get textTracks(){return this.#F.textTracks}get textRenderers(){return this.#F.textRenderers}get duration(){return this.$state.duration()}set duration(a){this.#dH.duration.set(a)}get paused(){return(0,c.peek)(this.$state.paused)}set paused(a){this.#dU(a)}#at(){this.#dU(this.$props.paused())}#dU(a){a?this.canPlayQueue.enqueue("paused",()=>this.#dG.pause()):this.canPlayQueue.enqueue("paused",()=>this.#dG.play())}get muted(){return(0,c.peek)(this.$state.muted)}set muted(a){this.#dV(a)}#dK(){this.#dV(this.$props.muted())}#dV(a){this.canPlayQueue.enqueue("muted",()=>{this.#aV&&this.#aV.setMuted(a)})}get currentTime(){return(0,c.peek)(this.$state.currentTime)}set currentTime(a){this.#dW(a)}#dM(){this.#dW(this.$props.currentTime())}#dW(a){this.canPlayQueue.enqueue("currentTime",()=>{let{currentTime:b}=this.$state;a!==(0,c.peek)(b)&&(0,c.peek)(()=>{if(!this.#aV)return;let b=a2(a,this.$state);Number.isFinite(b)&&this.#aV.setCurrentTime(b)})})}get volume(){return(0,c.peek)(this.$state.volume)}set volume(a){this.#dX(a)}#dL(){this.#dX(this.$props.volume())}#dX(a){let b=be(0,a,1);this.canPlayQueue.enqueue("volume",()=>{this.#aV&&this.#aV.setVolume(b)})}get playbackRate(){return(0,c.peek)(this.$state.playbackRate)}set playbackRate(a){this.#dY(a)}#dN(){this.#dY(this.$props.playbackRate())}#dY(a){this.canPlayQueue.enqueue("rate",()=>{this.#aV&&this.#aV.setPlaybackRate?.(a)})}#dt(){this.#dZ(this.$props.playsInline())}#dZ(a){this.canPlayQueue.enqueue("playsinline",()=>{this.#aV&&this.#aV.setPlaysInline?.(a)})}#dO(){let a=this.$props.storage(),b=(0,c.isString)(a)?new a6:a;if(b?.onChange){let{source:d}=this.$state,e=(0,c.isString)(a)?a:this.el?.id,f=(0,c.computed)(this.#d$.bind(this));(0,c.effect)(()=>b.onChange(d(),f(),e||void 0))}this.#F.storage=b,this.#F.textTracks.setStorage(b),(0,c.onDispose)(()=>{b?.onDestroy?.(),this.#F.storage=null,this.#F.textTracks.setStorage(null)})}#d$(){let{clipStartTime:a,clipEndTime:b}=this.$props,{source:c}=this.$state,d=c();return d.src?`${d.src}:${a()}:${b()}`:null}async play(a){return this.#dG.play(a)}async pause(a){return this.#dG.pause(a)}async enterFullscreen(a,b){return this.#dG.enterFullscreen(a,b)}async exitFullscreen(a,b){return this.#dG.exitFullscreen(a,b)}enterPictureInPicture(a){return this.#dG.enterPictureInPicture(a)}exitPictureInPicture(a){return this.#dG.exitPictureInPicture(a)}seekToLiveEdge(a){this.#dG.seekToLiveEdge(a)}startLoading(a){this.#F.notify("can-load",void 0,a)}startLoadingPoster(a){this.#F.notify("can-load-poster",void 0,a)}requestAirPlay(a){return this.#dG.requestAirPlay(a)}requestGoogleCast(a){return this.#dG.requestGoogleCast(a)}setAudioGain(a,b){return this.#dG.setAudioGain(a,b)}destroy(){super.destroy(),this.#F.remote.setPlayer(null),this.dispatch("destroy")}}let cL=cK.prototype;(0,c.prop)(cL,"canPlayQueue"),(0,c.prop)(cL,"remoteControl"),(0,c.prop)(cL,"provider"),(0,c.prop)(cL,"controls"),(0,c.prop)(cL,"orientation"),(0,c.prop)(cL,"title"),(0,c.prop)(cL,"qualities"),(0,c.prop)(cL,"audioTracks"),(0,c.prop)(cL,"textTracks"),(0,c.prop)(cL,"textRenderers"),(0,c.prop)(cL,"duration"),(0,c.prop)(cL,"paused"),(0,c.prop)(cL,"muted"),(0,c.prop)(cL,"currentTime"),(0,c.prop)(cL,"volume"),(0,c.prop)(cL,"playbackRate"),(0,c.method)(cL,"play"),(0,c.method)(cL,"pause"),(0,c.method)(cL,"enterFullscreen"),(0,c.method)(cL,"exitFullscreen"),(0,c.method)(cL,"enterPictureInPicture"),(0,c.method)(cL,"exitPictureInPicture"),(0,c.method)(cL,"seekToLiveEdge"),(0,c.method)(cL,"startLoading"),(0,c.method)(cL,"startLoadingPoster"),(0,c.method)(cL,"requestAirPlay"),(0,c.method)(cL,"requestGoogleCast"),(0,c.method)(cL,"setAudioGain");let cM=new Map;class cN{#d_=!1;#d0;#d1;#F;#d2;constructor(a,b,d,e=[]){this.#d1=a,this.#F=b,this.#d2=d;const f=new ci,g=new bN,h=new bM,i=new bL,j=[new ck,new cj];this.#d0=(0,c.computed)(()=>{let a=b.$state.remotePlaybackLoader(),c=b.$props.preferNativeHLS()?[h,i,f,g,...j,...e]:[g,h,i,f,...j,...e];return a?[a,...c]:c});const{$state:k}=b;for(const a of(k.sources.set(cO(b.$props.src())),k.sources())){const c=this.#d0().find(b=>b.canPlay(a));if(!c)continue;const d=c.mediaType(a);b.$state.source.set(a),b.$state.mediaType.set(d),b.$state.inferredViewType.set(d),this.#d2.set(c),this.#d_=!0;break}}connect(){let a=this.#d2();this.#d_&&(this.#d3(this.#F.$state.source(),a),this.#d4(a),this.#d_=!1),(0,c.effect)(this.#d5.bind(this)),(0,c.effect)(this.#d6.bind(this)),(0,c.effect)(this.#d7.bind(this)),(0,c.effect)(this.#d8.bind(this)),(0,c.effect)(this.#d9.bind(this))}#d5(){this.#F.notify("sources-change",[...cO(this.#F.$props.src()),...this.#d1()])}#d6(){let{$state:a}=this.#F,b=a.sources(),d=(0,c.peek)(a.source),e=this.#ea(d,b);if(b[0]?.src&&!e.src&&!e.type){let{crossOrigin:d}=a,e=aS(d()),f=new AbortController;return Promise.all(b.map(a=>(0,c.isString)(a.src)&&"?"===a.type?fetch(a.src,{method:"HEAD",credentials:e,signal:f.signal}).then(b=>(a.type=b.headers.get("content-type")||"??",cM.set(a.src,a.type),a)).catch(()=>a):a)).then(b=>{if(f.signal.aborted)return;let d=this.#ea((0,c.peek)(a.source),b);(0,c.tick)(),d.src||this.#F.notify("error",{message:"Failed to load resource.",code:4})}),()=>f.abort()}(0,c.tick)()}#ea(a,b){let d={src:"",type:""},e=null,f=new c.DOMEvent("sources-change",{detail:{sources:b}}),g=this.#d0(),{started:h,paused:i,currentTime:j,quality:k,savedState:l}=this.#F.$state;for(let a of b){let b=g.find(b=>b.canPlay(a));if(b){d=a,e=b;break}}if(aj(d)){let a=k(),e=b.find(b=>b.src===a?.src);(0,c.peek)(h)?l.set({paused:(0,c.peek)(i),currentTime:(0,c.peek)(j)}):l.set(null),e&&(d=e,f=new c.DOMEvent("quality-change",{detail:{quality:a}}))}return cQ(a,d)||this.#d3(d,e,f),e!==(0,c.peek)(this.#d2)&&this.#d4(e,f),d}#d3(a,b,c){this.#F.notify("source-change",a,c),this.#F.notify("media-type-change",b?.mediaType(a)||"unknown",c)}#d4(a,b){this.#F.$providerSetup.set(!1),this.#F.notify("provider-change",null,b),a&&(0,c.peek)(()=>a.preconnect?.(this.#F)),this.#d2.set(a),this.#F.notify("provider-loader-change",a,b)}#d7(){let a=this.#F.$provider();if(!(!a||(0,c.peek)(this.#F.$providerSetup))){if(this.#F.$state.canLoad()){(0,c.scoped)(()=>a.setup(),a.scope),this.#F.$providerSetup.set(!0);return}(0,c.peek)(()=>a.preconnect?.())}}#d8(){if(!this.#F.$providerSetup())return;let a=this.#F.$provider(),b=this.#F.$state.source(),d=(0,c.peek)(this.#F.$state.crossOrigin),e=(0,c.peek)(this.#F.$props.preferNativeHLS);if(!cQ(a?.currentSrc,b)){if(this.#F.$state.canLoad()){let f=new AbortController;if(aL(b))(e||!ax())&&(function a(b,c){return fetch(b,c).then(a=>a.text()).then(d=>{let e,f=(e=d.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g))?e[0].split("\n")[1].trim():null;if(f)return a(/^https?:/.test(f)?f:new URL(f,b).href,c);let g=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(d)?"on-demand":"live";return"live"===g&&function(a){for(let b of a.split("\n"))if(b.startsWith("#EXT-X-TARGETDURATION")){let a=parseFloat(b.split(":")[1]);if(!isNaN(a))return a}return -1}(d)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(d)||d.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":g})})(b.src,{credentials:aS(d),signal:f.signal}).then(a=>{this.#F.notify("stream-type-change",a)}).catch(c.noop);else if(aM(b))fetch(b.src,{credentials:aS(d),signal:f.signal}).then(a=>a.text()).then(a=>/type="static"/.test(a)?"on-demand":"live").then(a=>{this.#F.notify("stream-type-change",a)}).catch(c.noop);else this.#F.notify("stream-type-change","on-demand");return(0,c.peek)(()=>{let d=(0,c.peek)(this.#F.$state.preload);return a?.loadSource(b,d).catch(a=>{})}),()=>f.abort()}try{(0,c.isString)(b.src)&&aP(new URL(b.src).origin)}catch(a){}}}#d9(){let a=this.#d2(),{providedPoster:b,source:d,canLoadPoster:e}=this.#F.$state;if(!a||!a.loadPoster||!d()||!e()||b())return;let f=new AbortController,g=new c.DOMEvent("source-change",{detail:d});return a.loadPoster(d(),this.#F,f).then(a=>{this.#F.notify("poster-change",a||"",g)}).catch(()=>{this.#F.notify("poster-change","",g)}),()=>{f.abort()}}}function cO(a){return((0,c.isArray)(a)?a:[a]).map(a=>(0,c.isString)(a)?{src:a,type:cP(a)}:{...a,type:cP(a.src,a.type)})}function cP(a,b){if((0,c.isString)(b)&&b.length)return b;if((0,c.isString)(a)&&cM.has(a))return cM.get(a);if(!b&&aL({src:a,type:""}))return"application/x-mpegurl";if(!b&&aM({src:a,type:""}))return"application/dash+xml";if(!(0,c.isString)(a)||a.startsWith("blob:"))return"video/object";else if(a.includes("youtube")||a.includes("youtu.be"))return"video/youtube";else if(a.includes("vimeo")&&!a.includes("progressive_redirect")&&!a.includes(".m3u8"))return"video/vimeo";return"?"}function cQ(a,b){return a?.src===b?.src&&a?.type===b?.type}class cR{#eb;#F;#ec=[];constructor(a,b){this.#eb=a,this.#F=b,(0,c.effect)(this.#ed.bind(this))}#ed(){let a=this.#eb();for(let b of this.#ec)if(!a.some(a=>a.id===b.id)){let a=b.id&&this.#F.textTracks.getById(b.id);a&&this.#F.textTracks.remove(a)}for(let b of a){let a=b.id||aX.createId(b);this.#F.textTracks.getById(a)||(b.id=a,this.#F.textTracks.add(b))}this.#ec=a}}class cS extends c.Component{static props={loaders:[]};static state=new c.State({loader:null});#F;#ee;#d1=(0,c.signal)([]);#eb=(0,c.signal)([]);#d2=null;onSetup(){this.#F=a4(),this.#ee=new cN(this.#d1,this.#F,this.$state.loader,this.$props.loaders())}onAttach(a){a.setAttribute("data-media-provider","")}onConnect(a){this.#ee.connect(),new cR(this.#eb,this.#F);let b=new ResizeObserver((0,c.animationFrameThrottle)(this.#dS.bind(this)));b.observe(a);let d=new MutationObserver(this.#ef.bind(this));d.observe(a,{attributes:!0,childList:!0}),this.#dS(),this.#ef(),(0,c.onDispose)(()=>{b.disconnect(),d.disconnect()})}#eg=-1;load(a){a?.setAttribute("aria-hidden","true"),window.cancelAnimationFrame(this.#eg),this.#eg=requestAnimationFrame(()=>this.#eh(a)),(0,c.onDispose)(()=>{window.cancelAnimationFrame(this.#eg)})}#eh(a){if(!this.scope)return;let b=this.$state.loader(),{$provider:d}=this.#F;this.#d2===b&&b?.target===a&&(0,c.peek)(d)||(this.#ei(),this.#d2=b,b&&(b.target=a||null),b&&a&&b.load(this.#F).then(a=>{this.scope&&(0,c.peek)(this.$state.loader)===b&&this.#F.notify("provider-change",a)}))}onDestroy(){this.#d2=null,this.#ei()}#ei(){this.#F?.notify("provider-change",null)}#dS(){if(!this.el)return;let{player:a,$state:b}=this.#F,d=this.el.offsetWidth,e=this.el.offsetHeight;a&&(b.mediaWidth.set(d),b.mediaHeight.set(e),a.el&&((0,c.setStyle)(a.el,"--media-width",d+"px"),(0,c.setStyle)(a.el,"--media-height",e+"px")))}#ef(){let a=[],b=[];for(let d of this.el.children)if(!d.hasAttribute("data-vds")){if(d instanceof HTMLSourceElement){let b={id:d.id,src:d.src,type:d.type};for(let a of["id","src","width","height","bitrate","codec"]){let e=d.getAttribute(`data-${a}`);(0,c.isString)(e)&&(b[a]=/id|src|codec/.test(a)?e:Number(e))}a.push(b)}else if(d instanceof HTMLTrackElement){let a={src:d.src,kind:d.track.kind,language:d.srclang,label:d.label,default:d.default,type:d.getAttribute("data-type")};b.push({id:d.id||aX.createId(a),...a})}}this.#d1.set(a),this.#eb.set(b),(0,c.tick)()}}let cT=cS.prototype;(0,c.method)(cT,"load");class cU extends c.Component{static props={translations:null};static state=new c.State({label:null,busy:!1});#F;#ej=!1;onSetup(){this.#F=a4()}onAttach(a){a.style.display="contents"}onConnect(a){a.setAttribute("data-media-announcer",""),bh(a,"role","status"),bh(a,"aria-live","polite");let{busy:b}=this.$state;this.setAttributes({"aria-busy":()=>b()?"true":null}),this.#ej=!0,(0,c.effect)(this.#at.bind(this)),(0,c.effect)(this.#dL.bind(this)),(0,c.effect)(this.#ek.bind(this)),(0,c.effect)(this.#el.bind(this)),(0,c.effect)(this.#em.bind(this)),(0,c.effect)(this.#en.bind(this)),(0,c.effect)(this.#eo.bind(this)),(0,c.tick)(),this.#ej=!1}#at(){let{paused:a}=this.#F.$state;this.#ep(a()?"Pause":"Play")}#el(){let{fullscreen:a}=this.#F.$state;this.#ep(a()?"Enter Fullscreen":"Exit Fullscreen")}#em(){let{pictureInPicture:a}=this.#F.$state;this.#ep(a()?"Enter PiP":"Exit PiP")}#ek(){let{textTrack:a}=this.#F.$state;this.#ep(a()?"Closed-Captions On":"Closed-Captions Off")}#dL(){let{muted:a,volume:b,audioGain:c}=this.#F.$state;this.#ep(a()||0===b()?"Mute":`${Math.round(b()*(c()??1)*100)}% ${this.#eq("Volume")}`)}#er=-1;#es=-1;#en(){let{seeking:a,currentTime:b}=this.#F.$state,d=a();this.#er>0?(window.clearTimeout(this.#es),this.#es=window.setTimeout(()=>{if(!this.scope)return;let a=(0,c.peek)(b),d=Math.abs(a-this.#er);if(d>=1){let b=a>=this.#er,c=co(d);this.#ep(`${this.#eq(b?"Seek Forward":"Seek Backward")} ${c}`)}this.#er=-1,this.#es=-1},300)):d&&(this.#er=(0,c.peek)(b))}#eq(a){let{translations:b}=this.$props;return b?.()?.[a||""]??a}#eo(){let{label:a,busy:b}=this.$state,d=this.#eq(a());if(this.#ej)return;b.set(!0);let e=window.setTimeout(()=>void b.set(!1),150);return this.el&&(0,c.setAttribute)(this.el,"aria-label",d),(0,c.isString)(d)&&this.dispatch("change",{detail:d}),()=>window.clearTimeout(e)}#ep(a){let{label:b}=this.$state;b.set(a)}}class cV extends c.Component{static props={hideDelay:2e3,hideOnMouseLeave:!1};#F;onSetup(){this.#F=a4(),(0,c.effect)(this.#et.bind(this))}onAttach(a){let{pictureInPicture:b,fullscreen:d}=this.#F.$state;(0,c.setStyle)(a,"pointer-events","none"),bh(a,"role","group"),this.setAttributes({"data-visible":this.#eu.bind(this),"data-fullscreen":d,"data-pip":b}),(0,c.effect)(()=>{this.dispatch("change",{detail:this.#eu()})}),(0,c.effect)(this.#ev.bind(this)),(0,c.effect)(()=>{let b=d();for(let d of["top","right","bottom","left"])(0,c.setStyle)(a,`padding-${d}`,b&&`env(safe-area-inset-${d})`)})}#ev(){if(!this.el)return;let{nativeControls:a}=this.#F.$state,b=a();(0,c.setAttribute)(this.el,"aria-hidden",b?"true":null),(0,c.setStyle)(this.el,"display",b?"none":null)}#et(){let{controls:a}=this.#F.player,{hideDelay:b,hideOnMouseLeave:c}=this.$props;a.defaultDelay=2e3===b()?this.#F.$props.controlsDelay():b(),a.hideOnMouseLeave=c()}#eu(){let{controlsVisible:a}=this.#F.$state;return a()}}class cW extends c.Component{onAttach(a){a.style.pointerEvents||(0,c.setStyle)(a,"pointer-events","auto")}}class cX extends c.ViewController{#ew;constructor(a){super(),this.#ew=a,(0,c.effect)(this.#ex.bind(this))}onDestroy(){this.#ey?.(),this.#ey=null}#ex(){let a=this.#ew.trigger();if(!a)return void this.hide();let b=this.show.bind(this),c=this.hide.bind(this);this.#ew.listen(a,b,c)}#ez=-1;#eA=-1;#ey=null;show(a){this.#eB(),window.cancelAnimationFrame(this.#eA),this.#eA=-1,this.#ey?.(),this.#ey=null,this.#ez=window.setTimeout(()=>{this.#ez=-1;let b=this.#ew.content();b&&b.style.removeProperty("display"),(0,c.peek)(()=>this.#ew.onChange(!0,a))},this.#ew.showDelay?.()??0)}hide(a){this.#eB(),(0,c.peek)(()=>this.#ew.onChange(!1,a)),this.#eA=requestAnimationFrame(()=>{this.#eB(),this.#eA=-1;let a=this.#ew.content();if(a){let b=()=>{a.style.display="none",this.#ey=null};if("none"!==getComputedStyle(a).animationName){this.#ey?.();let d=(0,c.listenEvent)(a,"animationend",b,{once:!0});this.#ey=d}else b()}})}#eB(){window.clearTimeout(this.#ez),this.#ez=-1}}let cY=(0,c.createContext)(),cZ=0;class c$ extends c.Component{static props={showDelay:700};#aS=`media-tooltip-${++cZ}`;#eC=(0,c.signal)(null);#eD=(0,c.signal)(null);#eE=(0,c.signal)(!1);constructor(){super(),new cH;const{showDelay:a}=this.$props;new cX({trigger:this.#eC,content:this.#eD,showDelay:a,listen(a,b,d){(0,c.effect)(()=>{cG()&&(0,c.listenEvent)(a,"focus",b),(0,c.listenEvent)(a,"blur",d)}),new c.EventsController(a).add("touchstart",a=>a.preventDefault(),{passive:!1}).add("mouseenter",b).add("mouseleave",d)},onChange:this.#eF.bind(this)})}onAttach(a){a.style.setProperty("display","contents")}onSetup(){(0,c.provideContext)(cY,{trigger:this.#eC,content:this.#eD,showing:this.#eE,attachTrigger:this.#eG.bind(this),detachTrigger:this.#eH.bind(this),attachContent:this.#eI.bind(this),detachContent:this.#eJ.bind(this)})}#eG(a){this.#eC.set(a);let b=a.getAttribute("data-media-tooltip");b&&this.el?.setAttribute(`data-media-${b}-tooltip`,""),(0,c.setAttribute)(a,"data-describedby",this.#aS)}#eH(a){a.removeAttribute("data-describedby"),a.removeAttribute("aria-describedby"),this.#eC.set(null)}#eI(a){a.setAttribute("id",this.#aS),a.style.display="none",bh(a,"role","tooltip"),this.#eD.set(a)}#eJ(a){a.removeAttribute("id"),a.removeAttribute("role"),this.#eD.set(null)}#eF(a){let b=this.#eC(),d=this.#eD();for(let e of(b&&(0,c.setAttribute)(b,"aria-describedby",a?this.#aS:null),[this.el,b,d]))e&&(0,c.setAttribute)(e,"data-visible",a);this.#eE.set(a)}}class c_ extends c.Component{constructor(){super(),new cH}onConnect(a){(0,c.onDispose)(bo(()=>{if(!this.connectScope)return;this.#eK();let a=(0,c.useContext)(cY);(0,c.onDispose)(()=>{let b=this.#eL();b&&a.detachTrigger(b)})}))}#eK(){let a=this.#eL(),b=(0,c.useContext)(cY);a&&b.attachTrigger(a)}#eL(){let a=this.el.firstElementChild;return a?.localName==="button"||a?.getAttribute("role")==="button"?a:this.el}}class c0 extends c.Component{static props={placement:"top center",offset:0,alignOffset:0};constructor(){super(),new cH;const{placement:a}=this.$props;this.setAttributes({"data-placement":a})}onAttach(a){this.#eK(a),Object.assign(a.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(a){this.#eK(a);let b=(0,c.useContext)(cY);(0,c.onDispose)(()=>b.detachContent(a)),(0,c.onDispose)(bo(()=>{this.connectScope&&(0,c.effect)(this.#eM.bind(this))}))}#eK(a){(0,c.useContext)(cY).attachContent(a)}#eM(){let{showing:a}=(0,c.useContext)(cY);if(!a())return;let{placement:b,offset:d,alignOffset:e}=this.$props;return bp(this.el,this.#eN(),b(),{offsetVarName:"media-tooltip",xOffset:e(),yOffset:d()})}#eN(){return(0,c.useContext)(cY).trigger()}}class c1 extends c.ViewController{static props={disabled:!1};#ew;constructor(a){super(),this.#ew=a,new cH,a.keyShortcut&&new bE(a.keyShortcut)}onSetup(){let{disabled:a}=this.$props;this.setAttributes({"data-pressed":this.#ew.isPresssed,"aria-pressed":this.#eO.bind(this),"aria-disabled":()=>a()?"true":null})}onAttach(a){bh(a,"tabindex","0"),bh(a,"role","button"),bh(a,"type","button")}onConnect(a){let b=bm(a,this.#eP.bind(this));for(let a of["click","touchstart"])b.add(a,this.#eQ.bind(this),{passive:!0})}#eO(){return(0,c.ariaBool)(this.#ew.isPresssed())}#eR(a){(0,c.isWriteSignal)(this.#ew.isPresssed)&&this.#ew.isPresssed.set(a=>!a)}#eP(a){if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){a.preventDefault(),a.stopImmediatePropagation();return}a.preventDefault(),(this.#ew.onPress??this.#eR).call(this,a)}#eQ(a){this.$props.disabled()&&(a.preventDefault(),a.stopImmediatePropagation())}}class c2 extends c.Component{static props={disabled:!1,defaultPressed:!1};#eS=(0,c.signal)(!1);get pressed(){return this.#eS()}constructor(){super(),new c1({isPresssed:this.#eS})}}let c3=c2.prototype;(0,c.prop)(c3,"pressed");class c4 extends c.Component{static props=c1.props;#F;constructor(){super(),new c1({isPresssed:this.#eT.bind(this),onPress:this.#eU.bind(this)})}onSetup(){this.#F=a4();let{canAirPlay:a,isAirPlayConnected:b}=this.#F.$state;this.setAttributes({"data-active":b,"data-supported":a,"data-state":this.#eV.bind(this),"aria-hidden":cw(()=>!a())})}onAttach(a){a.setAttribute("data-media-tooltip","airplay"),bi(a,this.#eW.bind(this))}#eU(a){this.#F.remote.requestAirPlay(a)}#eT(){let{remotePlaybackType:a,remotePlaybackState:b}=this.#F.$state;return"airplay"===a()&&"disconnected"!==b()}#eV(){let{remotePlaybackType:a,remotePlaybackState:b}=this.#F.$state;return"airplay"===a()&&b()}#eW(){let{remotePlaybackState:a}=this.#F.$state;return`AirPlay ${a()}`}}class c5 extends c.Component{static props=c1.props;#F;constructor(){super(),new c1({isPresssed:this.#eT.bind(this),onPress:this.#eU.bind(this)})}onSetup(){this.#F=a4();let{canGoogleCast:a,isGoogleCastConnected:b}=this.#F.$state;this.setAttributes({"data-active":b,"data-supported":a,"data-state":this.#eV.bind(this),"aria-hidden":cw(()=>!a())})}onAttach(a){a.setAttribute("data-media-tooltip","google-cast"),bi(a,this.#eW.bind(this))}#eU(a){this.#F.remote.requestGoogleCast(a)}#eT(){let{remotePlaybackType:a,remotePlaybackState:b}=this.#F.$state;return"google-cast"===a()&&"disconnected"!==b()}#eV(){let{remotePlaybackType:a,remotePlaybackState:b}=this.#F.$state;return"google-cast"===a()&&b()}#eW(){let{remotePlaybackState:a}=this.#F.$state;return`Google Cast ${a()}`}}class c6 extends c.Component{static props=c1.props;#F;constructor(){super(),new c1({isPresssed:this.#eT.bind(this),keyShortcut:"togglePaused",onPress:this.#eU.bind(this)})}onSetup(){this.#F=a4();let{paused:a,ended:b}=this.#F.$state;this.setAttributes({"data-paused":a,"data-ended":b})}onAttach(a){a.setAttribute("data-media-tooltip","play"),bi(a,"Play")}#eU(a){let b=this.#F.remote;this.#eT()?b.pause(a):b.play(a)}#eT(){let{paused:a}=this.#F.$state;return!a()}}class c7 extends c.Component{static props=c1.props;#F;constructor(){super(),new c1({isPresssed:this.#eT.bind(this),keyShortcut:"toggleCaptions",onPress:this.#eU.bind(this)})}onSetup(){this.#F=a4(),this.setAttributes({"data-active":this.#eT.bind(this),"data-supported":()=>!this.#eX(),"aria-hidden":cw(this.#eX.bind(this))})}onAttach(a){a.setAttribute("data-media-tooltip","caption"),bi(a,"Captions")}#eU(a){this.#F.remote.toggleCaptions(a)}#eT(){let{textTrack:a}=this.#F.$state,b=a();return!!b&&aZ(b)}#eX(){let{hasCaptions:a}=this.#F.$state;return!a()}}class c8 extends c.Component{static props={...c1.props,target:"prefer-media"};#F;constructor(){super(),new c1({isPresssed:this.#eT.bind(this),keyShortcut:"toggleFullscreen",onPress:this.#eU.bind(this)})}onSetup(){this.#F=a4();let{fullscreen:a}=this.#F.$state,b=this.#eY.bind(this);this.setAttributes({"data-active":a,"data-supported":b,"aria-hidden":cw(()=>!b())})}onAttach(a){a.setAttribute("data-media-tooltip","fullscreen"),bi(a,"Fullscreen")}#eU(a){let b=this.#F.remote,c=this.$props.target();this.#eT()?b.exitFullscreen(c,a):b.enterFullscreen(c,a)}#eT(){let{fullscreen:a}=this.#F.$state;return a()}#eY(){let{canFullscreen:a}=this.#F.$state;return a()}}class c9 extends c.Component{static props=c1.props;#F;constructor(){super(),new c1({isPresssed:this.#eT.bind(this),keyShortcut:"toggleMuted",onPress:this.#eU.bind(this)})}onSetup(){this.#F=a4(),this.setAttributes({"data-muted":this.#eT.bind(this),"data-state":this.#eV.bind(this)})}onAttach(a){a.setAttribute("data-media-mute-button",""),a.setAttribute("data-media-tooltip","mute"),bi(a,"Mute")}#eU(a){let b=this.#F.remote;this.#eT()?b.unmute(a):b.mute(a)}#eT(){let{muted:a,volume:b}=this.#F.$state;return a()||0===b()}#eV(){let{muted:a,volume:b}=this.#F.$state,c=b();return a()||0===c?"muted":c>=.5?"high":c<.5?"low":void 0}}class da extends c.Component{static props=c1.props;#F;constructor(){super(),new c1({isPresssed:this.#eT.bind(this),keyShortcut:"togglePictureInPicture",onPress:this.#eU.bind(this)})}onSetup(){this.#F=a4();let{pictureInPicture:a}=this.#F.$state,b=this.#eY.bind(this);this.setAttributes({"data-active":a,"data-supported":b,"aria-hidden":cw(()=>!b())})}onAttach(a){a.setAttribute("data-media-tooltip","pip"),bi(a,"PiP")}#eU(a){let b=this.#F.remote;this.#eT()?b.exitPictureInPicture(a):b.enterPictureInPicture(a)}#eT(){let{pictureInPicture:a}=this.#F.$state;return a()}#eY(){let{canPictureInPicture:a}=this.#F.$state;return a()}}class db extends c.Component{static props={disabled:!1,seconds:30};#F;constructor(){super(),new cH}onSetup(){this.#F=a4();let{seeking:a}=this.#F.$state,{seconds:b}=this.$props,c=this.#eY.bind(this);this.setAttributes({seconds:b,"data-seeking":a,"data-supported":c,"aria-hidden":cw(()=>!c())})}onAttach(a){bh(a,"tabindex","0"),bh(a,"role","button"),bh(a,"type","button"),a.setAttribute("data-media-tooltip","seek"),bi(a,this.#eW.bind(this))}onConnect(a){bm(a,this.#eU.bind(this))}#eY(){let{canSeek:a}=this.#F.$state;return a()}#eW(){let{seconds:a}=this.$props;return`Seek ${a()>0?"forward":"backward"} ${a()} seconds`}#eU(a){let{seconds:b,disabled:c}=this.$props;if(c())return;let{currentTime:d}=this.#F.$state,e=d()+b();this.#F.remote.seek(e,a)}}class dc extends c.Component{static props={disabled:!1};#F;constructor(){super(),new cH}onSetup(){this.#F=a4();let{disabled:a}=this.$props,{live:b,liveEdge:c}=this.#F.$state,d=()=>!b();this.setAttributes({"data-edge":c,"data-hidden":d,"aria-disabled":cw(()=>a()||c()),"aria-hidden":cw(d)})}onAttach(a){bh(a,"tabindex","0"),bh(a,"role","button"),bh(a,"type","button"),a.setAttribute("data-media-tooltip","live")}onConnect(a){bm(a,this.#eU.bind(this))}#eU(a){let{disabled:b}=this.$props,{liveEdge:c}=this.#F.$state;b()||c()||this.#F.remote.seekToLiveEdge(a)}}let dd=new c.State({min:0,max:100,value:0,step:1,pointerValue:0,focused:!1,dragging:!1,pointing:!1,hidden:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return de(this.min,this.max,this.value)},get fillPercent(){return 100*this.fillRate},get pointerRate(){return de(this.min,this.max,this.pointerValue)},get pointerPercent(){return 100*this.pointerRate}});function de(a,b,c){let d=b-a;return d>0?(c-a)/d:0}class df extends c.ViewController{#ar;#eZ;constructor(a){super(),this.#ar=a}onConnect(a){this.#eZ=new IntersectionObserver(a=>{this.#ar.callback?.(a,this.#eZ)},this.#ar),this.#eZ.observe(a),(0,c.onDispose)(this.#aD.bind(this))}#aD(){this.#eZ?.disconnect(),this.#eZ=void 0}}let dg=(0,c.createContext)(),dh=(0,c.createContext)(),di={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1};class dj extends c.ViewController{#ew;#F;#eZ;constructor(a,b){super(),this.#ew=a,this.#F=b}onSetup(){(0,c.hasProvidedContext)(dh)&&(this.#eZ=(0,c.useContext)(dh))}onConnect(a){(0,c.effect)(this.#e$.bind(this,a)),(0,c.effect)(this.#e_.bind(this,a)),this.#ew.swipeGesture&&(0,c.effect)(this.#e0.bind(this))}#e0(){let{pointer:a}=this.#F.$state;if("coarse"!==a()||!this.#ew.swipeGesture()){this.#aV=null;return}this.#aV=this.#F.player.el?.querySelector("media-provider,[data-media-provider]"),this.#aV&&new c.EventsController(this.#aV).add("touchstart",this.#e1.bind(this),{passive:!0}).add("touchmove",this.#e2.bind(this),{passive:!1})}#aV=null;#e3=null;#e4=null;#e1(a){this.#e3=a.touches[0]}#e2(a){if((0,c.isNull)(this.#e3)||bn(a))return;let b=a.touches[0],d=b.clientX-this.#e3.clientX,e=b.clientY-this.#e3.clientY,f=this.$state.dragging();!f&&Math.abs(e)>5||!f&&(a.preventDefault(),Math.abs(d)>20&&(this.#e3=b,this.#e4=this.$state.value(),this.#e5(this.#e4,a)))}#e$(a){let{hidden:b}=this.$props;(0,c.listenEvent)(a,"focus",this.#dE.bind(this)),b()||this.#ew.isDisabled()||new c.EventsController(a).add("keyup",this.#_.bind(this)).add("keydown",this.#aa.bind(this)).add("pointerenter",this.#dC.bind(this)).add("pointermove",this.#e6.bind(this)).add("pointerleave",this.#dD.bind(this)).add("pointerdown",this.#e7.bind(this))}#e_(a){!this.#ew.isDisabled()&&this.$state.dragging()&&new c.EventsController(document).add("pointerup",this.#e8.bind(this),{capture:!0}).add("pointermove",this.#e9.bind(this)).add("touchmove",this.#fa.bind(this),{passive:!1})}#dE(){this.#fb(this.$state.value())}#fc(a,b){let{value:c,min:d,max:e,dragging:f}=this.$state,g=Math.max(d(),Math.min(a,e()));c.set(g);let h=this.createEvent("value-change",{detail:g,trigger:b});if(this.dispatch(h),this.#ew.onValueChange?.(h),f()){let a=this.createEvent("drag-value-change",{detail:g,trigger:b});this.dispatch(a),this.#ew.onDragValueChange?.(a)}}#fb(a,b){let{pointerValue:c,dragging:d}=this.$state;c.set(a),this.dispatch("pointer-value-change",{detail:a,trigger:b}),d()&&this.#fc(a,b)}#fd(a){var b,d,e,f;let g,h,i=this.el.getBoundingClientRect(),{min:j,max:k}=this.$state;if("vertical"===this.$props.orientation()){let{bottom:b,height:c}=i;h=(b-a.clientY)/c}else if(this.#e3&&(0,c.isNumber)(this.#e4)){let{width:b}=this.#aV.getBoundingClientRect(),c=(a.clientX-this.#e3.clientX)/b,d=k()-j(),e=d*Math.abs(c);h=(c<0?this.#e4-e:this.#e4+e)/d}else{let{left:b,width:c}=i;h=(a.clientX-b)/c}return Math.max(j(),Math.min(k(),this.#ew.roundValue((b=j(),d=k(),e=h,g=(f=this.#ew.getStep())*Math.round((d-b)*be(0,e,1)/f),b+g))))}#dC(a){this.$state.pointing.set(!0)}#e6(a){let{dragging:b}=this.$state;b()||this.#fb(this.#fd(a),a)}#dD(a){this.$state.pointing.set(!1)}#e7(a){if(0!==a.button)return;let b=this.#fd(a);this.#e5(b,a),this.#fb(b,a)}#e5(a,b){let{dragging:c}=this.$state;if(c())return;c.set(!0),this.#F.remote.pauseControls(b);let d=this.createEvent("drag-start",{detail:a,trigger:b});this.dispatch(d),this.#ew.onDragStart?.(d),this.#eZ?.onDragStart?.()}#fe(a,b){let{dragging:c}=this.$state;if(!c())return;c.set(!1),this.#F.remote.resumeControls(b);let d=this.createEvent("drag-end",{detail:a,trigger:b});this.dispatch(d),this.#ew.onDragEnd?.(d),this.#e3=null,this.#e4=null,this.#eZ?.onDragEnd?.()}#ff;#fg=!1;#aa(a){if(!Object.keys(di).includes(a.key))return;let{key:b}=a,d=this.#fh(a);if(!(0,c.isNull)(d)){this.#fb(d,a),this.#fc(d,a);return}let e=this.#fi(a);this.#fg||(this.#fg=b===this.#ff,!this.$state.dragging()&&this.#fg&&this.#e5(e,a)),this.#fb(e,a),this.#ff=b}#_(a){if(!Object.keys(di).includes(a.key)||!(0,c.isNull)(this.#fh(a)))return;let b=this.#fg?this.$state.pointerValue():this.#fi(a);this.#fc(b,a),this.#fe(b,a),this.#ff="",this.#fg=!1}#fh(a){let b=a.key,{min:c,max:d}=this.$state;return"Home"===b||"PageUp"===b?c():"End"===b||"PageDown"===b?d():!a.metaKey&&/^[0-9]$/.test(b)?(d()-c())/10*Number(b):null}#fi(a){let{key:b,shiftKey:c}=a;a.preventDefault(),a.stopPropagation();let{shiftKeyMultiplier:d}=this.$props,{min:e,max:f,value:g,pointerValue:h}=this.$state,i=this.#ew.getStep(),j=this.#ew.getKeyStep(),k=c?j*d():j,l=Number(di[b]),m=this.#fg?h():this.#ew.getValue?.()??g();return Math.max(e(),Math.min(f(),Number(((m+k*l)/i*i).toFixed(3))))}#e8(a){if(0!==a.button)return;a.preventDefault(),a.stopImmediatePropagation();let b=this.#fd(a);this.#fb(b,a),this.#fe(b,a)}#fa(a){a.preventDefault()}#e9=(0,c.functionThrottle)(a=>{this.#fb(this.#fd(a),a)},20,{leading:!0})}let dk=(0,c.createContext)(()=>({}));class dl extends c.ViewController{static props={hidden:!1,disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};#F;#ew;#fj=(0,c.signal)(!0);#fk=(0,c.signal)(!0);constructor(a){super(),this.#ew=a}onSetup(){this.#F=a4();let a=new cH;a.attach(this),this.$state.focused=a.focused.bind(a),(0,c.hasProvidedContext)(dk)||(0,c.provideContext)(dk,{default:"value"}),(0,c.provideContext)(dg,{orientation:this.$props.orientation,disabled:this.#ew.isDisabled,preview:(0,c.signal)(null)}),(0,c.effect)(this.#fl.bind(this)),(0,c.effect)(this.#fm.bind(this)),(0,c.effect)(this.#fn.bind(this)),this.#fo(),new dj(this.#ew,this.#F).attach(this),new df({callback:this.#fp.bind(this)}).attach(this)}onAttach(a){bh(a,"role","slider"),bh(a,"tabindex","0"),bh(a,"autocomplete","off"),ak?this.#fq():(0,c.effect)(this.#fq.bind(this))}onConnect(a){(0,c.onDispose)(bk(a,this.#fj.set)),(0,c.effect)(this.#fr.bind(this))}#fp(a){this.#fk.set(a[0].isIntersecting)}#fr(){let{hidden:a}=this.$props;this.$state.hidden.set(a()||!this.#fj()||!this.#fk.bind(this))}#fl(){let{dragging:a,value:b,min:d,max:e}=this.$state;if(!(0,c.peek)(a)){var f,g;b.set((f=d(),g=e(),be(f,bc(b(),bd(this.#ew.getStep())),g)))}}#fm(){this.$state.step.set(this.#ew.getStep())}#fn(){if(!this.#ew.isDisabled())return;let{dragging:a,pointing:b}=this.$state;a.set(!1),b.set(!1)}#fs(){return(0,c.ariaBool)(this.#ew.isDisabled())}#fo(){let{orientation:a}=this.$props,{dragging:b,active:c,pointing:d}=this.$state;this.setAttributes({"data-dragging":b,"data-pointing":d,"data-active":c,"aria-disabled":this.#fs.bind(this),"aria-valuemin":this.#ew.aria.valueMin??this.$state.min,"aria-valuemax":this.#ew.aria.valueMax??this.$state.max,"aria-valuenow":this.#ew.aria.valueNow,"aria-valuetext":this.#ew.aria.valueText,"aria-orientation":a})}#fq(){let{fillPercent:a,pointerPercent:b}=this.$state;this.#ft(bc(a(),3),bc(b(),3))}#ft=(0,c.animationFrameThrottle)((a,b)=>{this.el?.style.setProperty("--slider-fill",a+"%"),this.el?.style.setProperty("--slider-pointer",b+"%")})}class dm extends c.Component{static props={...dl.props,min:0,max:100,value:0};static state=dd;constructor(){super(),new dl({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.$props.disabled,aria:{valueNow:this.#fu.bind(this),valueText:this.#fv.bind(this)}})}onSetup(){(0,c.effect)(this.#fl.bind(this)),(0,c.effect)(this.#fw.bind(this))}#fu(){let{value:a}=this.$state;return Math.round(a())}#fv(){let{value:a,max:b}=this.$state;return bc(a()/b()*100,2)+"%"}#fl(){let{value:a}=this.$props;this.$state.value.set(a())}#fw(){let{min:a,max:b}=this.$props;this.$state.min.set(a()),this.$state.max.set(b())}}let dn=new Map,dp=new Map;class dq{#F;#fx;#fy;$images=(0,c.signal)([]);static create(a,b){return new dq(a,b,a4())}constructor(a,b,d){this.#fx=a,this.#fy=b,this.#F=d,(0,c.effect)(this.#fz.bind(this))}#fz(){let{canLoad:b}=this.#F.$state;if(!b())return;let d=this.#fx();if(d){if((0,c.isString)(d)&&dn.has(d)){let a=dn.get(d);if(dn.delete(d),dn.set(d,a),dn.size>99){let a=dn.keys().next().value;dn.delete(a)}this.$images.set(dn.get(d))}else if((0,c.isString)(d)){let b=this.#fy(),e=d+"::"+b;if(!dp.has(e)){let f=new Promise(async(e,f)=>{try{let g=await fetch(d,{credentials:aS(b)});if("application/json"===g.headers.get("content-type")){let a=await g.json();if((0,c.isArray)(a))if(a[0]&&"text"in a[0])e(this.#fA(a));else{for(let b=0;b<a.length;b++){let d=a[b];cb((0,c.isObject)(d),!1),cb("url"in d&&(0,c.isString)(d.url),!1),cb("startTime"in d&&(0,c.isNumber)(d.startTime),!1)}e(a)}else e(this.#fB(a));return}a.A(30642).then(async({parseResponse:a})=>{try{let{cues:b}=await a(g);e(this.#fA(b))}catch(a){f(a)}})}catch(a){f(a)}}).then(a=>(dn.set(e,a),a)).catch(a=>{this.#aC(d,a)}).finally(()=>{(0,c.isString)(e)&&dp.delete(e)});dp.set(e,f)}dp.get(e)?.then(a=>{this.$images.set(a||[])})}else if((0,c.isArray)(d))try{this.$images.set(this.#fC(d))}catch(a){this.#aC(d,a)}else try{this.$images.set(this.#fB(d))}catch(a){this.#aC(d,a)}return()=>{this.$images.set([])}}}#fC(a){let b=this.#fD();return a.map((a,d)=>(cb(a.url&&(0,c.isString)(a.url)),cb("startTime"in a&&(0,c.isNumber)(a.startTime)),{...a,url:(0,c.isString)(a.url)?this.#fE(a.url,b):a.url}))}#fB(a){cb((0,c.isString)(a.url)),cb((0,c.isArray)(a.tiles)&&a.tiles?.length);let b=new URL(a.url),d=[],e="tile_width"in a?a.tile_width:a.tileWidth,f="tile_height"in a?a.tile_height:a.tileHeight;for(let c of a.tiles)d.push({url:b,startTime:"start"in c?c.start:c.startTime,width:e,height:f,coords:{x:c.x,y:c.y}});return d}#fA(a){for(let b=0;b<a.length;b++){let d=a[b];cb("startTime"in d&&(0,c.isNumber)(d.startTime)),cb("text"in d&&(0,c.isString)(d.text))}let b=[],d=this.#fD();for(let e of a){let[a,f]=e.text.split("#"),g=this.#fF(f);b.push({url:this.#fE(a,d),startTime:e.startTime,endTime:e.endTime,width:g?.w,height:g?.h,coords:g&&(0,c.isNumber)(g.x)&&(0,c.isNumber)(g.y)?{x:g.x,y:g.y}:void 0})}return b}#fD(){let a=(0,c.peek)(this.#fx);return(0,c.isString)(a)&&/^https?:/.test(a)?a:location.href}#fE(a,b){return/^https?:/.test(a)?new URL(a):new URL(a,b)}#fF(a){if(!a)return{};let[b,c]=a.split("="),d=c?.split(","),e={};if(!b||!d)return null;for(let a=0;a<b.length;a++){let c=+d[a];isNaN(c)||(e[b[a]]=c)}return e}#aC(a,b){}}class dr extends c.Component{static props={src:null,time:0,crossOrigin:null};static state=new c.State({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1});media;#d2;#fG=[];onSetup(){this.media=a4(),this.#d2=dq.create(this.$props.src,this.$state.crossOrigin),this.#dm(),this.setAttributes({"data-loading":this.#fH.bind(this),"data-error":this.#fI.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":cw(this.$state.hidden)})}onConnect(a){(0,c.effect)(this.#fJ.bind(this)),(0,c.effect)(this.#fr.bind(this)),(0,c.effect)(this.#dm.bind(this)),(0,c.effect)(this.#ba.bind(this)),(0,c.effect)(this.#fK.bind(this)),(0,c.effect)(this.#fL.bind(this))}#fJ(){let a=this.$state.img();a&&new c.EventsController(a).add("load",this.#cc.bind(this)).add("error",this.#aC.bind(this))}#dm(){let{crossOrigin:a}=this.$props,{crossOrigin:b}=this.$state,{crossOrigin:c}=this.media.$state,d=null!==a()?a():c();b.set(!0===d?"anonymous":d)}#ba(){let{src:a,loading:b,error:c}=this.$state;return a()&&(b.set(!0),c.set(null)),()=>{this.#fM(),b.set(!1),c.set(null)}}#cc(){let{loading:a,error:b}=this.$state;this.#fL(),a.set(!1),b.set(null)}#aC(a){let{loading:b,error:c}=this.$state;b.set(!1),c.set(a)}#fH(){let{loading:a,hidden:b}=this.$state;return!b()&&a()}#fI(){let{error:a}=this.$state;return!(0,c.isNull)(a())}#fr(){let{hidden:a}=this.$state,{duration:b}=this.media.$state,c=this.#d2.$images();a.set(this.#fI()||!Number.isFinite(b())||0===c.length)}getTime(){return this.$props.time()}#fK(){let a=this.#d2.$images();if(!a.length)return;let b=this.getTime(),{src:c,activeThumbnail:d}=this.$state,e=-1,f=null;for(let c=a.length-1;c>=0;c--){let d=a[c];if(b>=d.startTime&&(!d.endTime||b<d.endTime)){e=c;break}}a[e]&&(f=a[e]),d.set(f),c.set(f?.url.href||"")}#fL(){if(!this.scope||this.$state.hidden())return;let a=this.el,b=this.$state.img(),c=this.$state.activeThumbnail();if(!b||!c||!a)return;let d=c.width??b.naturalWidth,e=c?.height??b.naturalHeight,{maxWidth:f,maxHeight:g,minWidth:h,minHeight:i,width:j,height:k}=getComputedStyle(this.el);"100%"===h&&(h=parseFloat(j)+""),"100%"===i&&(i=parseFloat(k)+"");let l=Math.max(parseInt(h)/d,parseInt(i)/e),m=Math.min(Math.max(parseInt(h),parseInt(f))/d,Math.max(parseInt(i),parseInt(g))/e),n=!isNaN(m)&&m<1?m:l>1?l:1;this.#fN(a,"--thumbnail-width",`${d*n}px`),this.#fN(a,"--thumbnail-height",`${e*n}px`),this.#fN(a,"--thumbnail-aspect-ratio",String(bc(d/e,5))),this.#fN(b,"width",`${b.naturalWidth*n}px`),this.#fN(b,"height",`${b.naturalHeight*n}px`),this.#fN(b,"transform",c.coords?`translate(-${c.coords.x*n}px, -${c.coords.y*n}px)`:""),this.#fN(b,"max-width","none")}#fN(a,b,c){a.style.setProperty(b,c),this.#fG.push(()=>a.style.removeProperty(b))}#fM(){for(let a of this.#fG)a();this.#fG=[]}}class ds extends dr{#fO;onAttach(a){this.#fO=(0,c.useState)(dm.state)}getTime(){let{duration:a,clipStartTime:b}=this.media.$state;return b()+this.#fO.pointerRate()*a()}}class dt extends c.Component{static props={src:null,crossOrigin:null};static state=new c.State({video:null,src:null,crossOrigin:null,canPlay:!1,error:null,hidden:!1});#F;#fO;get video(){return this.$state.video()}onSetup(){this.#F=a4(),this.#fO=(0,c.useState)(dm.state),this.#dm(),this.setAttributes({"data-loading":this.#fH.bind(this),"data-hidden":this.$state.hidden,"data-error":this.#fI.bind(this),"aria-hidden":cw(this.$state.hidden)})}onAttach(a){(0,c.effect)(this.#fP.bind(this)),(0,c.effect)(this.#fQ.bind(this)),(0,c.effect)(this.#dm.bind(this)),(0,c.effect)(this.#fr.bind(this)),(0,c.effect)(this.#fR.bind(this)),(0,c.effect)(this.#fS.bind(this))}#fP(){let a=this.$state.video();a&&(a.readyState>=2&&this.#bh(),new c.EventsController(a).add("canplay",this.#bh.bind(this)).add("error",this.#aC.bind(this)))}#fQ(){let{src:a}=this.$state,{canLoad:b}=this.#F.$state;a.set(b()?this.$props.src():null)}#dm(){let{crossOrigin:a}=this.$props,{crossOrigin:b}=this.$state,{crossOrigin:c}=this.#F.$state,d=null!==a()?a():c();b.set(!0===d?"anonymous":d)}#fH(){let{canPlay:a,hidden:b}=this.$state;return!a()&&!b()}#fI(){let{error:a}=this.$state;return!(0,c.isNull)(a)}#fr(){let{src:a,hidden:b}=this.$state,{canLoad:c,duration:d}=this.#F.$state;b.set(c()&&(!a()||this.#fI()||!Number.isFinite(d())))}#fR(){let{src:a,canPlay:b,error:c}=this.$state;a(),b.set(!1),c.set(null)}#bh(a){let{canPlay:b,error:c}=this.$state;b.set(!0),c.set(null),this.dispatch("can-play",{trigger:a})}#aC(a){let{canPlay:b,error:c}=this.$state;b.set(!1),c.set(a),this.dispatch("error",{trigger:a})}#fS(){let{video:a,canPlay:b}=this.$state,{duration:c}=this.#F.$state,{pointerRate:d}=this.#fO,e=a();b()&&e&&Number.isFinite(c())&&Number.isFinite(d())&&(e.currentTime=d()*c())}}let du=dt.prototype;(0,c.prop)(du,"video");class dv extends c.Component{static props={type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2};#fT;#fU;#fO;onSetup(){this.#fO=(0,c.useState)(dm.state),this.#fT=(0,c.useContext)(dk),this.#fU=(0,c.computed)(this.getValueText.bind(this))}getValueText(){let{type:a,format:b,decimalPlaces:c,padHours:d,padMinutes:e,showHours:f,showMs:g}=this.$props,{value:h,pointerValue:i,min:j,max:k}=this.#fO,l=b?.()??this.#fT.default,m="current"===a()?h():i();if("percent"===l){let a=m/(k()-j())*100;return(this.#fT.percent??bc)(a,c())+"%"}return"time"===l?(this.#fT.time??cn)(m,{padHrs:d(),padMins:e(),showHrs:f(),showMs:g()}):(this.#fT.value?.(m)??m.toFixed(2))+""}}let dw=dv.prototype;(0,c.method)(dw,"getValueText");class dx extends c.Component{static props={offset:0,noClamp:!1};#fO;onSetup(){this.#fO=(0,c.useContext)(dg);let{active:a}=(0,c.useState)(dm.state);this.setAttributes({"data-visible":a})}onAttach(a){Object.assign(a.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(a){let{preview:b}=this.#fO;b.set(a),(0,c.onDispose)(()=>b.set(null)),(0,c.effect)(this.#fV.bind(this));let d=new ResizeObserver(this.#fV.bind(this));d.observe(a),(0,c.onDispose)(()=>d.disconnect())}#fV=(0,c.animationFrameThrottle)(()=>{let{disabled:a,orientation:b}=this.#fO;if(a())return;let c=this.el,{offset:d,noClamp:e}=this.$props;c&&dy(c,{clamp:!e(),offset:d(),orientation:b()})})}function dy(a,{clamp:b,offset:c,orientation:d}){let e=getComputedStyle(a),f=parseFloat(e.width),g=parseFloat(e.height),h={top:null,right:null,bottom:null,left:null};if(h["horizontal"===d?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${c}px))`,"horizontal"===d){let a=f/2;if(b){let b=`max(0px, calc(var(--slider-pointer) - ${a}px))`,c=`calc(100% - ${f}px)`;h.left=`min(${b}, ${c})`}else h.left=`calc(var(--slider-pointer) - ${a}px)`}else{let a=g/2;if(b){let b=`max(${a}px, calc(var(--slider-pointer) - ${a}px))`,c=`calc(100% - ${g}px)`;h.bottom=`min(${b}, ${c})`}else h.bottom=`calc(var(--slider-pointer) - ${a}px)`}Object.assign(a.style,h)}class dz extends c.Component{static props={...dl.props,keyStep:5,shiftKeyMultiplier:2};static state=dd;#F;onSetup(){this.#F=a4();let{audioGain:a}=this.#F.$state;(0,c.provideContext)(dk,{default:"percent",value:b=>(b*(a()??1)).toFixed(2),percent:b=>Math.round(b*(a()??1))}),new dl({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#fW.bind(this),aria:{valueMax:this.#fX.bind(this),valueNow:this.#fu.bind(this),valueText:this.#fv.bind(this)},onDragValueChange:this.#fY.bind(this),onValueChange:this.#fZ.bind(this)}).attach(this),(0,c.effect)(this.#dL.bind(this))}onAttach(a){a.setAttribute("data-media-volume-slider",""),bh(a,"aria-label","Volume");let{canSetVolume:b}=this.#F.$state;this.setAttributes({"data-supported":b,"aria-hidden":cw(()=>!b())})}#fu(){let{value:a}=this.$state,{audioGain:b}=this.#F.$state;return Math.round(a()*(b()??1))}#fv(){let{value:a,max:b}=this.$state,{audioGain:c}=this.#F.$state;return bc(a()/b()*(c()??1)*100,2)+"%"}#fX(){let{audioGain:a}=this.#F.$state;return this.$state.max()*(a()??1)}#fW(){let{disabled:a}=this.$props,{canSetVolume:b}=this.#F.$state;return a()||!b()}#dL(){let{muted:a,volume:b}=this.#F.$state,c=a()?0:100*b();this.$state.value.set(c),this.dispatch("value-change",{detail:c})}#f$=(0,c.functionThrottle)(this.#bd.bind(this),25);#bd(a){if(!a.trigger)return;let b=bc(a.detail/100,3);this.#F.remote.changeVolume(b,a)}#fZ(a){this.#f$(a)}#fY(a){this.#f$(a)}}class dA extends c.Component{static props={...dl.props,step:25,keyStep:25,shiftKeyMultiplier:2,min:0,max:300};static state=dd;#F;onSetup(){this.#F=a4(),(0,c.provideContext)(dk,{default:"percent",percent:(a,b)=>bc(this.$state.value(),b)+"%"}),new dl({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#fW.bind(this),aria:{valueNow:this.#fu.bind(this),valueText:this.#fv.bind(this)},onDragValueChange:this.#fY.bind(this),onValueChange:this.#fZ.bind(this)}).attach(this),(0,c.effect)(this.#fw.bind(this)),(0,c.effect)(this.#f_.bind(this))}onAttach(a){a.setAttribute("data-media-audio-gain-slider",""),bh(a,"aria-label","Audio Boost");let{canSetAudioGain:b}=this.#F.$state;this.setAttributes({"data-supported":b,"aria-hidden":cw(()=>!b())})}#fu(){let{value:a}=this.$state;return Math.round(a())}#fv(){let{value:a}=this.$state;return a()+"%"}#fw(){let{min:a,max:b}=this.$props;this.$state.min.set(a()),this.$state.max.set(b())}#f_(){let{audioGain:a}=this.#F.$state,b=((a()??1)-1)*100;this.$state.value.set(b),this.dispatch("value-change",{detail:b})}#fW(){let{disabled:a}=this.$props,{canSetAudioGain:b}=this.#F.$state;return a()||!b()}#f0(a){if(!a.trigger)return;let b=bc(1+a.detail/100,2);this.#F.remote.changeAudioGain(b,a)}#fZ(a){this.#f0(a)}#fY(a){this.#f0(a)}}class dB extends c.Component{static props={...dl.props,step:.25,keyStep:.25,shiftKeyMultiplier:2,min:0,max:2};static state=dd;#F;onSetup(){this.#F=a4(),new dl({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:this.#f1,isDisabled:this.#fW.bind(this),aria:{valueNow:this.#fu.bind(this),valueText:this.#fv.bind(this)},onDragValueChange:this.#fY.bind(this),onValueChange:this.#fZ.bind(this)}).attach(this),(0,c.effect)(this.#fw.bind(this)),(0,c.effect)(this.#dN.bind(this))}onAttach(a){a.setAttribute("data-media-speed-slider",""),bh(a,"aria-label","Speed");let{canSetPlaybackRate:b}=this.#F.$state;this.setAttributes({"data-supported":b,"aria-hidden":cw(()=>!b())})}#fu(){let{value:a}=this.$state;return a()}#fv(){let{value:a}=this.$state;return a()+"x"}#fw(){let{min:a,max:b}=this.$props;this.$state.min.set(a()),this.$state.max.set(b())}#dN(){let{playbackRate:a}=this.#F.$state,b=a();this.$state.value.set(b),this.dispatch("value-change",{detail:b})}#f1(a){return bc(a,2)}#fW(){let{disabled:a}=this.$props,{canSetPlaybackRate:b}=this.#F.$state;return a()||!b()}#f2=(0,c.functionThrottle)(this.#f3.bind(this),25);#f3(a){if(!a.trigger)return;let b=a.detail;this.#F.remote.changePlaybackRate(b,a)}#fZ(a){this.#f2(a)}#fY(a){this.#f2(a)}}class dC extends c.Component{static props={...dl.props,step:1,keyStep:1,shiftKeyMultiplier:1};static state=dd;#F;#f4=(0,c.computed)(()=>{let{qualities:a}=this.#F.$state;return bw(a())});onSetup(){this.#F=a4(),new dl({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#fW.bind(this),aria:{valueNow:this.#fu.bind(this),valueText:this.#fv.bind(this)},onDragValueChange:this.#fY.bind(this),onValueChange:this.#fZ.bind(this)}).attach(this),(0,c.effect)(this.#f5.bind(this)),(0,c.effect)(this.#f6.bind(this))}onAttach(a){a.setAttribute("data-media-quality-slider",""),bh(a,"aria-label","Video Quality");let{qualities:b,canSetQuality:d}=this.#F.$state,e=(0,c.computed)(()=>d()&&b().length>0);this.setAttributes({"data-supported":e,"aria-hidden":cw(()=>!e())})}#fu(){let{value:a}=this.$state;return a()}#fv(){let{quality:a}=this.#F.$state;if(!a())return"";let{height:b,bitrate:c}=a(),d=c&&c>0?`${(c/1e6).toFixed(2)} Mbps`:null;return b?`${b}p${d?` (${d})`:""}`:"Auto"}#f5(){let a=this.#f4();this.$state.max.set(Math.max(0,a.length-1))}#f6(){let{quality:a}=this.#F.$state,b=Math.max(0,this.#f4().indexOf(a()));this.$state.value.set(b),this.dispatch("value-change",{detail:b})}#fW(){let{disabled:a}=this.$props,{canSetQuality:b,qualities:c}=this.#F.$state;return a()||c().length<=1||!b()}#f7=(0,c.functionThrottle)(this.#bU.bind(this),25);#bU(a){if(!a.trigger)return;let{qualities:b}=this.#F,d=(0,c.peek)(this.#f4)[a.detail];this.#F.remote.changeQuality(b.indexOf(d),a)}#fZ(a){this.#f7(a)}#fY(a){this.#f7(a)}}class dD extends c.Component{static props={...dl.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100};static state=dd;#F;#f8;#f9=(0,c.signal)(null);constructor(){super();const{noSwipeGesture:a}=this.$props;new dl({swipeGesture:()=>!a(),getValue:this.#ga.bind(this),getStep:this.#gb.bind(this),getKeyStep:this.#gc.bind(this),roundValue:this.#f1,isDisabled:this.#fW.bind(this),aria:{valueNow:this.#fu.bind(this),valueText:this.#fv.bind(this)},onDragStart:this.#gd.bind(this),onDragValueChange:this.#fY.bind(this),onDragEnd:this.#ge.bind(this),onValueChange:this.#fZ.bind(this)})}onSetup(){this.#F=a4(),(0,c.provideContext)(dk,{default:"time",value:this.#gf.bind(this),time:this.#gg.bind(this)}),this.setAttributes({"data-chapters":this.#gh.bind(this)}),this.setStyles({"--slider-progress":this.#gi.bind(this)}),(0,c.effect)(this.#dM.bind(this)),(0,c.effect)(this.#gj.bind(this))}onAttach(a){a.setAttribute("data-media-time-slider",""),bh(a,"aria-label","Seek")}onConnect(a){(0,c.effect)(this.#gk.bind(this)),aW(this.#F.textTracks,"chapters",this.#f9.set)}#gi(){let{bufferedEnd:a,duration:b}=this.#F.$state;return bc(100*Math.min(a()/Math.max(b(),1),1),3)+"%"}#gh(){let{duration:a}=this.#F.$state;return this.#f9()?.cues.length&&Number.isFinite(a())&&a()>0}#gj(){this.#f8=(0,c.functionThrottle)(this.#ag.bind(this),this.$props.seekingRequestThrottle())}#dM(){if(this.$state.hidden())return;let{value:a,dragging:b}=this.$state,d=this.#ga();(0,c.peek)(b)||(a.set(d),this.dispatch("value-change",{detail:d}))}#gk(){let a=this.#F.player.el,{preview:b}=(0,c.useContext)(dg);a&&b()&&(0,c.setAttribute)(a,"data-preview",this.$state.active())}#ag(a,b){this.#F.remote.seeking(a,b)}#gl(a,b,c){this.#f8.cancel();let{live:d}=this.#F.$state;d()&&b>=99?this.#F.remote.seekToLiveEdge(c):this.#F.remote.seek(a,c)}#gm=!1;#gd(a){let{pauseWhileDragging:b}=this.$props;if(b()){let{paused:b}=this.#F.$state;this.#gm=!b(),this.#F.remote.pause(a)}}#fY(a){this.#f8(this.#gn(a.detail),a)}#ge(a){let{seeking:b}=this.#F.$state;(0,c.peek)(b)||this.#ag(this.#gn(a.detail),a);let d=a.detail;this.#gl(this.#gn(d),d,a);let{pauseWhileDragging:e}=this.$props;e()&&this.#gm&&(this.#F.remote.play(a),this.#gm=!1)}#fZ(a){let{dragging:b}=this.$state;!b()&&a.trigger&&this.#ge(a)}#ga(){let{currentTime:a}=this.#F.$state;return this.#go(a())}#gb(){let a=this.$props.step()/this.#F.$state.duration()*100;return Number.isFinite(a)?a:1}#gc(){let a=this.$props.keyStep()/this.#F.$state.duration()*100;return Number.isFinite(a)?a:1}#f1(a){return bc(a,3)}#fW(){let{disabled:a}=this.$props,{canSeek:b}=this.#F.$state;return a()||!b()}#fu(){let{value:a}=this.$state;return Math.round(a())}#fv(){let a=this.#gn(this.$state.value()),{duration:b}=this.#F.$state;return Number.isFinite(a)?`${co(a)} out of ${co(b())}`:"live"}#gn(a){let{duration:b}=this.#F.$state;return bc(a/100*b(),5)}#go(a){let{liveEdge:b,duration:c}=this.#F.$state,d=Math.max(0,Math.min(1,b()?1:Math.min(a,c())/c()));return Number.isNaN(d)?0:Number.isFinite(d)?100*d:100}#gf(a){let b=this.#gn(a),{live:c,duration:d}=this.#F.$state;return Number.isFinite(b)?(c()?b-d():b).toFixed(0):"LIVE"}#gg(a,b){let c=this.#gn(a),{live:d,duration:e}=this.#F.$state,f=d()?c-e():c;return Number.isFinite(c)?`${f<0?"-":""}${cn(Math.abs(f),b)}`:"LIVE"}}class dE extends c.Component{static props={disabled:!1};#F;#gp;#gq;#gr=null;#gs=[];#gt=(0,c.signal)(null);#gu=(0,c.signal)([]);#gv=(0,c.signal)(-1);#gw=(0,c.signal)(-1);#gx=0;get cues(){return this.#gu()}get activeCue(){return this.#gu()[this.#gv()]||null}get activePointerCue(){return this.#gu()[this.#gw()]||null}onSetup(){this.#F=a4(),this.#gp=(0,c.useState)(dD.state)}onAttach(a){aW(this.#F.textTracks,"chapters",this.#gy.bind(this)),(0,c.effect)(this.#gz.bind(this))}onConnect(){(0,c.onDispose)(()=>this.#b9.bind(this))}onDestroy(){this.#gy(null)}setRefs(a){if(this.#gs=a,this.#gq?.dispose(),1===this.#gs.length){let a=this.#gs[0];a.style.width="100%",a.style.setProperty("--chapter-fill","var(--slider-fill)"),a.style.setProperty("--chapter-progress","var(--slider-progress)")}else this.#gs.length>0&&(0,c.scoped)(()=>this.#gA(),this.#gq=(0,c.createScope)())}#gy(a){(0,c.peek)(this.#gt)!==a&&(this.#b9(),this.#gt.set(a))}#b9(){this.#gs=[],this.#gu.set([]),this.#gv.set(-1),this.#gw.set(-1),this.#gx=0,this.#gq?.dispose()}#gA(){this.#gs.length&&(0,c.effect)(this.#gB.bind(this))}#gB(){let{hidden:a}=this.#gp;a()||((0,c.effect)(this.#gC.bind(this)),(0,c.effect)(this.#gD.bind(this)),(0,c.effect)(this.#gE.bind(this)),(0,c.effect)(this.#gF.bind(this)))}#gC(){let a=this.#gu();if(!a.length)return;let b,{seekableStart:c,seekableEnd:d}=this.#F.$state,e=c(),f=(d()||a[a.length-1].endTime)-e,g=100;for(let c=0;c<a.length;c++)if(b=a[c],this.#gs[c]){let d=c===a.length-1?g:bc((b.endTime-Math.max(e,b.startTime))/f*100,3);this.#gs[c].style.width=d+"%",g-=d}}#gD(){let{liveEdge:a,seekableStart:b,seekableEnd:d}=this.#F.$state,{fillPercent:e,value:f}=this.#gp,g=this.#gu(),h=a(),i=(0,c.peek)(this.#gv),j=g[i],k=h?this.#gu.length-1:this.#gG(j&&j.startTime/d()*100<=(0,c.peek)(f)?i:0,e());h||!j?this.#gH(0,g.length,100):k>i?this.#gH(i,k,100):k<i&&this.#gH(k+1,i+1,0);let l=h?100:this.#gI(g[k],e(),b(),this.#gJ(g));this.#gK(this.#gs[k],l),this.#gv.set(k)}#gE(){let{hidden:a,pointerPercent:b}=this.#gp;if(a())return void this.#gw.set(-1);let c=this.#gG(0,b());this.#gw.set(c)}#gH(a,b,c){for(let d=a;d<b;d++)this.#gK(this.#gs[d],c)}#gK(a,b){a&&(a.style.setProperty("--chapter-fill",b+"%"),(0,c.setAttribute)(a,"data-active",b>0&&b<100),(0,c.setAttribute)(a,"data-ended",100===b))}#gG(a,b){let c=0,d=this.#gu();if(0===b)return 0;if(100===b)return d.length-1;let{seekableStart:e}=this.#F.$state,f=e(),g=this.#gJ(d);for(let e=a;e<d.length;e++)if((c=this.#gI(d[e],b,f,g))>=0&&c<100)return e;return 0}#gF(){this.#gL(this.#gM())}#gL=(0,c.animationFrameThrottle)(a=>{let b,c=this.#gu(),{seekableStart:d}=this.#F.$state,e=d(),f=this.#gJ(c);for(let d=this.#gx;d<this.#gs.length;d++)if(b=this.#gI(c[d],a,e,f),this.#gs[d]?.style.setProperty("--chapter-progress",b+"%"),b<100){this.#gx=d;break}});#gM=(0,c.computed)(this.#gN.bind(this));#gN(){let{bufferedEnd:a,duration:b}=this.#F.$state;return 100*bc(Math.min(a()/Math.max(b(),1),1),3)}#gJ(a){let{seekableEnd:b}=this.#F.$state,c=b();return Number.isFinite(c)?c:a[a.length-1]?.endTime||0}#gI(a,b,c,d){if(!a||0===this.#gu().length)return 0;let e=d-c,f=Math.max(0,a.startTime-c),g=Math.min(d,a.endTime)-c,h=f/e,i=100*h,j=100*Math.min(1,h+(g-f)/e);return Math.max(0,bc(b>=j?100:(b-i)/(j-i)*100,3))}#gO(a){let b=[],{seekableStart:c,seekableEnd:d,duration:e}=this.#F.$state,f=c(),g=d(),h=(a=a.filter(a=>a.startTime<=g&&a.endTime>=f))[0];h&&h.startTime>f&&b.push(new window.VTTCue(f,h.startTime,""));for(let c=0;c<a.length-1;c++){let d=a[c],e=a[c+1];if(b.push(d),e){let a=e.startTime-d.endTime;a>0&&b.push(new window.VTTCue(d.endTime,d.endTime+a,""))}}let i=a[a.length-1];if(i){b.push(i);let a=e();a>=0&&a-i.endTime>1&&b.push(new window.VTTCue(i.endTime,e(),""))}return b}#gz(){let{source:a}=this.#F.$state;a(),this.#bW()}#bW(){if(!this.scope)return;let{disabled:a}=this.$props;if(a()){this.#gu.set([]),this.#gv.set(0),this.#gx=0;return}let b=this.#gt();if(b){let a=this.#gP.bind(this);a(),new c.EventsController(b).add("add-cue",a).add("remove-cue",a),(0,c.effect)(this.#gQ.bind(this))}return this.#gr=this.#gR(),this.#gr&&(0,c.effect)(this.#gS.bind(this)),()=>{this.#gr&&(this.#gr.textContent="",this.#gr=null)}}#gQ(){this.#F.$state.duration(),this.#gP()}#gP=(0,c.functionDebounce)(()=>{let a=(0,c.peek)(this.#gt);this.scope&&a&&a.cues.length&&(this.#gu.set(this.#gO(a.cues)),this.#gv.set(0),this.#gx=0)},150,!0);#gS(){let a=this.activePointerCue||this.activeCue;this.#gr&&(this.#gr.textContent=a?.text||"")}#gT(){let a=this.el;for(;a&&"slider"!==a.getAttribute("role");)a=a.parentElement;return a}#gR(){let a=this.#gT();return a?a.querySelector('[data-part="chapter-title"]'):null}}let dF=dE.prototype;(0,c.prop)(dF,"cues"),(0,c.prop)(dF,"activeCue"),(0,c.prop)(dF,"activePointerCue"),(0,c.method)(dF,"setRefs");let dG=(0,c.createContext)(),dH=["a[href]","[tabindex]","input","select","button"].map(a=>`${a}:not([aria-hidden='true'])`).join(","),dI=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]);class dJ{#gU=-1;#gV=null;#gW=[];#ew;get items(){return this.#gW}constructor(a){this.#ew=a}attachMenu(a){(0,c.listenEvent)(a,"focus",this.#dE.bind(this)),this.#gV=a,(0,c.onDispose)(()=>{this.#gV=null})}listen(){this.#gV&&(this.update(),new c.EventsController(this.#gV).add("keyup",this.#_.bind(this)).add("keydown",this.#aa.bind(this)),(0,c.onDispose)(()=>{this.#gU=-1,this.#gW=[]}))}update(){this.#gU=0,this.#gW=this.#gX()}scroll(a=this.#gY()){let b=this.#gW[a];b&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{!function(a,b={}){var d={scrollMode:"if-needed",block:"center",inline:"center",...b};for(let{el:b,top:e,left:f}of(0,c.r)(a,d))b.scroll({top:e,left:f,behavior:d.behavior})}(b,{behavior:"smooth",boundary:a=>!a.hasAttribute("data-root")})})})}focusActive(a=!0){let b=this.#gY();this.#gZ(b>=0?b:0,a)}#gZ(a,b=!0){this.#gU=a,this.#gW[a]?(this.#gW[a].focus({preventScroll:!0}),b&&this.scroll(a)):this.#gV?.focus({preventScroll:!0})}#gY(){return this.#gW.findIndex(a=>document.activeElement===a||"menuitemradio"===a.getAttribute("role")&&"true"===a.getAttribute("aria-checked"))}#dE(){this.#gU>=0||(this.update(),this.focusActive())}#g$(a){let b=a.target;if((0,c.wasEnterKeyPressed)(a)&&b instanceof Element){let a=b.getAttribute("role");return!/a|input|select|button/.test(b.localName)&&!a}return dI.has(a.key)}#_(a){this.#g$(a)&&(a.stopPropagation(),a.preventDefault())}#aa(a){if(this.#g$(a))switch(a.stopPropagation(),a.preventDefault(),a.key){case"Escape":this.#ew.closeMenu(a);break;case"Tab":this.#gZ(this.#g_(a.shiftKey?-1:1));break;case"ArrowUp":this.#gZ(this.#g_(-1));break;case"ArrowDown":this.#gZ(this.#g_(1));break;case"Home":case"PageUp":this.#gZ(0);break;case"End":case"PageDown":this.#gZ(this.#gW.length-1)}}#g_(a){let b=this.#gU;do b=(b+a+this.#gW.length)%this.#gW.length;while(this.#gW[b]?.offsetParent===null)return b}#gX(){if(!this.#gV)return[];let a=this.#gV.querySelectorAll(dH),b=[],c=a=>"menu"===a.getAttribute("role");for(let d of a)bq(d)&&null!==d.offsetParent&&bl(this.#gV,d,c)&&b.push(d);return b}}var dK=Object.defineProperty,dL=Object.getOwnPropertyDescriptor,dM=(a,b,c,d)=>{for(var e,f=dL(b,c),g=a.length-1;g>=0;g--)(e=a[g])&&(f=e(b,c,f)||f);return f&&dK(b,c,f),f};let dN=0;class dO extends c.Component{static props={showDelay:0};#F;#g0;#g1;#g2=(0,c.signal)(!1);#g3=(0,c.signal)(!1);#eC=(0,c.signal)(null);#eD=(0,c.signal)(null);#g4;#g5=new Set;#g6=null;#g7;#g8;#g9=!1;#ha=(0,c.signal)(!1);#hb=new Set;get triggerElement(){return this.#eC()}get contentElement(){return this.#eD()}get isSubmenu(){return!!this.#g4}constructor(){super();const{showDelay:a}=this.$props;this.#g7=new cX({trigger:this.#eC,content:this.#eD,showDelay:a,listen:(a,b,c)=>{bm(a,a=>{this.#g2()?c(a):b(a)});let d=this.#hc();d&&bm(d,a=>{a.stopPropagation(),c(a)})},onChange:this.#hd.bind(this)})}onSetup(){this.#F=a4();let a=++dN;this.#g0=`media-menu-${a}`,this.#g1=`media-menu-button-${a}`,this.#g8=new dJ({closeMenu:this.close.bind(this)}),(0,c.hasProvidedContext)(dG)&&(this.#g4=(0,c.useContext)(dG)),this.#he(),this.setAttributes({"data-open":this.#g2,"data-root":!this.isSubmenu,"data-submenu":this.isSubmenu,"data-disabled":this.#fW.bind(this)}),(0,c.provideContext)(dG,{button:this.#eC,content:this.#eD,expanded:this.#g2,hint:(0,c.signal)(""),submenu:!!this.#g4,disable:this.#hf.bind(this),attachMenuButton:this.#hg.bind(this),attachMenuItems:this.#hh.bind(this),attachObserver:this.#hi.bind(this),disableMenuButton:this.#hj.bind(this),addSubmenu:this.#hk.bind(this),onTransitionEvent:a=>{this.#hb.add(a),(0,c.onDispose)(()=>{this.#hb.delete(a)})}})}onAttach(a){a.style.setProperty("display","contents")}onConnect(a){(0,c.effect)(this.#hl.bind(this)),this.isSubmenu&&this.#g4?.addSubmenu(this)}onDestroy(){this.#eC.set(null),this.#eD.set(null),this.#g6=null,this.#hb.clear()}#he(){let a=-1,b=(0,c.hasProvidedContext)(dh)?(0,c.useContext)(dh):null;(0,c.provideContext)(dh,{onDragStart:()=>{b?.onDragStart?.(),window.clearTimeout(a),a=-1,this.#g9=!0},onDragEnd:()=>{b?.onDragEnd?.(),a=window.setTimeout(()=>{this.#g9=!1,a=-1},300)}})}#hl(){let a=this.#hm();this.isSubmenu||this.#dS(),this.#hn(a),a&&((0,c.effect)(()=>{let{height:a}=this.#F.$state,b=this.#eD();b&&(0,c.setStyle)(b,"--player-height",a()+"px")}),this.#g8.listen(),this.listen("pointerup",this.#ho.bind(this)),(0,c.listenEvent)(window,"pointerup",this.#hp.bind(this)))}#hg(a){let b=a.el,d=this.isSubmenu,e=cw(this.#fW.bind(this));bh(b,"tabindex",d?"-1":"0"),bh(b,"role",d?"menuitem":"button"),(0,c.setAttribute)(b,"id",this.#g1),(0,c.setAttribute)(b,"aria-haspopup","menu"),(0,c.setAttribute)(b,"aria-expanded","false"),(0,c.setAttribute)(b,"data-root",!this.isSubmenu),(0,c.setAttribute)(b,"data-submenu",this.isSubmenu);let f=()=>{(0,c.setAttribute)(b,"data-open",this.#g2()),(0,c.setAttribute)(b,"aria-disabled",e())};ak?f():(0,c.effect)(f),this.#eC.set(b),(0,c.onDispose)(()=>{this.#eC.set(null)})}#hh(a){let b=a.el;b.style.setProperty("display","none"),(0,c.setAttribute)(b,"id",this.#g0),bh(b,"role","menu"),bh(b,"tabindex","-1"),(0,c.setAttribute)(b,"data-root",!this.isSubmenu),(0,c.setAttribute)(b,"data-submenu",this.isSubmenu),this.#eD.set(b),(0,c.onDispose)(()=>this.#eD.set(null));let d=()=>(0,c.setAttribute)(b,"data-open",this.#g2());ak?d():(0,c.effect)(d),this.#g8.attachMenu(b),this.#hn(!1);let e=this.#hq.bind(this);this.isSubmenu?this.#g4?.onTransitionEvent(e):(a.listen("transitionstart",e),a.listen("transitionend",e),a.listen("animationend",this.#dS),a.listen("vds-menu-resize",this.#dS))}#hi(a){this.#g6=a}#hn(a){let b=(0,c.peek)(this.#eD);b&&(0,c.setAttribute)(b,"aria-hidden",(0,c.ariaBool)(!a))}#hj(a){this.#ha.set(a)}#hr=!1;#hd(a,b){if(this.#hr=(0,c.isKeyboardEvent)(b),b?.stopPropagation(),this.#g2()===a)return;if(this.#fW()){a&&this.#g7.hide(b);return}this.el?.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));let d=this.#eC(),e=this.#eD();if(d&&((0,c.setAttribute)(d,"aria-controls",a&&this.#g0),(0,c.setAttribute)(d,"aria-expanded",(0,c.ariaBool)(a))),e&&(0,c.setAttribute)(e,"aria-labelledby",a&&this.#g1),this.#g2.set(a),this.#hs(b),(0,c.tick)(),this.#hr)for(let b of(a?e?.focus():d?.focus(),[this.el,e]))b&&b.setAttribute("data-keyboard","");else for(let a of[this.el,e])a&&a.removeAttribute("data-keyboard");if(this.dispatch(a?"open":"close",{trigger:b}),a)this.isSubmenu||this.#F.activeMenu===this||(this.#F.activeMenu?.close(b),this.#F.activeMenu=this),this.#g6?.onOpen?.(b);else{if(this.isSubmenu)for(let a of this.#g5)a.close(b);else this.#F.activeMenu=null;this.#g6?.onClose?.(b)}a&&requestAnimationFrame(this.#ht.bind(this))}#ht(){this.#hu||this.#hv||(this.#g8.update(),requestAnimationFrame(()=>{this.#hr?this.#g8.focusActive():this.#g8.scroll()}))}#hm(){return!this.#fW()&&this.#g2()}#fW(){return this.#g3()||this.#ha()}#hf(a){this.#g3.set(a)}#ho(a){let b=this.#eD();this.#g9||b&&bf(b,a)||a.stopPropagation()}#hp(a){let b=this.#eD();this.#g9||b&&bf(b,a)||this.close(a)}#hc(){let a=this.el?.querySelector('[data-part="close-target"]');return this.el&&a&&bl(this.el,a,a=>"menu"===a.getAttribute("role"))?a:null}#hs(a){this.isSubmenu||(this.#g2()?this.#F.remote.pauseControls(a):this.#F.remote.resumeControls(a))}#hk(a){this.#g5.add(a),new c.EventsController(a).add("open",this.#hw).add("close",this.#hx),(0,c.onDispose)(this.#hy)}#hy=this.#hz.bind(this);#hz(a){this.#g5.delete(a)}#hv=!1;#hw=this.#hA.bind(this);#hA(a){this.#hv=!0;let b=this.#eD();for(let b of(this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","true"),this.#g5))if(b!==a.target)for(let a of[b.el,b.triggerElement])a?.setAttribute("aria-hidden","true");if(b){let c=a.target.el;for(let a of b.children)a.contains(c)?a.setAttribute("data-open",""):a!==c&&a.setAttribute("data-hidden","")}}#hx=this.#hB.bind(this);#hB(a){this.#hv=!1;let b=this.#eD();for(let a of(this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","false"),this.#g5))for(let b of[a.el,a.triggerElement])b?.setAttribute("aria-hidden","false");if(b)for(let a of b.children)a.removeAttribute("data-open"),a.removeAttribute("data-hidden")}#dS=(0,c.animationFrameThrottle)(()=>{let a=(0,c.peek)(this.#eD);if(!a||ak)return;let b=0,d=getComputedStyle(a),e=[...a.children];for(let a of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])b+=parseFloat(d[a])||0;for(let a of e)if(bq(a)&&"contents"===a.style.display)e.push(...a.children);else if(3===a.nodeType)b+=parseFloat(getComputedStyle(a).fontSize);else if(bq(a)){if(!bj(a))continue;let c=getComputedStyle(a);b+=a.offsetHeight+(parseFloat(c.marginTop)||0)+(parseFloat(c.marginBottom)||0)}(0,c.setStyle)(a,"--menu-height",b+"px")});#hu=!1;#hq(a){let b=this.#eD();for(let d of(b&&"height"===a.propertyName&&(this.#hu="transitionstart"===a.type,(0,c.setAttribute)(b,"data-transition",this.#hu?"height":null),this.#g2()&&this.#ht()),this.#hb))d(a)}open(a){(0,c.peek)(this.#g2)||(this.#g7.show(a),(0,c.tick)())}close(a){(0,c.peek)(this.#g2)&&(this.#g7.hide(a),(0,c.tick)())}}dM([c.prop],dO.prototype,"triggerElement"),dM([c.prop],dO.prototype,"contentElement"),dM([c.prop],dO.prototype,"isSubmenu"),dM([c.method],dO.prototype,"open"),dM([c.method],dO.prototype,"close");class dP extends c.Component{static props={disabled:!1};#hC;#hD=(0,c.signal)(null);get expanded(){return this.#hC?.expanded()??!1}constructor(){super(),new cH}onSetup(){this.#hC=(0,c.useContext)(dG)}onAttach(a){this.#hC.attachMenuButton(this),(0,c.effect)(this.#fn.bind(this)),bh(a,"type","button")}onConnect(a){(0,c.effect)(this.#hE.bind(this)),this.#ef();let b=new MutationObserver(this.#ef.bind(this));b.observe(a,{attributeFilter:["data-part"],childList:!0,subtree:!0}),(0,c.onDispose)(()=>b.disconnect()),bm(a,a=>{this.dispatch("select",{trigger:a})})}#fn(){this.#hC.disableMenuButton(this.$props.disabled())}#hE(){let a=this.#hD();a&&(0,c.effect)(()=>{let b=this.#hC.hint();b&&(a.textContent=b)})}#ef(){let a=this.el?.querySelector('[data-part="hint"]');this.#hD.set(a??null)}}let dQ=dP.prototype;(0,c.prop)(dQ,"expanded");class dR extends dP{}class dS extends c.Component{static props={container:null,disabled:!1};#o=null;#F;onSetup(){this.#F=a4(),(0,c.provideContext)(dT,{attach:this.#hF.bind(this)})}onAttach(a){a.style.setProperty("display","contents")}onConnect(a){}onDestroy(){this.#o?.remove(),this.#o=null}#hF(a){this.#hG(!1),this.#o=a,bo(()=>{bo(()=>{this.connectScope&&(0,c.effect)(this.#fn.bind(this))})})}#fn(){let{fullscreen:a}=this.#F.$state,{disabled:b}=this.$props;this.#hG("fullscreen"===b()?!a():!b())}#hG(a){if(!this.#o)return;let b=this.#hH(this.$props.container());if(!b)return;let d=this.#o.parentElement===b;(0,c.setAttribute)(this.#o,"data-portal",a),a?d||(this.#o.remove(),b.append(this.#o)):d&&this.#o.parentElement===b&&(this.#o.remove(),this.el?.append(this.#o))}#hH(a){return bq(a)?a:a?document.querySelector(a):document.body}}let dT=(0,c.createContext)();class dU extends c.Component{static props={placement:null,offset:0,alignOffset:0};#hC;constructor(){super(),new cH;const{placement:a}=this.$props;this.setAttributes({"data-placement":a})}onAttach(a){if(this.#hC=(0,c.useContext)(dG),this.#hC.attachMenuItems(this),(0,c.hasProvidedContext)(dT)){let b=(0,c.useContext)(dT);b&&((0,c.provideContext)(dT,null),b.attach(a),(0,c.onDispose)(()=>b.attach(null)))}}onConnect(a){(0,c.effect)(this.#eM.bind(this))}#eM(){let{expanded:a}=this.#hC;if(!this.el||!a())return;let b=this.$props.placement();if(!b)return;Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});let{offset:d,alignOffset:e}=this.$props;(0,c.onDispose)(bp(this.el,this.#eL(),b,{offsetVarName:"media-menu",xOffset:e(),yOffset:d()})),(0,c.onDispose)(this.#hI.bind(this))}#hI(){this.el&&(this.el.removeAttribute("style"),this.el.style.display="none")}#eL(){return this.#hC.button()}}let dV=(0,c.createContext)();class dW extends c.ViewController{#hJ=new Set;#hK=(0,c.signal)("");#cf=null;onValueChange;get values(){return Array.from(this.#hJ).map(a=>a.value())}get value(){return this.#hK()}set value(a){this.#z(a)}onSetup(){(0,c.provideContext)(dV,{add:this.#hL.bind(this),remove:this.#hM.bind(this)})}onAttach(a){(0,c.hasProvidedContext)(dG)||bh(a,"role","radiogroup"),this.setAttributes({value:this.#hK})}onDestroy(){this.#hJ.clear()}#hL(a){this.#hJ.has(a)||(this.#hJ.add(a),a.onCheck=this.#hN,a.check(a.value()===this.#hK()))}#hM(a){a.onCheck=null,this.#hJ.delete(a)}#hN=this.#z.bind(this);#z(a,b){let d=(0,c.peek)(this.#hK);if(!a||a===d)return;let e=this.#hO(d),f=this.#hO(a);e?.check(!1,b),f?.check(!0,b),this.#hK.set(a),this.onValueChange?.(a,b)}#hO(a){for(let b of this.#hJ)if(a===(0,c.peek)(b.value))return b;return null}}class dX extends c.Component{static props={value:""};#cf;get values(){return this.#cf.values}get value(){return this.#cf.value}set value(a){this.#cf.value=a}constructor(){super(),this.#cf=new dW,this.#cf.onValueChange=this.#fZ.bind(this)}onSetup(){ak?this.#fl():(0,c.effect)(this.#fl.bind(this))}#fl(){this.#cf.value=this.$props.value()}#fZ(a,b){let c=this.createEvent("change",{detail:a,trigger:b});this.dispatch(c)}}let dY=dX.prototype;(0,c.prop)(dY,"values"),(0,c.prop)(dY,"value");class dZ extends c.Component{static props={value:""};#hP=(0,c.signal)(!1);#cf={value:this.$props.value,check:this.#hQ.bind(this),onCheck:null};get checked(){return this.#hP()}constructor(){super(),new cH}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this.#hP,"aria-checked":cw(this.#hP)})}onAttach(a){let b=(0,c.hasProvidedContext)(dG);bh(a,"tabindex",b?"-1":"0"),bh(a,"role",b?"menuitemradio":"radio"),(0,c.effect)(this.#fl.bind(this))}onConnect(a){this.#hR(),bm(a,this.#eU.bind(this)),(0,c.onDispose)(this.#aD.bind(this))}#aD(){(0,c.scoped)(()=>{(0,c.useContext)(dV).remove(this.#cf)},this.connectScope)}#hR(){(0,c.useContext)(dV).add(this.#cf)}#fl(){let{value:a}=this.$props,b=a();(0,c.peek)(this.#hP)&&this.#cf.onCheck?.(b)}#eU(a){(0,c.peek)(this.#hP)||(this.#z(!0,a),this.#hS(a),this.#cf.onCheck?.((0,c.peek)(this.$props.value),a))}#hQ(a,b){(0,c.peek)(this.#hP)!==a&&this.#z(a,b)}#z(a,b){this.#hP.set(a),this.dispatch("change",{detail:a,trigger:b})}#hS(a){this.dispatch("select",{trigger:a})}}let d$=dZ.prototype;(0,c.prop)(d$,"checked");class d_ extends c.Component{static props={disabled:!1,event:void 0,action:void 0};#F;#aV=null;onSetup(){this.#F=a4();let{event:a,action:b}=this.$props;this.setAttributes({event:a,action:b})}onAttach(a){a.setAttribute("data-media-gesture",""),a.style.setProperty("pointer-events","none")}onConnect(a){this.#aV=this.#F.player.el?.querySelector("[data-media-provider]"),(0,c.effect)(this.#hT.bind(this))}#hT(){let a=this.$props.event(),b=this.$props.disabled();this.#aV&&a&&!b&&(/^dbl/.test(a)&&(a=a.split(/^dbl/)[1]),("pointerup"===a||"pointerdown"===a)&&"coarse"===this.#F.$state.pointer()&&(a="pointerup"===a?"touchend":"touchstart"),(0,c.listenEvent)(this.#aV,a,this.#hU.bind(this),{passive:!1}))}#hV=0;#hW=-1;#hU(a){if(this.$props.disabled()||(0,c.isPointerEvent)(a)&&(0!==a.button||this.#F.activeMenu)||(0,c.isTouchEvent)(a)&&this.#F.activeMenu||bn(a)||!this.#hX(a))return;a.MEDIA_GESTURE=!0,a.preventDefault();let b=(0,c.peek)(this.$props.event);if(b?.startsWith("dbl")){if(1===this.#hV){queueMicrotask(()=>this.#hY(a)),clearTimeout(this.#hW),this.#hV=0;return}}else 0===this.#hV&&setTimeout(()=>{1===this.#hV&&this.#hY(a)},250);0===this.#hV&&(this.#hW=window.setTimeout(()=>{this.#hV=0},275)),this.#hV++}#hY(a){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{this.#hZ()&&this.#h$((0,c.peek)(this.$props.action),a),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})}#hX(a){if(!this.el)return!1;if((0,c.isPointerEvent)(a)||(0,c.isMouseEvent)(a)||(0,c.isTouchEvent)(a)){let b=(0,c.isTouchEvent)(a)?a.changedTouches[0]??a.touches[0]:void 0,d=b?.clientX??a.clientX,e=b?.clientY??a.clientY,f=this.el.getBoundingClientRect(),g=e>=f.top&&e<=f.bottom&&d>=f.left&&d<=f.right;return a.type.includes("leave")?!g:g}return!0}#hZ(){return Array.from(this.#F.player.el.querySelectorAll("[data-media-gesture][data-triggered]")).sort((a,b)=>getComputedStyle(b).zIndex-getComputedStyle(a).zIndex)[0]===this.el}#h$(a,b){if(!a)return;let d=new c.DOMEvent("will-trigger",{detail:a,cancelable:!0,trigger:b});if(this.dispatchEvent(d),d.defaultPrevented)return;let[e,f]=a.replace(/:([a-z])/,"-$1").split(":");a.includes(":fullscreen")?this.#F.remote.toggleFullscreen("prefer-media",b):a.includes("seek:")?this.#F.remote.seek((0,c.peek)(this.#F.$state.currentTime)+(+f||0),b):this.#F.remote[(0,c.kebabToCamelCase)(e)](b),this.dispatch("trigger",{detail:a,trigger:b})}}class d0{priority=10;#x=null;#h_;#a1;constructor(a){this.#h_=a}attach(){}canRender(){return!0}detach(){this.#a1?.abort(),this.#a1=void 0,this.#h_.reset(),this.#x=null}changeTrack(a){a&&this.#x!==a&&(this.#a1?.abort(),this.#a1=new c.EventsController(a),a.readyState<2?(this.#h_.reset(),this.#a1.add("load",()=>this.#h0(a),{once:!0})):this.#h0(a),this.#a1.add("add-cue",a=>{this.#h_.addCue(a.detail)}).add("remove-cue",a=>{this.#h_.removeCue(a.detail)}),this.#x=a)}#h0(a){this.#h_.changeTrack({cues:[...a.cues],regions:[...a.regions]})}}class d1 extends c.Component{static props={textDir:"ltr",exampleText:"Captions look like this."};#F;static lib=(0,c.signal)(null);onSetup(){this.#F=a4(),this.setAttributes({"aria-hidden":cw(this.#eX.bind(this))})}onAttach(a){a.style.setProperty("pointer-events","none")}onConnect(b){d1.lib()||a.A(30642).then(a=>d1.lib.set(a)),(0,c.effect)(this.#h1.bind(this))}#eX(){let{textTrack:a,remotePlaybackState:b,iOSControls:c}=this.#F.$state,d=a();return c()||"connected"===b()||!d||!aZ(d)}#h1(){if(!d1.lib())return;let{viewType:a}=this.#F.$state;return"audio"===a()?this.#h2():this.#h3()}#h2(){return(0,c.effect)(this.#bW.bind(this)),this.#h4(null),()=>{this.el.textContent=""}}#bW(){if(this.#eX())return;this.#h5();let{textTrack:a}=this.#F.$state;(0,c.listenEvent)(a(),"cue-change",this.#h5.bind(this)),(0,c.effect)(this.#h6.bind(this))}#h5(){this.el.textContent="",this.#h7>=0&&this.#h8();let{realCurrentTime:a,textTrack:b}=this.#F.$state,{renderVTTCueString:d}=d1.lib(),e=(0,c.peek)(a);for(let a of(0,c.peek)(b).activeCues){let b=this.#h9(),c=this.#ia();c.innerHTML=d(a,e),b.append(c),this.el.append(c)}}#h6(){let{realCurrentTime:a}=this.#F.$state,{updateTimedVTTCueNodes:b}=d1.lib();b(this.el,a())}#h3(){let{CaptionsRenderer:a}=d1.lib(),b=new a(this.el),d=new d0(b);return this.#F.textRenderers.add(d),(0,c.effect)(this.#ib.bind(this,b)),(0,c.effect)(this.#ic.bind(this,b)),this.#h4(b),()=>{this.el.textContent="",this.#F.textRenderers.remove(d),b.destroy()}}#ib(a){a.dir=this.$props.textDir()}#ic(a){if(this.#eX())return;let{realCurrentTime:b,textTrack:c}=this.#F.$state;a.currentTime=b(),this.#h7>=0&&c()?.activeCues[0]&&this.#h8()}#h4(a){let b=this.#F.player;if(!b)return;let d=this.#id.bind(this,a);(0,c.listenEvent)(b,"vds-font-change",d)}#id(a){if(this.#h7>=0)return void this.#ie();let{textTrack:b}=this.#F.$state;b()?.activeCues[0]?a?.update(!0):this.#ig()}#ig(){let a=this.#h9();(0,c.setAttribute)(a,"data-example","");let b=this.#ia();(0,c.setAttribute)(b,"data-example",""),b.textContent=this.$props.exampleText(),a?.append(b),this.el?.append(a),this.el?.setAttribute("data-example",""),this.#ie()}#h7=-1;#ie(){window.clearTimeout(this.#h7),this.#h7=window.setTimeout(this.#h8.bind(this),2500)}#h8(){this.el?.removeAttribute("data-example"),this.el?.querySelector("[data-example]")&&(this.el.textContent=""),this.#h7=-1}#h9(){let a=document.createElement("div");return(0,c.setAttribute)(a,"data-part","cue-display"),a}#ia(){let a=document.createElement("div");return(0,c.setAttribute)(a,"data-part","cue"),a}}class d2 extends c.Component{static props={src:null,alt:null,crossOrigin:null};static state=new c.State({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1});#F;onSetup(){this.#F=a4(),this.#fQ(),this.#ih(),this.#dm(),this.#fr()}onAttach(a){a.style.setProperty("pointer-events","none"),(0,c.effect)(this.#fJ.bind(this)),(0,c.effect)(this.#fQ.bind(this)),(0,c.effect)(this.#ih.bind(this)),(0,c.effect)(this.#dm.bind(this)),(0,c.effect)(this.#fr.bind(this));let{started:b}=this.#F.$state;this.setAttributes({"data-visible":()=>!b()&&!this.$state.hidden(),"data-loading":this.#fH.bind(this),"data-error":this.#fI.bind(this),"data-hidden":this.$state.hidden})}onConnect(a){(0,c.effect)(this.#ii.bind(this)),(0,c.effect)(this.#ba.bind(this))}#fI(){let{error:a}=this.$state;return!(0,c.isNull)(a())}#ii(){let{canLoadPoster:a,poster:b}=this.#F.$state;!a()&&b()&&aP(b(),"preconnect")}#fr(){let{src:a}=this.$props,{poster:b,nativeControls:d}=this.#F.$state;this.el&&(0,c.setAttribute)(this.el,"display",d()?"none":null),this.$state.hidden.set(this.#fI()||!(a()||b())||d())}#fH(){let{loading:a,hidden:b}=this.$state;return!b()&&a()}#fJ(){let a=this.$state.img();a&&(new c.EventsController(a).add("load",this.#ij.bind(this)).add("error",this.#aC.bind(this)),a.complete&&this.#ij())}#ik="";#fQ(){let{poster:a}=this.#F.$props,{canLoadPoster:b,providedPoster:c,inferredPoster:d}=this.#F.$state,e=this.$props.src()||"",f=e||a()||d();this.#ik===c()&&c.set(e),this.$state.src.set(b()&&f.length?f:null),this.#ik=e}#ih(){let{src:a}=this.$props,{alt:b}=this.$state,{poster:c}=this.#F.$state;b.set(a()||c()?this.$props.alt():null)}#dm(){let{crossOrigin:a}=this.$props,{crossOrigin:b}=this.$state,{crossOrigin:c,poster:d}=this.#F.$state,e=null!==a()?a():c();b.set(/ytimg\.com|vimeo/.test(d()||"")?null:!0===e?"anonymous":e)}#ba(){let{loading:a,error:b}=this.$state,{canLoadPoster:c,poster:d}=this.#F.$state;a.set(c()&&!!d()),b.set(null)}#ij(){let{loading:a,error:b}=this.$state;a.set(!1),b.set(null)}#aC(a){let{loading:b,error:c}=this.$state;b.set(!1),c.set(a)}}class d3 extends c.Component{static props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1,hidden:!1};static state=new c.State({timeText:"",hidden:!1});#F;#il=(0,c.signal)(null);#fj=(0,c.signal)(!0);#fk=(0,c.signal)(!0);onSetup(){this.#F=a4(),this.#im();let{type:a}=this.$props;this.setAttributes({"data-type":a,"data-remainder":this.#io.bind(this)}),new df({callback:this.#fp.bind(this)}).attach(this)}onAttach(a){a.hasAttribute("role")||(0,c.effect)(this.#ip.bind(this)),(0,c.effect)(this.#im.bind(this))}onConnect(a){(0,c.onDispose)(bk(a,this.#fj.set)),(0,c.effect)(this.#fr.bind(this)),(0,c.effect)(this.#iq.bind(this))}#fp(a){this.#fk.set(a[0].isIntersecting)}#fr(){let{hidden:a}=this.$props;this.$state.hidden.set(a()||!this.#fj()||!this.#fk())}#iq(){this.$props.toggle()?this.el&&bm(this.el,this.#ir.bind(this)):this.#il.set(null)}#im(){let{hidden:a,timeText:b}=this.$state,{duration:c}=this.#F.$state;if(a())return;let{type:d,padHours:e,padMinutes:f,showHours:g}=this.$props,h=this.#is(d()),i=c(),j=this.#io();if(!Number.isFinite(h+i))return void b.set("LIVE");let k=cn(j?Math.max(0,i-h):h,{padHrs:e(),padMins:f(),showHrs:g()});b.set((j?"-":"")+k)}#ip(){if(!this.el)return;let{toggle:a}=this.$props;(0,c.setAttribute)(this.el,"role",a()?"timer":null),(0,c.setAttribute)(this.el,"tabindex",a()?0:null)}#is(a){let{bufferedEnd:b,duration:c,currentTime:d}=this.#F.$state;switch(a){case"buffered":return b();case"duration":return c();default:return d()}}#io(){return this.$props.remainder()&&!1!==this.#il()}#ir(a){(a.preventDefault(),null===this.#il())?this.#il.set(!this.$props.remainder()):this.#il.set(a=>!a)}}class d4 extends cK{}class d5 extends cS{}class d6 extends cU{}class d7 extends cV{}class d8 extends cW{}class d9 extends c2{}class ea extends c7{}class eb extends c8{}class ec extends dc{}class ed extends c9{}class ee extends da{}class ef extends c6{}class eg extends c4{}class eh extends c5{}class ei extends db{}class ej extends c${}class ek extends c_{}class el extends c0{}class em extends dm{}class en extends dD{}class eo extends dz{}class ep extends dA{}class eq extends dB{}class er extends dC{}class es extends ds{}class et extends dv{}class eu extends dt{}class ev extends dx{}class ew extends dE{}class ex extends dO{}class ey extends dP{}class ez extends dU{}class eA extends dR{}class eB extends dX{}class eC extends dZ{}class eD extends d1{}class eE extends d_{}class eF extends d2{}class eG extends dr{}class eH extends d3{}let eI=b.forwardRef((a,c)=>{let{children:d,...e}=a,f=b.Children.toArray(d),g=f.find(eL);if(g){let a=g.props.children,d=f.map(c=>c!==g?c:b.Children.count(a)>1?b.Children.only(null):b.isValidElement(a)?a.props.children:null);return b.createElement(eJ,{...e,ref:c},b.isValidElement(a)?b.cloneElement(a,void 0,d):null)}return b.createElement(eJ,{...e,ref:c},d)});eI.displayName="Slot";let eJ=b.forwardRef((a,d)=>{let{children:e,...f}=a;return b.isValidElement(e)?b.cloneElement(e,{...function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{f(...a),e(...a)}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(f,e.props),ref:d?(0,c.composeRefs)(d,e.ref):e.ref}):b.Children.count(e)>1?b.Children.only(null):null});eJ.displayName="SlotClone";let eK=({children:a})=>b.createElement(b.Fragment,null,a);function eL(a){return b.isValidElement(a)&&a.type===eK}let eM=["button","div","span","img","video","audio"].reduce((a,c)=>{let d=b.forwardRef((a,d)=>{let{asChild:e,...f}=a,g=e?eI:c;return b.createElement(g,{...f,ref:d})});return d.displayName=`Primitive.${c}`,{...a,[c]:d}},{});function eN(a){return a?.$$PROVIDER_TYPE==="REMOTION"}function eO(a){return a?.type==="video/remotion"}let eP=em.state.record,eQ=Object.keys(eP).reduce((a,b)=>({...a,[b]:()=>eP[b]}),{});function eR(a,b){let d=(0,c.useStateContext)(dd);return(0,c.useSignal)((b?.current?.$state||d||eQ)[a])}let eS=d4.state.record,eT=Object.keys(eS).reduce((a,b)=>({...a,[b]:()=>eS[b]}),{});function eU(a,b){let d=(0,c.useStateContext)(a$);return(0,c.useSignal)((b?.current?.$state||d||eT)[a])}a.s(["AirPlayButtonInstance",()=>eg,"AudioGainSliderInstance",()=>ep,"CaptionButtonInstance",()=>ea,"CaptionsInstance",()=>eD,"ControlsGroupInstance",()=>d8,"ControlsInstance",()=>d7,"FullscreenButtonInstance",()=>eb,"GestureInstance",()=>eE,"GoogleCastButtonInstance",()=>eh,"HTMLAirPlayAdapter",()=>b0,"HTMLMediaProvider",()=>b$,"IS_CHROME",()=>ao,"IS_IOS",()=>am,"IS_SERVER",()=>ak,"ListSymbol",()=>a7,"LiveButtonInstance",()=>ec,"MediaAnnouncerInstance",()=>d6,"MediaPlayerInstance",()=>d4,"MediaProviderInstance",()=>d5,"MenuButtonInstance",()=>ey,"MenuInstance",()=>ex,"MenuItemInstance",()=>eA,"MenuItemsInstance",()=>ez,"MuteButtonInstance",()=>ed,"PIPButtonInstance",()=>ee,"PlayButtonInstance",()=>ef,"PosterInstance",()=>eF,"Primitive",()=>eM,"QualitySliderInstance",()=>er,"QualitySymbol",()=>bu,"RAFLoop",()=>bX,"RadioGroupController",()=>dW,"RadioGroupInstance",()=>eB,"RadioInstance",()=>eC,"SeekButtonInstance",()=>ei,"SliderChaptersInstance",()=>ew,"SliderInstance",()=>em,"SliderPreviewInstance",()=>ev,"SliderThumbnailInstance",()=>es,"SliderValueInstance",()=>et,"SliderVideoInstance",()=>eu,"SpeedSliderInstance",()=>eq,"TextTrack",()=>aX,"TextTrackSymbol",()=>aU,"ThumbnailInstance",()=>eG,"ThumbnailsLoader",()=>dq,"TimeInstance",()=>eH,"TimeRange",()=>ay,"TimeSliderInstance",()=>en,"ToggleButtonInstance",()=>d9,"TooltipContentInstance",()=>el,"TooltipInstance",()=>ej,"TooltipTriggerInstance",()=>ek,"VideoProvider",()=>b6,"VolumeSliderInstance",()=>eo,"appendParamsToURL",()=>aO,"canGoogleCastSrc",()=>aN,"coerceToError",()=>ca,"formatSpokenTime",()=>co,"formatTime",()=>cn,"getDownloadFile",()=>aT,"isHLSSupported",()=>ax,"isRemotionProvider",()=>eN,"isRemotionSrc",()=>eO,"isTrackCaptionKind",()=>aZ,"loadScript",()=>aR,"mediaContext",()=>a3,"mediaState",()=>a$,"menuContext",()=>dG,"preconnect",()=>aP,"sortVideoQualities",()=>bw,"updateSliderPreviewPlacement",()=>dy,"useMediaContext",()=>a4,"useMediaState",()=>eU,"useSliderState",()=>eR,"watchActiveTextTrack",()=>aW],5816)}];

//# sourceMappingURL=node_modules_%40vidstack_react_prod_chunks_vidstack-D5Pzx_k5_fda8baa1.js.map