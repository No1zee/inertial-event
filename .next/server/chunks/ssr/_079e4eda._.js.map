{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/play.ts","../../../../node_modules/lucide-react/src/icons/arrow-left.ts","../../../../src/components/files/FileExplorer.tsx","../../../../node_modules/lucide-react/src/icons/file-video.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Play\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWdvbiBwb2ludHM9IjUgMyAxOSAxMiA1IDIxIDUgMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/play\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Play = createLucideIcon('Play', [\n  ['polygon', { points: '5 3 19 12 5 21 5 3', key: '191637' }],\n]);\n\nexport default Play;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTIgMTktNy03IDctNyIgLz4KICA8cGF0aCBkPSJNMTkgMTJINSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/arrow-left\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowLeft = createLucideIcon('ArrowLeft', [\n  ['path', { d: 'm12 19-7-7 7-7', key: '1l729n' }],\n  ['path', { d: 'M19 12H5', key: 'x3x0zl' }],\n]);\n\nexport default ArrowLeft;\n","\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { Folder, FileVideo, File as FileIcon, ChevronRight, Home, ArrowLeft, Play } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ninterface FileItem {\r\n    name: string;\r\n    isDirectory: boolean;\r\n    path: string;\r\n    size: number;\r\n}\r\n\r\nexport function FileExplorer() {\r\n    const router = useRouter();\r\n    const [currentPath, setCurrentPath] = useState<string>(\"/\"); // Default to root or a safe start\r\n    const [items, setItems] = useState<FileItem[]>([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    // Initial load\r\n    useEffect(() => {\r\n        loadDirectory(currentPath);\r\n    }, []);\r\n\r\n    const loadDirectory = async (path: string) => {\r\n        setIsLoading(true);\r\n        setError(null);\r\n        try {\r\n            // Using the full URL to ensure we hit the backend port 5000 if not proxying\r\n            // Assuming Next.js rewrites or direct call. Using default localhost:5000 for now based on context.\r\n            // In layout we have NEXT_PUBLIC_API_URL but let's be robust.\r\n            const apiUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000/api';\r\n\r\n            const encodedPath = encodeURIComponent(path);\r\n            const res = await fetch(`${apiUrl}/tunnel/list?path=${encodedPath}`);\r\n\r\n            if (!res.ok) throw new Error(\"Failed to load directory\");\r\n\r\n            const data = await res.json();\r\n\r\n            // Sort: Folders first, then files\r\n            const sorted = (data.files || []).sort((a: FileItem, b: FileItem) => {\r\n                if (a.isDirectory === b.isDirectory) return a.name.localeCompare(b.name);\r\n                return a.isDirectory ? -1 : 1;\r\n            });\r\n\r\n            setItems(sorted);\r\n            setCurrentPath(data.path);\r\n        } catch (err: any) {\r\n            setError(err.message);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleNavigate = (path: string) => {\r\n        loadDirectory(path);\r\n    };\r\n\r\n    const handleUp = () => {\r\n        // Simple parent resolution\r\n        // Windows path handling might be tricky with simple string manipulation but trying standard separators\r\n        const separator = currentPath.includes(\"\\\\\") ? \"\\\\\" : \"/\";\r\n        const parts = currentPath.split(separator);\r\n        parts.pop(); // Remove current\r\n        const parent = parts.join(separator) || separator; // Fallback to root if empty\r\n        loadDirectory(parent);\r\n    };\r\n\r\n    const handlePlay = (item: FileItem) => {\r\n        // Navigate to watch page with special local file ID\r\n        // We'll need to handle this in /watch/[id] page to recognize \"local:\" prefix or query param\r\n        const encodedPath = encodeURIComponent(item.path);\r\n        router.push(`/watch/local?path=${encodedPath}&name=${encodeURIComponent(item.name)}`);\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex items-center gap-4 bg-zinc-900 p-4 rounded-xl border border-white/5\">\r\n                <button\r\n                    onClick={handleUp}\r\n                    disabled={isLoading}\r\n                    className=\"p-2 hover:bg-white/10 rounded-full transition-colors disabled:opacity-50\"\r\n                >\r\n                    <ArrowLeft size={20} />\r\n                </button>\r\n\r\n                <div className=\"flex items-center gap-2 overflow-x-auto scrollbar-hide flex-1 font-mono text-sm text-zinc-400\">\r\n                    <Home size={16} className=\"shrink-0\" />\r\n                    <span className=\"text-zinc-600\">/</span>\r\n                    <span className=\"text-white whitespace-nowrap\">{currentPath}</span>\r\n                </div>\r\n            </div>\r\n\r\n            {error && (\r\n                <div className=\"p-4 bg-red-500/10 text-red-500 rounded-xl border border-red-500/20\">\r\n                    Error: {error}\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3\">\r\n                {items.map((item) => (\r\n                    <div\r\n                        key={item.path}\r\n                        onClick={() => item.isDirectory ? handleNavigate(item.path) : handlePlay(item)}\r\n                        className={cn(\r\n                            \"group flex items-center gap-3 p-3 rounded-lg border border-white/5 transition-all cursor-pointer\",\r\n                            item.isDirectory\r\n                                ? \"bg-zinc-900/50 hover:bg-zinc-800 hover:border-white/10\"\r\n                                : \"bg-zinc-950 hover:bg-zinc-900 hover:border-red-500/20\"\r\n                        )}\r\n                    >\r\n                        <div className={cn(\r\n                            \"w-10 h-10 rounded-lg flex items-center justify-center shrink-0 transition-colors\",\r\n                            item.isDirectory ? \"bg-blue-500/10 text-blue-500 group-hover:bg-blue-500/20\" : \"bg-red-500/10 text-red-500 group-hover:bg-red-500/20\"\r\n                        )}>\r\n                            {item.isDirectory ? <Folder size={20} /> : <FileVideo size={20} />}\r\n                        </div>\r\n\r\n                        <div className=\"flex-1 min-w-0\">\r\n                            <h3 className=\"font-medium text-sm text-white truncate group-hover:text-red-500 transition-colors\">\r\n                                {item.name}\r\n                            </h3>\r\n                            <p className=\"text-xs text-zinc-500 truncate\">\r\n                                {item.isDirectory ? \"Folder\" : \"Media File\"}\r\n                            </p>\r\n                        </div>\r\n\r\n                        {!item.isDirectory && (\r\n                            <div className=\"opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                <Play size={16} className=\"text-white fill-current\" />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                ))}\r\n\r\n                {items.length === 0 && !isLoading && !error && (\r\n                    <div className=\"col-span-full py-12 text-center text-zinc-500\">\r\n                        This folder is empty.\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name FileVideo\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTQuNSAySDZhMiAyIDAgMCAwLTIgMnYxNmEyIDIgMCAwIDAgMiAyaDEyYTIgMiAwIDAgMCAyLTJWNy41TDE0LjUgMnoiIC8+CiAgPHBvbHlsaW5lIHBvaW50cz0iMTQgMiAxNCA4IDIwIDgiIC8+CiAgPHBhdGggZD0ibTEwIDExIDUgMy01IDN2LTZaIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/file-video\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst FileVideo = createLucideIcon('FileVideo', [\n  [\n    'path',\n    { d: 'M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z', key: '1nnpy2' },\n  ],\n  ['polyline', { points: '14 2 14 8 20 8', key: '1ew0cm' }],\n  ['path', { d: 'm10 11 5 3-5 3v-6Z', key: '7ntvm4' }],\n]);\n\nexport default FileVideo;\n"],"names":[],"mappings":"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","ignoreList":[0,1,3]}